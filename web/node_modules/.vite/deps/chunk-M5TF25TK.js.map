{
  "version": 3,
  "sources": ["../../@iconify/vue/dist/iconify.mjs", "../../@fast-crud/src/use/default-crud-options.ts", "../../@fast-crud/src/utils/util.log.ts", "../../@fast-crud/src/utils/util.string.ts", "../../@fast-crud/src/utils/util.trace.ts", "../../@fast-crud/src/utils/util.vite.ts", "../../@fast-crud/src/utils/util.store.ts", "../../@fast-crud/src/utils/deepdash/private/getPathToString.ts", "../../@fast-crud/src/utils/deepdash/private/getIterate.ts", "../../@fast-crud/src/utils/deepdash/get-each-deep.ts", "../../@fast-crud/src/utils/deepdash/index.ts", "../../@fast-crud/src/utils/util.dash.ts", "../../@fast-crud/src/utils/index.ts", "../../@fast-crud/src/types/list/assist.ts", "../../@fast-crud/src/types/list/button.ts", "../../@fast-crud/src/types/list/cascader.ts", "../../@fast-crud/src/locale/lang/zh-cn.ts", "../../@fast-crud/src/locale/lang/en.ts", "../../@fast-crud/src/locale/index.ts", "../../node_modules/.pnpm/dayjs@1.11.11/node_modules/dayjs/plugin/advancedFormat.js", "../../@fast-crud/src/types/functions.ts", "../../node_modules/.pnpm/dayjs@1.11.11/node_modules/dayjs/plugin/weekOfYear.js", "../../node_modules/.pnpm/dayjs@1.11.11/node_modules/dayjs/plugin/weekday.js", "../../node_modules/.pnpm/dayjs@1.11.11/node_modules/dayjs/plugin/localeData.js", "../../@fast-crud/src/types/list/date.ts", "../../@fast-crud/src/types/list/el.ts", "../../@fast-crud/src/types/list/number.ts", "../../@fast-crud/src/types/list/phone.ts", "../../@fast-crud/src/types/list/select.ts", "../../@fast-crud/src/types/list/text.ts", "../../@fast-crud/src/types/list/tree.ts", "../../@fast-crud/src/types/index.ts", "../../@fast-crud/fast-crud/src/components/container/fs-page.vue", "../../@fast-crud/fast-crud/src/components/container/fs-page.vue", "../../@fast-crud/src/use/use-merge.ts", "../../@fast-crud/src/use/use-compute.ts", "../../@fast-crud/src/utils/util.constants.ts", "../../@fast-crud/src/use/use-columns.tsx", "../../@fast-crud/src/use/use-form.ts", "../../@fast-crud/src/use/use-expose.ts", "../../@fast-crud/src/lib/fs-export/index.ts", "../../@fast-crud/src/use/use-plugins.ts", "../../@fast-crud/src/use/use-crud.ts", "../../@fast-crud/src/use/use-dict.ts", "../../node_modules/.pnpm/lru-cache@10.2.2/node_modules/lru-cache/dist/esm/index.js", "../../@fast-crud/src/use/use-dict-define.ts", "../../@fast-crud/src/use/use-types.ts", "../../@fast-crud/src/use/use-drag.ts", "../../@fast-crud/src/use/config.ts", "../../@fast-crud/fast-crud/src/components/container/fs-container.vue", "../../@fast-crud/fast-crud/src/components/container/fs-container.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-default.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-default.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-card.vue", "../../@fast-crud/fast-crud/src/components/container/fs-layout-card.vue", "../../@fast-crud/src/components/basic/fs-button.tsx", "../../@fast-crud/src/components/basic/fs-icon.tsx", "../../@fast-crud/fast-crud/src/components/basic/fs-iconify.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-iconify.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-icon-svg.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-icon-svg.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-label.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-label.vue", "../../@fast-crud/src/components/basic/fs-loading.tsx", "../../@fast-crud/fast-crud/src/components/basic/fs-box.vue", "../../@fast-crud/fast-crud/src/components/basic/fs-box.vue", "../../@fast-crud/src/components/render/fs-component-render.tsx", "../../@fast-crud/src/components/render/fs-slot-render.tsx", "../../@fast-crud/src/components/render/fs-render.tsx", "../../@fast-crud/fast-crud/src/components/crud/fs-form.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-item.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-item.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-helper.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-form-helper.vue", "../../@fast-crud/src/components/crud/fs-form-wrapper.tsx", "../../@fast-crud/fast-crud/src/components/crud/fs-form-provider.vue", "../../@fast-crud/fast-crud/src/components/fs-crud.vue", "../../@fast-crud/fast-crud/src/components/fs-crud.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-row-handle.vue", "../../@fast-crud/fast-crud/src/components/crud/fs-row-handle.vue", "../../node_modules/.pnpm/async-validator@4.2.5/node_modules/async-validator/dist-web/index.js", "../../@fast-crud/src/components/crud/editable/validator.ts", "../../@fast-crud/src/components/crud/editable/use-editable.ts", "../../@fast-crud/src/components/crud/use/provider.ts", "../../@fast-crud/src/components/crud/fs-table.tsx", "../../@fast-crud/src/components/crud/fs-cell.tsx", "../../@fast-crud/src/components/crud/editable/fs-editable-cell.tsx", "../../@fast-crud/fast-crud/src/components/crud/editable/fs-editable.vue", "../../@fast-crud/fast-crud/src/components/actionbar/index.vue", "../../@fast-crud/fast-crud/src/components/actionbar/index.vue", "../../@fast-crud/src/d/expose.ts", "../../@fast-crud/src/d/columns-filter.ts", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/index.vue", "../../node_modules/.pnpm/sortablejs@1.14.0/node_modules/sortablejs/modular/sortable.esm.js", "../../node_modules/.pnpm/vuedraggable-es@4.1.1_vue@3.4.27/node_modules/vuedraggable-es/dist/index.es.js", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/fs-table-columns-fixed-controller/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/fs-table-columns-fixed-controller/index.vue", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/fs-columns-filter-nest-list.vue", "../../@fast-crud/fast-crud/src/components/toolbar/fs-table-columns-filter/fs-columns-filter-layout-default.vue", "../../@fast-crud/fast-crud/src/components/search/buttons.vue", "../../@fast-crud/fast-crud/src/components/search/buttons.vue", "../../@fast-crud/fast-crud/src/components/search/index.vue", "../../@fast-crud/fast-crud/src/components/search/index.vue", "../../@fast-crud/fast-crud/src/components/search/search_v1.vue", "../../@fast-crud/fast-crud/src/components/search/search_v1.vue", "../../@fast-crud/fast-crud/src/components/search/layout-default.vue", "../../@fast-crud/fast-crud/src/components/search/layout-default.vue", "../../@fast-crud/fast-crud/src/components/search/tabs-filter.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-radio.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-radio.vue", "../../@fast-crud/src/components/extends/fs-dict-select.tsx", "../../@fast-crud/fast-crud/src/components/extends/fs-values-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-values-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-cascader-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-cascader-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-cascader.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-cascader.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-checkbox.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-checkbox.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-switch.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-date-format.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-tree.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-dict-tree.vue", "../../@fast-crud/fast-crud/src/components/extends/fs-table-select.vue", "../../@fast-crud/src/index.ts"],
  "sourcesContent": ["import { h, defineComponent } from 'vue';\n\nconst matchIconName = /^[a-z0-9]+(-[a-z0-9]+)*$/;\nconst stringToIcon = (value, validate, allowSimpleName, provider = \"\") => {\n  const colonSeparated = value.split(\":\");\n  if (value.slice(0, 1) === \"@\") {\n    if (colonSeparated.length < 2 || colonSeparated.length > 3) {\n      return null;\n    }\n    provider = colonSeparated.shift().slice(1);\n  }\n  if (colonSeparated.length > 3 || !colonSeparated.length) {\n    return null;\n  }\n  if (colonSeparated.length > 1) {\n    const name2 = colonSeparated.pop();\n    const prefix = colonSeparated.pop();\n    const result = {\n      // Allow provider without '@': \"provider:prefix:name\"\n      provider: colonSeparated.length > 0 ? colonSeparated[0] : provider,\n      prefix,\n      name: name2\n    };\n    return validate && !validateIconName(result) ? null : result;\n  }\n  const name = colonSeparated[0];\n  const dashSeparated = name.split(\"-\");\n  if (dashSeparated.length > 1) {\n    const result = {\n      provider,\n      prefix: dashSeparated.shift(),\n      name: dashSeparated.join(\"-\")\n    };\n    return validate && !validateIconName(result) ? null : result;\n  }\n  if (allowSimpleName && provider === \"\") {\n    const result = {\n      provider,\n      prefix: \"\",\n      name\n    };\n    return validate && !validateIconName(result, allowSimpleName) ? null : result;\n  }\n  return null;\n};\nconst validateIconName = (icon, allowSimpleName) => {\n  if (!icon) {\n    return false;\n  }\n  return !!((icon.provider === \"\" || icon.provider.match(matchIconName)) && (allowSimpleName && icon.prefix === \"\" || icon.prefix.match(matchIconName)) && icon.name.match(matchIconName));\n};\n\nconst defaultIconDimensions = Object.freeze(\n  {\n    left: 0,\n    top: 0,\n    width: 16,\n    height: 16\n  }\n);\nconst defaultIconTransformations = Object.freeze({\n  rotate: 0,\n  vFlip: false,\n  hFlip: false\n});\nconst defaultIconProps = Object.freeze({\n  ...defaultIconDimensions,\n  ...defaultIconTransformations\n});\nconst defaultExtendedIconProps = Object.freeze({\n  ...defaultIconProps,\n  body: \"\",\n  hidden: false\n});\n\nfunction mergeIconTransformations(obj1, obj2) {\n  const result = {};\n  if (!obj1.hFlip !== !obj2.hFlip) {\n    result.hFlip = true;\n  }\n  if (!obj1.vFlip !== !obj2.vFlip) {\n    result.vFlip = true;\n  }\n  const rotate = ((obj1.rotate || 0) + (obj2.rotate || 0)) % 4;\n  if (rotate) {\n    result.rotate = rotate;\n  }\n  return result;\n}\n\nfunction mergeIconData(parent, child) {\n  const result = mergeIconTransformations(parent, child);\n  for (const key in defaultExtendedIconProps) {\n    if (key in defaultIconTransformations) {\n      if (key in parent && !(key in result)) {\n        result[key] = defaultIconTransformations[key];\n      }\n    } else if (key in child) {\n      result[key] = child[key];\n    } else if (key in parent) {\n      result[key] = parent[key];\n    }\n  }\n  return result;\n}\n\nfunction getIconsTree(data, names) {\n  const icons = data.icons;\n  const aliases = data.aliases || /* @__PURE__ */ Object.create(null);\n  const resolved = /* @__PURE__ */ Object.create(null);\n  function resolve(name) {\n    if (icons[name]) {\n      return resolved[name] = [];\n    }\n    if (!(name in resolved)) {\n      resolved[name] = null;\n      const parent = aliases[name] && aliases[name].parent;\n      const value = parent && resolve(parent);\n      if (value) {\n        resolved[name] = [parent].concat(value);\n      }\n    }\n    return resolved[name];\n  }\n  (names || Object.keys(icons).concat(Object.keys(aliases))).forEach(resolve);\n  return resolved;\n}\n\nfunction internalGetIconData(data, name, tree) {\n  const icons = data.icons;\n  const aliases = data.aliases || /* @__PURE__ */ Object.create(null);\n  let currentProps = {};\n  function parse(name2) {\n    currentProps = mergeIconData(\n      icons[name2] || aliases[name2],\n      currentProps\n    );\n  }\n  parse(name);\n  tree.forEach(parse);\n  return mergeIconData(data, currentProps);\n}\n\nfunction parseIconSet(data, callback) {\n  const names = [];\n  if (typeof data !== \"object\" || typeof data.icons !== \"object\") {\n    return names;\n  }\n  if (data.not_found instanceof Array) {\n    data.not_found.forEach((name) => {\n      callback(name, null);\n      names.push(name);\n    });\n  }\n  const tree = getIconsTree(data);\n  for (const name in tree) {\n    const item = tree[name];\n    if (item) {\n      callback(name, internalGetIconData(data, name, item));\n      names.push(name);\n    }\n  }\n  return names;\n}\n\nconst optionalPropertyDefaults = {\n  provider: \"\",\n  aliases: {},\n  not_found: {},\n  ...defaultIconDimensions\n};\nfunction checkOptionalProps(item, defaults) {\n  for (const prop in defaults) {\n    if (prop in item && typeof item[prop] !== typeof defaults[prop]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction quicklyValidateIconSet(obj) {\n  if (typeof obj !== \"object\" || obj === null) {\n    return null;\n  }\n  const data = obj;\n  if (typeof data.prefix !== \"string\" || !obj.icons || typeof obj.icons !== \"object\") {\n    return null;\n  }\n  if (!checkOptionalProps(obj, optionalPropertyDefaults)) {\n    return null;\n  }\n  const icons = data.icons;\n  for (const name in icons) {\n    const icon = icons[name];\n    if (!name.match(matchIconName) || typeof icon.body !== \"string\" || !checkOptionalProps(\n      icon,\n      defaultExtendedIconProps\n    )) {\n      return null;\n    }\n  }\n  const aliases = data.aliases || /* @__PURE__ */ Object.create(null);\n  for (const name in aliases) {\n    const icon = aliases[name];\n    const parent = icon.parent;\n    if (!name.match(matchIconName) || typeof parent !== \"string\" || !icons[parent] && !aliases[parent] || !checkOptionalProps(\n      icon,\n      defaultExtendedIconProps\n    )) {\n      return null;\n    }\n  }\n  return data;\n}\n\nconst dataStorage = /* @__PURE__ */ Object.create(null);\nfunction newStorage(provider, prefix) {\n  return {\n    provider,\n    prefix,\n    icons: /* @__PURE__ */ Object.create(null),\n    missing: /* @__PURE__ */ new Set()\n  };\n}\nfunction getStorage(provider, prefix) {\n  const providerStorage = dataStorage[provider] || (dataStorage[provider] = /* @__PURE__ */ Object.create(null));\n  return providerStorage[prefix] || (providerStorage[prefix] = newStorage(provider, prefix));\n}\nfunction addIconSet(storage, data) {\n  if (!quicklyValidateIconSet(data)) {\n    return [];\n  }\n  return parseIconSet(data, (name, icon) => {\n    if (icon) {\n      storage.icons[name] = icon;\n    } else {\n      storage.missing.add(name);\n    }\n  });\n}\nfunction addIconToStorage(storage, name, icon) {\n  try {\n    if (typeof icon.body === \"string\") {\n      storage.icons[name] = { ...icon };\n      return true;\n    }\n  } catch (err) {\n  }\n  return false;\n}\nfunction listIcons(provider, prefix) {\n  let allIcons = [];\n  const providers = typeof provider === \"string\" ? [provider] : Object.keys(dataStorage);\n  providers.forEach((provider2) => {\n    const prefixes = typeof provider2 === \"string\" && typeof prefix === \"string\" ? [prefix] : Object.keys(dataStorage[provider2] || {});\n    prefixes.forEach((prefix2) => {\n      const storage = getStorage(provider2, prefix2);\n      allIcons = allIcons.concat(\n        Object.keys(storage.icons).map(\n          (name) => (provider2 !== \"\" ? \"@\" + provider2 + \":\" : \"\") + prefix2 + \":\" + name\n        )\n      );\n    });\n  });\n  return allIcons;\n}\n\nlet simpleNames = false;\nfunction allowSimpleNames(allow) {\n  if (typeof allow === \"boolean\") {\n    simpleNames = allow;\n  }\n  return simpleNames;\n}\nfunction getIconData(name) {\n  const icon = typeof name === \"string\" ? stringToIcon(name, true, simpleNames) : name;\n  if (icon) {\n    const storage = getStorage(icon.provider, icon.prefix);\n    const iconName = icon.name;\n    return storage.icons[iconName] || (storage.missing.has(iconName) ? null : void 0);\n  }\n}\nfunction addIcon(name, data) {\n  const icon = stringToIcon(name, true, simpleNames);\n  if (!icon) {\n    return false;\n  }\n  const storage = getStorage(icon.provider, icon.prefix);\n  return addIconToStorage(storage, icon.name, data);\n}\nfunction addCollection(data, provider) {\n  if (typeof data !== \"object\") {\n    return false;\n  }\n  if (typeof provider !== \"string\") {\n    provider = data.provider || \"\";\n  }\n  if (simpleNames && !provider && !data.prefix) {\n    let added = false;\n    if (quicklyValidateIconSet(data)) {\n      data.prefix = \"\";\n      parseIconSet(data, (name, icon) => {\n        if (icon && addIcon(name, icon)) {\n          added = true;\n        }\n      });\n    }\n    return added;\n  }\n  const prefix = data.prefix;\n  if (!validateIconName({\n    provider,\n    prefix,\n    name: \"a\"\n  })) {\n    return false;\n  }\n  const storage = getStorage(provider, prefix);\n  return !!addIconSet(storage, data);\n}\nfunction iconLoaded(name) {\n  return !!getIconData(name);\n}\nfunction getIcon(name) {\n  const result = getIconData(name);\n  return result ? {\n    ...defaultIconProps,\n    ...result\n  } : null;\n}\n\nconst defaultIconSizeCustomisations = Object.freeze({\n  width: null,\n  height: null\n});\nconst defaultIconCustomisations = Object.freeze({\n  // Dimensions\n  ...defaultIconSizeCustomisations,\n  // Transformations\n  ...defaultIconTransformations\n});\n\nconst unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;\nconst unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;\nfunction calculateSize(size, ratio, precision) {\n  if (ratio === 1) {\n    return size;\n  }\n  precision = precision || 100;\n  if (typeof size === \"number\") {\n    return Math.ceil(size * ratio * precision) / precision;\n  }\n  if (typeof size !== \"string\") {\n    return size;\n  }\n  const oldParts = size.split(unitsSplit);\n  if (oldParts === null || !oldParts.length) {\n    return size;\n  }\n  const newParts = [];\n  let code = oldParts.shift();\n  let isNumber = unitsTest.test(code);\n  while (true) {\n    if (isNumber) {\n      const num = parseFloat(code);\n      if (isNaN(num)) {\n        newParts.push(code);\n      } else {\n        newParts.push(Math.ceil(num * ratio * precision) / precision);\n      }\n    } else {\n      newParts.push(code);\n    }\n    code = oldParts.shift();\n    if (code === void 0) {\n      return newParts.join(\"\");\n    }\n    isNumber = !isNumber;\n  }\n}\n\nfunction splitSVGDefs(content, tag = \"defs\") {\n  let defs = \"\";\n  const index = content.indexOf(\"<\" + tag);\n  while (index >= 0) {\n    const start = content.indexOf(\">\", index);\n    const end = content.indexOf(\"</\" + tag);\n    if (start === -1 || end === -1) {\n      break;\n    }\n    const endEnd = content.indexOf(\">\", end);\n    if (endEnd === -1) {\n      break;\n    }\n    defs += content.slice(start + 1, end).trim();\n    content = content.slice(0, index).trim() + content.slice(endEnd + 1);\n  }\n  return {\n    defs,\n    content\n  };\n}\nfunction mergeDefsAndContent(defs, content) {\n  return defs ? \"<defs>\" + defs + \"</defs>\" + content : content;\n}\nfunction wrapSVGContent(body, start, end) {\n  const split = splitSVGDefs(body);\n  return mergeDefsAndContent(split.defs, start + split.content + end);\n}\n\nconst isUnsetKeyword = (value) => value === \"unset\" || value === \"undefined\" || value === \"none\";\nfunction iconToSVG(icon, customisations) {\n  const fullIcon = {\n    ...defaultIconProps,\n    ...icon\n  };\n  const fullCustomisations = {\n    ...defaultIconCustomisations,\n    ...customisations\n  };\n  const box = {\n    left: fullIcon.left,\n    top: fullIcon.top,\n    width: fullIcon.width,\n    height: fullIcon.height\n  };\n  let body = fullIcon.body;\n  [fullIcon, fullCustomisations].forEach((props) => {\n    const transformations = [];\n    const hFlip = props.hFlip;\n    const vFlip = props.vFlip;\n    let rotation = props.rotate;\n    if (hFlip) {\n      if (vFlip) {\n        rotation += 2;\n      } else {\n        transformations.push(\n          \"translate(\" + (box.width + box.left).toString() + \" \" + (0 - box.top).toString() + \")\"\n        );\n        transformations.push(\"scale(-1 1)\");\n        box.top = box.left = 0;\n      }\n    } else if (vFlip) {\n      transformations.push(\n        \"translate(\" + (0 - box.left).toString() + \" \" + (box.height + box.top).toString() + \")\"\n      );\n      transformations.push(\"scale(1 -1)\");\n      box.top = box.left = 0;\n    }\n    let tempValue;\n    if (rotation < 0) {\n      rotation -= Math.floor(rotation / 4) * 4;\n    }\n    rotation = rotation % 4;\n    switch (rotation) {\n      case 1:\n        tempValue = box.height / 2 + box.top;\n        transformations.unshift(\n          \"rotate(90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\"\n        );\n        break;\n      case 2:\n        transformations.unshift(\n          \"rotate(180 \" + (box.width / 2 + box.left).toString() + \" \" + (box.height / 2 + box.top).toString() + \")\"\n        );\n        break;\n      case 3:\n        tempValue = box.width / 2 + box.left;\n        transformations.unshift(\n          \"rotate(-90 \" + tempValue.toString() + \" \" + tempValue.toString() + \")\"\n        );\n        break;\n    }\n    if (rotation % 2 === 1) {\n      if (box.left !== box.top) {\n        tempValue = box.left;\n        box.left = box.top;\n        box.top = tempValue;\n      }\n      if (box.width !== box.height) {\n        tempValue = box.width;\n        box.width = box.height;\n        box.height = tempValue;\n      }\n    }\n    if (transformations.length) {\n      body = wrapSVGContent(\n        body,\n        '<g transform=\"' + transformations.join(\" \") + '\">',\n        \"</g>\"\n      );\n    }\n  });\n  const customisationsWidth = fullCustomisations.width;\n  const customisationsHeight = fullCustomisations.height;\n  const boxWidth = box.width;\n  const boxHeight = box.height;\n  let width;\n  let height;\n  if (customisationsWidth === null) {\n    height = customisationsHeight === null ? \"1em\" : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n    width = calculateSize(height, boxWidth / boxHeight);\n  } else {\n    width = customisationsWidth === \"auto\" ? boxWidth : customisationsWidth;\n    height = customisationsHeight === null ? calculateSize(width, boxHeight / boxWidth) : customisationsHeight === \"auto\" ? boxHeight : customisationsHeight;\n  }\n  const attributes = {};\n  const setAttr = (prop, value) => {\n    if (!isUnsetKeyword(value)) {\n      attributes[prop] = value.toString();\n    }\n  };\n  setAttr(\"width\", width);\n  setAttr(\"height\", height);\n  const viewBox = [box.left, box.top, boxWidth, boxHeight];\n  attributes.viewBox = viewBox.join(\" \");\n  return {\n    attributes,\n    viewBox,\n    body\n  };\n}\n\nconst regex = /\\sid=\"(\\S+)\"/g;\nconst randomPrefix = \"IconifyId\" + Date.now().toString(16) + (Math.random() * 16777216 | 0).toString(16);\nlet counter = 0;\nfunction replaceIDs(body, prefix = randomPrefix) {\n  const ids = [];\n  let match;\n  while (match = regex.exec(body)) {\n    ids.push(match[1]);\n  }\n  if (!ids.length) {\n    return body;\n  }\n  const suffix = \"suffix\" + (Math.random() * 16777216 | Date.now()).toString(16);\n  ids.forEach((id) => {\n    const newID = typeof prefix === \"function\" ? prefix(id) : prefix + (counter++).toString();\n    const escapedID = id.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n    body = body.replace(\n      // Allowed characters before id: [#;\"]\n      // Allowed characters after id: [)\"], .[a-z]\n      new RegExp('([#;\"])(' + escapedID + ')([\")]|\\\\.[a-z])', \"g\"),\n      \"$1\" + newID + suffix + \"$3\"\n    );\n  });\n  body = body.replace(new RegExp(suffix, \"g\"), \"\");\n  return body;\n}\n\nconst storage = /* @__PURE__ */ Object.create(null);\nfunction setAPIModule(provider, item) {\n  storage[provider] = item;\n}\nfunction getAPIModule(provider) {\n  return storage[provider] || storage[\"\"];\n}\n\nfunction createAPIConfig(source) {\n  let resources;\n  if (typeof source.resources === \"string\") {\n    resources = [source.resources];\n  } else {\n    resources = source.resources;\n    if (!(resources instanceof Array) || !resources.length) {\n      return null;\n    }\n  }\n  const result = {\n    // API hosts\n    resources,\n    // Root path\n    path: source.path || \"/\",\n    // URL length limit\n    maxURL: source.maxURL || 500,\n    // Timeout before next host is used.\n    rotate: source.rotate || 750,\n    // Timeout before failing query.\n    timeout: source.timeout || 5e3,\n    // Randomise default API end point.\n    random: source.random === true,\n    // Start index\n    index: source.index || 0,\n    // Receive data after time out (used if time out kicks in first, then API module sends data anyway).\n    dataAfterTimeout: source.dataAfterTimeout !== false\n  };\n  return result;\n}\nconst configStorage = /* @__PURE__ */ Object.create(null);\nconst fallBackAPISources = [\n  \"https://api.simplesvg.com\",\n  \"https://api.unisvg.com\"\n];\nconst fallBackAPI = [];\nwhile (fallBackAPISources.length > 0) {\n  if (fallBackAPISources.length === 1) {\n    fallBackAPI.push(fallBackAPISources.shift());\n  } else {\n    if (Math.random() > 0.5) {\n      fallBackAPI.push(fallBackAPISources.shift());\n    } else {\n      fallBackAPI.push(fallBackAPISources.pop());\n    }\n  }\n}\nconfigStorage[\"\"] = createAPIConfig({\n  resources: [\"https://api.iconify.design\"].concat(fallBackAPI)\n});\nfunction addAPIProvider(provider, customConfig) {\n  const config = createAPIConfig(customConfig);\n  if (config === null) {\n    return false;\n  }\n  configStorage[provider] = config;\n  return true;\n}\nfunction getAPIConfig(provider) {\n  return configStorage[provider];\n}\nfunction listAPIProviders() {\n  return Object.keys(configStorage);\n}\n\nconst detectFetch = () => {\n  let callback;\n  try {\n    callback = fetch;\n    if (typeof callback === \"function\") {\n      return callback;\n    }\n  } catch (err) {\n  }\n};\nlet fetchModule = detectFetch();\nfunction setFetch(fetch2) {\n  fetchModule = fetch2;\n}\nfunction getFetch() {\n  return fetchModule;\n}\nfunction calculateMaxLength(provider, prefix) {\n  const config = getAPIConfig(provider);\n  if (!config) {\n    return 0;\n  }\n  let result;\n  if (!config.maxURL) {\n    result = 0;\n  } else {\n    let maxHostLength = 0;\n    config.resources.forEach((item) => {\n      const host = item;\n      maxHostLength = Math.max(maxHostLength, host.length);\n    });\n    const url = prefix + \".json?icons=\";\n    result = config.maxURL - maxHostLength - config.path.length - url.length;\n  }\n  return result;\n}\nfunction shouldAbort(status) {\n  return status === 404;\n}\nconst prepare = (provider, prefix, icons) => {\n  const results = [];\n  const maxLength = calculateMaxLength(provider, prefix);\n  const type = \"icons\";\n  let item = {\n    type,\n    provider,\n    prefix,\n    icons: []\n  };\n  let length = 0;\n  icons.forEach((name, index) => {\n    length += name.length + 1;\n    if (length >= maxLength && index > 0) {\n      results.push(item);\n      item = {\n        type,\n        provider,\n        prefix,\n        icons: []\n      };\n      length = name.length;\n    }\n    item.icons.push(name);\n  });\n  results.push(item);\n  return results;\n};\nfunction getPath(provider) {\n  if (typeof provider === \"string\") {\n    const config = getAPIConfig(provider);\n    if (config) {\n      return config.path;\n    }\n  }\n  return \"/\";\n}\nconst send = (host, params, callback) => {\n  if (!fetchModule) {\n    callback(\"abort\", 424);\n    return;\n  }\n  let path = getPath(params.provider);\n  switch (params.type) {\n    case \"icons\": {\n      const prefix = params.prefix;\n      const icons = params.icons;\n      const iconsList = icons.join(\",\");\n      const urlParams = new URLSearchParams({\n        icons: iconsList\n      });\n      path += prefix + \".json?\" + urlParams.toString();\n      break;\n    }\n    case \"custom\": {\n      const uri = params.uri;\n      path += uri.slice(0, 1) === \"/\" ? uri.slice(1) : uri;\n      break;\n    }\n    default:\n      callback(\"abort\", 400);\n      return;\n  }\n  let defaultError = 503;\n  fetchModule(host + path).then((response) => {\n    const status = response.status;\n    if (status !== 200) {\n      setTimeout(() => {\n        callback(shouldAbort(status) ? \"abort\" : \"next\", status);\n      });\n      return;\n    }\n    defaultError = 501;\n    return response.json();\n  }).then((data) => {\n    if (typeof data !== \"object\" || data === null) {\n      setTimeout(() => {\n        if (data === 404) {\n          callback(\"abort\", data);\n        } else {\n          callback(\"next\", defaultError);\n        }\n      });\n      return;\n    }\n    setTimeout(() => {\n      callback(\"success\", data);\n    });\n  }).catch(() => {\n    callback(\"next\", defaultError);\n  });\n};\nconst fetchAPIModule = {\n  prepare,\n  send\n};\n\nfunction sortIcons(icons) {\n  const result = {\n    loaded: [],\n    missing: [],\n    pending: []\n  };\n  const storage = /* @__PURE__ */ Object.create(null);\n  icons.sort((a, b) => {\n    if (a.provider !== b.provider) {\n      return a.provider.localeCompare(b.provider);\n    }\n    if (a.prefix !== b.prefix) {\n      return a.prefix.localeCompare(b.prefix);\n    }\n    return a.name.localeCompare(b.name);\n  });\n  let lastIcon = {\n    provider: \"\",\n    prefix: \"\",\n    name: \"\"\n  };\n  icons.forEach((icon) => {\n    if (lastIcon.name === icon.name && lastIcon.prefix === icon.prefix && lastIcon.provider === icon.provider) {\n      return;\n    }\n    lastIcon = icon;\n    const provider = icon.provider;\n    const prefix = icon.prefix;\n    const name = icon.name;\n    const providerStorage = storage[provider] || (storage[provider] = /* @__PURE__ */ Object.create(null));\n    const localStorage = providerStorage[prefix] || (providerStorage[prefix] = getStorage(provider, prefix));\n    let list;\n    if (name in localStorage.icons) {\n      list = result.loaded;\n    } else if (prefix === \"\" || localStorage.missing.has(name)) {\n      list = result.missing;\n    } else {\n      list = result.pending;\n    }\n    const item = {\n      provider,\n      prefix,\n      name\n    };\n    list.push(item);\n  });\n  return result;\n}\n\nfunction removeCallback(storages, id) {\n  storages.forEach((storage) => {\n    const items = storage.loaderCallbacks;\n    if (items) {\n      storage.loaderCallbacks = items.filter((row) => row.id !== id);\n    }\n  });\n}\nfunction updateCallbacks(storage) {\n  if (!storage.pendingCallbacksFlag) {\n    storage.pendingCallbacksFlag = true;\n    setTimeout(() => {\n      storage.pendingCallbacksFlag = false;\n      const items = storage.loaderCallbacks ? storage.loaderCallbacks.slice(0) : [];\n      if (!items.length) {\n        return;\n      }\n      let hasPending = false;\n      const provider = storage.provider;\n      const prefix = storage.prefix;\n      items.forEach((item) => {\n        const icons = item.icons;\n        const oldLength = icons.pending.length;\n        icons.pending = icons.pending.filter((icon) => {\n          if (icon.prefix !== prefix) {\n            return true;\n          }\n          const name = icon.name;\n          if (storage.icons[name]) {\n            icons.loaded.push({\n              provider,\n              prefix,\n              name\n            });\n          } else if (storage.missing.has(name)) {\n            icons.missing.push({\n              provider,\n              prefix,\n              name\n            });\n          } else {\n            hasPending = true;\n            return true;\n          }\n          return false;\n        });\n        if (icons.pending.length !== oldLength) {\n          if (!hasPending) {\n            removeCallback([storage], item.id);\n          }\n          item.callback(\n            icons.loaded.slice(0),\n            icons.missing.slice(0),\n            icons.pending.slice(0),\n            item.abort\n          );\n        }\n      });\n    });\n  }\n}\nlet idCounter = 0;\nfunction storeCallback(callback, icons, pendingSources) {\n  const id = idCounter++;\n  const abort = removeCallback.bind(null, pendingSources, id);\n  if (!icons.pending.length) {\n    return abort;\n  }\n  const item = {\n    id,\n    icons,\n    callback,\n    abort\n  };\n  pendingSources.forEach((storage) => {\n    (storage.loaderCallbacks || (storage.loaderCallbacks = [])).push(item);\n  });\n  return abort;\n}\n\nfunction listToIcons(list, validate = true, simpleNames = false) {\n  const result = [];\n  list.forEach((item) => {\n    const icon = typeof item === \"string\" ? stringToIcon(item, validate, simpleNames) : item;\n    if (icon) {\n      result.push(icon);\n    }\n  });\n  return result;\n}\n\n// src/config.ts\nvar defaultConfig = {\n  resources: [],\n  index: 0,\n  timeout: 2e3,\n  rotate: 750,\n  random: false,\n  dataAfterTimeout: false\n};\n\n// src/query.ts\nfunction sendQuery(config, payload, query, done) {\n  const resourcesCount = config.resources.length;\n  const startIndex = config.random ? Math.floor(Math.random() * resourcesCount) : config.index;\n  let resources;\n  if (config.random) {\n    let list = config.resources.slice(0);\n    resources = [];\n    while (list.length > 1) {\n      const nextIndex = Math.floor(Math.random() * list.length);\n      resources.push(list[nextIndex]);\n      list = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));\n    }\n    resources = resources.concat(list);\n  } else {\n    resources = config.resources.slice(startIndex).concat(config.resources.slice(0, startIndex));\n  }\n  const startTime = Date.now();\n  let status = \"pending\";\n  let queriesSent = 0;\n  let lastError;\n  let timer = null;\n  let queue = [];\n  let doneCallbacks = [];\n  if (typeof done === \"function\") {\n    doneCallbacks.push(done);\n  }\n  function resetTimer() {\n    if (timer) {\n      clearTimeout(timer);\n      timer = null;\n    }\n  }\n  function abort() {\n    if (status === \"pending\") {\n      status = \"aborted\";\n    }\n    resetTimer();\n    queue.forEach((item) => {\n      if (item.status === \"pending\") {\n        item.status = \"aborted\";\n      }\n    });\n    queue = [];\n  }\n  function subscribe(callback, overwrite) {\n    if (overwrite) {\n      doneCallbacks = [];\n    }\n    if (typeof callback === \"function\") {\n      doneCallbacks.push(callback);\n    }\n  }\n  function getQueryStatus() {\n    return {\n      startTime,\n      payload,\n      status,\n      queriesSent,\n      queriesPending: queue.length,\n      subscribe,\n      abort\n    };\n  }\n  function failQuery() {\n    status = \"failed\";\n    doneCallbacks.forEach((callback) => {\n      callback(void 0, lastError);\n    });\n  }\n  function clearQueue() {\n    queue.forEach((item) => {\n      if (item.status === \"pending\") {\n        item.status = \"aborted\";\n      }\n    });\n    queue = [];\n  }\n  function moduleResponse(item, response, data) {\n    const isError = response !== \"success\";\n    queue = queue.filter((queued) => queued !== item);\n    switch (status) {\n      case \"pending\":\n        break;\n      case \"failed\":\n        if (isError || !config.dataAfterTimeout) {\n          return;\n        }\n        break;\n      default:\n        return;\n    }\n    if (response === \"abort\") {\n      lastError = data;\n      failQuery();\n      return;\n    }\n    if (isError) {\n      lastError = data;\n      if (!queue.length) {\n        if (!resources.length) {\n          failQuery();\n        } else {\n          execNext();\n        }\n      }\n      return;\n    }\n    resetTimer();\n    clearQueue();\n    if (!config.random) {\n      const index = config.resources.indexOf(item.resource);\n      if (index !== -1 && index !== config.index) {\n        config.index = index;\n      }\n    }\n    status = \"completed\";\n    doneCallbacks.forEach((callback) => {\n      callback(data);\n    });\n  }\n  function execNext() {\n    if (status !== \"pending\") {\n      return;\n    }\n    resetTimer();\n    const resource = resources.shift();\n    if (resource === void 0) {\n      if (queue.length) {\n        timer = setTimeout(() => {\n          resetTimer();\n          if (status === \"pending\") {\n            clearQueue();\n            failQuery();\n          }\n        }, config.timeout);\n        return;\n      }\n      failQuery();\n      return;\n    }\n    const item = {\n      status: \"pending\",\n      resource,\n      callback: (status2, data) => {\n        moduleResponse(item, status2, data);\n      }\n    };\n    queue.push(item);\n    queriesSent++;\n    timer = setTimeout(execNext, config.rotate);\n    query(resource, payload, item.callback);\n  }\n  setTimeout(execNext);\n  return getQueryStatus;\n}\n\n// src/index.ts\nfunction initRedundancy(cfg) {\n  const config = {\n    ...defaultConfig,\n    ...cfg\n  };\n  let queries = [];\n  function cleanup() {\n    queries = queries.filter((item) => item().status === \"pending\");\n  }\n  function query(payload, queryCallback, doneCallback) {\n    const query2 = sendQuery(\n      config,\n      payload,\n      queryCallback,\n      (data, error) => {\n        cleanup();\n        if (doneCallback) {\n          doneCallback(data, error);\n        }\n      }\n    );\n    queries.push(query2);\n    return query2;\n  }\n  function find(callback) {\n    return queries.find((value) => {\n      return callback(value);\n    }) || null;\n  }\n  const instance = {\n    query,\n    find,\n    setIndex: (index) => {\n      config.index = index;\n    },\n    getIndex: () => config.index,\n    cleanup\n  };\n  return instance;\n}\n\nfunction emptyCallback$1() {\n}\nconst redundancyCache = /* @__PURE__ */ Object.create(null);\nfunction getRedundancyCache(provider) {\n  if (!redundancyCache[provider]) {\n    const config = getAPIConfig(provider);\n    if (!config) {\n      return;\n    }\n    const redundancy = initRedundancy(config);\n    const cachedReundancy = {\n      config,\n      redundancy\n    };\n    redundancyCache[provider] = cachedReundancy;\n  }\n  return redundancyCache[provider];\n}\nfunction sendAPIQuery(target, query, callback) {\n  let redundancy;\n  let send;\n  if (typeof target === \"string\") {\n    const api = getAPIModule(target);\n    if (!api) {\n      callback(void 0, 424);\n      return emptyCallback$1;\n    }\n    send = api.send;\n    const cached = getRedundancyCache(target);\n    if (cached) {\n      redundancy = cached.redundancy;\n    }\n  } else {\n    const config = createAPIConfig(target);\n    if (config) {\n      redundancy = initRedundancy(config);\n      const moduleKey = target.resources ? target.resources[0] : \"\";\n      const api = getAPIModule(moduleKey);\n      if (api) {\n        send = api.send;\n      }\n    }\n  }\n  if (!redundancy || !send) {\n    callback(void 0, 424);\n    return emptyCallback$1;\n  }\n  return redundancy.query(query, send, callback)().abort;\n}\n\nconst browserCacheVersion = \"iconify2\";\nconst browserCachePrefix = \"iconify\";\nconst browserCacheCountKey = browserCachePrefix + \"-count\";\nconst browserCacheVersionKey = browserCachePrefix + \"-version\";\nconst browserStorageHour = 36e5;\nconst browserStorageCacheExpiration = 168;\nconst browserStorageLimit = 50;\n\nfunction getStoredItem(func, key) {\n  try {\n    return func.getItem(key);\n  } catch (err) {\n  }\n}\nfunction setStoredItem(func, key, value) {\n  try {\n    func.setItem(key, value);\n    return true;\n  } catch (err) {\n  }\n}\nfunction removeStoredItem(func, key) {\n  try {\n    func.removeItem(key);\n  } catch (err) {\n  }\n}\n\nfunction setBrowserStorageItemsCount(storage, value) {\n  return setStoredItem(storage, browserCacheCountKey, value.toString());\n}\nfunction getBrowserStorageItemsCount(storage) {\n  return parseInt(getStoredItem(storage, browserCacheCountKey)) || 0;\n}\n\nconst browserStorageConfig = {\n  local: true,\n  session: true\n};\nconst browserStorageEmptyItems = {\n  local: /* @__PURE__ */ new Set(),\n  session: /* @__PURE__ */ new Set()\n};\nlet browserStorageStatus = false;\nfunction setBrowserStorageStatus(status) {\n  browserStorageStatus = status;\n}\n\nlet _window = typeof window === \"undefined\" ? {} : window;\nfunction getBrowserStorage(key) {\n  const attr = key + \"Storage\";\n  try {\n    if (_window && _window[attr] && typeof _window[attr].length === \"number\") {\n      return _window[attr];\n    }\n  } catch (err) {\n  }\n  browserStorageConfig[key] = false;\n}\n\nfunction iterateBrowserStorage(key, callback) {\n  const func = getBrowserStorage(key);\n  if (!func) {\n    return;\n  }\n  const version = getStoredItem(func, browserCacheVersionKey);\n  if (version !== browserCacheVersion) {\n    if (version) {\n      const total2 = getBrowserStorageItemsCount(func);\n      for (let i = 0; i < total2; i++) {\n        removeStoredItem(func, browserCachePrefix + i.toString());\n      }\n    }\n    setStoredItem(func, browserCacheVersionKey, browserCacheVersion);\n    setBrowserStorageItemsCount(func, 0);\n    return;\n  }\n  const minTime = Math.floor(Date.now() / browserStorageHour) - browserStorageCacheExpiration;\n  const parseItem = (index) => {\n    const name = browserCachePrefix + index.toString();\n    const item = getStoredItem(func, name);\n    if (typeof item !== \"string\") {\n      return;\n    }\n    try {\n      const data = JSON.parse(item);\n      if (typeof data === \"object\" && typeof data.cached === \"number\" && data.cached > minTime && typeof data.provider === \"string\" && typeof data.data === \"object\" && typeof data.data.prefix === \"string\" && // Valid item: run callback\n      callback(data, index)) {\n        return true;\n      }\n    } catch (err) {\n    }\n    removeStoredItem(func, name);\n  };\n  let total = getBrowserStorageItemsCount(func);\n  for (let i = total - 1; i >= 0; i--) {\n    if (!parseItem(i)) {\n      if (i === total - 1) {\n        total--;\n        setBrowserStorageItemsCount(func, total);\n      } else {\n        browserStorageEmptyItems[key].add(i);\n      }\n    }\n  }\n}\n\nfunction initBrowserStorage() {\n  if (browserStorageStatus) {\n    return;\n  }\n  setBrowserStorageStatus(true);\n  for (const key in browserStorageConfig) {\n    iterateBrowserStorage(key, (item) => {\n      const iconSet = item.data;\n      const provider = item.provider;\n      const prefix = iconSet.prefix;\n      const storage = getStorage(\n        provider,\n        prefix\n      );\n      if (!addIconSet(storage, iconSet).length) {\n        return false;\n      }\n      const lastModified = iconSet.lastModified || -1;\n      storage.lastModifiedCached = storage.lastModifiedCached ? Math.min(storage.lastModifiedCached, lastModified) : lastModified;\n      return true;\n    });\n  }\n}\n\nfunction updateLastModified(storage, lastModified) {\n  const lastValue = storage.lastModifiedCached;\n  if (\n    // Matches or newer\n    lastValue && lastValue >= lastModified\n  ) {\n    return lastValue === lastModified;\n  }\n  storage.lastModifiedCached = lastModified;\n  if (lastValue) {\n    for (const key in browserStorageConfig) {\n      iterateBrowserStorage(key, (item) => {\n        const iconSet = item.data;\n        return item.provider !== storage.provider || iconSet.prefix !== storage.prefix || iconSet.lastModified === lastModified;\n      });\n    }\n  }\n  return true;\n}\nfunction storeInBrowserStorage(storage, data) {\n  if (!browserStorageStatus) {\n    initBrowserStorage();\n  }\n  function store(key) {\n    let func;\n    if (!browserStorageConfig[key] || !(func = getBrowserStorage(key))) {\n      return;\n    }\n    const set = browserStorageEmptyItems[key];\n    let index;\n    if (set.size) {\n      set.delete(index = Array.from(set).shift());\n    } else {\n      index = getBrowserStorageItemsCount(func);\n      if (index >= browserStorageLimit || !setBrowserStorageItemsCount(func, index + 1)) {\n        return;\n      }\n    }\n    const item = {\n      cached: Math.floor(Date.now() / browserStorageHour),\n      provider: storage.provider,\n      data\n    };\n    return setStoredItem(\n      func,\n      browserCachePrefix + index.toString(),\n      JSON.stringify(item)\n    );\n  }\n  if (data.lastModified && !updateLastModified(storage, data.lastModified)) {\n    return;\n  }\n  if (!Object.keys(data.icons).length) {\n    return;\n  }\n  if (data.not_found) {\n    data = Object.assign({}, data);\n    delete data.not_found;\n  }\n  if (!store(\"local\")) {\n    store(\"session\");\n  }\n}\n\nfunction emptyCallback() {\n}\nfunction loadedNewIcons(storage) {\n  if (!storage.iconsLoaderFlag) {\n    storage.iconsLoaderFlag = true;\n    setTimeout(() => {\n      storage.iconsLoaderFlag = false;\n      updateCallbacks(storage);\n    });\n  }\n}\nfunction loadNewIcons(storage, icons) {\n  if (!storage.iconsToLoad) {\n    storage.iconsToLoad = icons;\n  } else {\n    storage.iconsToLoad = storage.iconsToLoad.concat(icons).sort();\n  }\n  if (!storage.iconsQueueFlag) {\n    storage.iconsQueueFlag = true;\n    setTimeout(() => {\n      storage.iconsQueueFlag = false;\n      const { provider, prefix } = storage;\n      const icons2 = storage.iconsToLoad;\n      delete storage.iconsToLoad;\n      let api;\n      if (!icons2 || !(api = getAPIModule(provider))) {\n        return;\n      }\n      const params = api.prepare(provider, prefix, icons2);\n      params.forEach((item) => {\n        sendAPIQuery(provider, item, (data) => {\n          if (typeof data !== \"object\") {\n            item.icons.forEach((name) => {\n              storage.missing.add(name);\n            });\n          } else {\n            try {\n              const parsed = addIconSet(\n                storage,\n                data\n              );\n              if (!parsed.length) {\n                return;\n              }\n              const pending = storage.pendingIcons;\n              if (pending) {\n                parsed.forEach((name) => {\n                  pending.delete(name);\n                });\n              }\n              storeInBrowserStorage(storage, data);\n            } catch (err) {\n              console.error(err);\n            }\n          }\n          loadedNewIcons(storage);\n        });\n      });\n    });\n  }\n}\nconst loadIcons = (icons, callback) => {\n  const cleanedIcons = listToIcons(icons, true, allowSimpleNames());\n  const sortedIcons = sortIcons(cleanedIcons);\n  if (!sortedIcons.pending.length) {\n    let callCallback = true;\n    if (callback) {\n      setTimeout(() => {\n        if (callCallback) {\n          callback(\n            sortedIcons.loaded,\n            sortedIcons.missing,\n            sortedIcons.pending,\n            emptyCallback\n          );\n        }\n      });\n    }\n    return () => {\n      callCallback = false;\n    };\n  }\n  const newIcons = /* @__PURE__ */ Object.create(null);\n  const sources = [];\n  let lastProvider, lastPrefix;\n  sortedIcons.pending.forEach((icon) => {\n    const { provider, prefix } = icon;\n    if (prefix === lastPrefix && provider === lastProvider) {\n      return;\n    }\n    lastProvider = provider;\n    lastPrefix = prefix;\n    sources.push(getStorage(provider, prefix));\n    const providerNewIcons = newIcons[provider] || (newIcons[provider] = /* @__PURE__ */ Object.create(null));\n    if (!providerNewIcons[prefix]) {\n      providerNewIcons[prefix] = [];\n    }\n  });\n  sortedIcons.pending.forEach((icon) => {\n    const { provider, prefix, name } = icon;\n    const storage = getStorage(provider, prefix);\n    const pendingQueue = storage.pendingIcons || (storage.pendingIcons = /* @__PURE__ */ new Set());\n    if (!pendingQueue.has(name)) {\n      pendingQueue.add(name);\n      newIcons[provider][prefix].push(name);\n    }\n  });\n  sources.forEach((storage) => {\n    const { provider, prefix } = storage;\n    if (newIcons[provider][prefix].length) {\n      loadNewIcons(storage, newIcons[provider][prefix]);\n    }\n  });\n  return callback ? storeCallback(callback, sortedIcons, sources) : emptyCallback;\n};\nconst loadIcon = (icon) => {\n  return new Promise((fulfill, reject) => {\n    const iconObj = typeof icon === \"string\" ? stringToIcon(icon, true) : icon;\n    if (!iconObj) {\n      reject(icon);\n      return;\n    }\n    loadIcons([iconObj || icon], (loaded) => {\n      if (loaded.length && iconObj) {\n        const data = getIconData(iconObj);\n        if (data) {\n          fulfill({\n            ...defaultIconProps,\n            ...data\n          });\n          return;\n        }\n      }\n      reject(icon);\n    });\n  });\n};\n\nfunction toggleBrowserCache(storage, value) {\n  switch (storage) {\n    case \"local\":\n    case \"session\":\n      browserStorageConfig[storage] = value;\n      break;\n    case \"all\":\n      for (const key in browserStorageConfig) {\n        browserStorageConfig[key] = value;\n      }\n      break;\n  }\n}\n\nfunction mergeCustomisations(defaults, item) {\n  const result = {\n    ...defaults\n  };\n  for (const key in item) {\n    const value = item[key];\n    const valueType = typeof value;\n    if (key in defaultIconSizeCustomisations) {\n      if (value === null || value && (valueType === \"string\" || valueType === \"number\")) {\n        result[key] = value;\n      }\n    } else if (valueType === typeof result[key]) {\n      result[key] = key === \"rotate\" ? value % 4 : value;\n    }\n  }\n  return result;\n}\n\nconst separator = /[\\s,]+/;\nfunction flipFromString(custom, flip) {\n  flip.split(separator).forEach((str) => {\n    const value = str.trim();\n    switch (value) {\n      case \"horizontal\":\n        custom.hFlip = true;\n        break;\n      case \"vertical\":\n        custom.vFlip = true;\n        break;\n    }\n  });\n}\n\nfunction rotateFromString(value, defaultValue = 0) {\n  const units = value.replace(/^-?[0-9.]*/, \"\");\n  function cleanup(value2) {\n    while (value2 < 0) {\n      value2 += 4;\n    }\n    return value2 % 4;\n  }\n  if (units === \"\") {\n    const num = parseInt(value);\n    return isNaN(num) ? 0 : cleanup(num);\n  } else if (units !== value) {\n    let split = 0;\n    switch (units) {\n      case \"%\":\n        split = 25;\n        break;\n      case \"deg\":\n        split = 90;\n    }\n    if (split) {\n      let num = parseFloat(value.slice(0, value.length - units.length));\n      if (isNaN(num)) {\n        return 0;\n      }\n      num = num / split;\n      return num % 1 === 0 ? cleanup(num) : 0;\n    }\n  }\n  return defaultValue;\n}\n\nfunction iconToHTML(body, attributes) {\n  let renderAttribsHTML = body.indexOf(\"xlink:\") === -1 ? \"\" : ' xmlns:xlink=\"http://www.w3.org/1999/xlink\"';\n  for (const attr in attributes) {\n    renderAttribsHTML += \" \" + attr + '=\"' + attributes[attr] + '\"';\n  }\n  return '<svg xmlns=\"http://www.w3.org/2000/svg\"' + renderAttribsHTML + \">\" + body + \"</svg>\";\n}\n\nfunction encodeSVGforURL(svg) {\n  return svg.replace(/\"/g, \"'\").replace(/%/g, \"%25\").replace(/#/g, \"%23\").replace(/</g, \"%3C\").replace(/>/g, \"%3E\").replace(/\\s+/g, \" \");\n}\nfunction svgToData(svg) {\n  return \"data:image/svg+xml,\" + encodeSVGforURL(svg);\n}\nfunction svgToURL(svg) {\n  return 'url(\"' + svgToData(svg) + '\")';\n}\n\nconst defaultExtendedIconCustomisations = {\n    ...defaultIconCustomisations,\n    inline: false,\n};\n\n/**\n * Default SVG attributes\n */\nconst svgDefaults = {\n    'xmlns': 'http://www.w3.org/2000/svg',\n    'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n    'aria-hidden': true,\n    'role': 'img',\n};\n/**\n * Style modes\n */\nconst commonProps = {\n    display: 'inline-block',\n};\nconst monotoneProps = {\n    backgroundColor: 'currentColor',\n};\nconst coloredProps = {\n    backgroundColor: 'transparent',\n};\n// Dynamically add common props to variables above\nconst propsToAdd = {\n    Image: 'var(--svg)',\n    Repeat: 'no-repeat',\n    Size: '100% 100%',\n};\nconst propsToAddTo = {\n    webkitMask: monotoneProps,\n    mask: monotoneProps,\n    background: coloredProps,\n};\nfor (const prefix in propsToAddTo) {\n    const list = propsToAddTo[prefix];\n    for (const prop in propsToAdd) {\n        list[prefix + prop] = propsToAdd[prop];\n    }\n}\n/**\n * Aliases for customisations.\n * In Vue 'v-' properties are reserved, so v-flip must be renamed\n */\nconst customisationAliases = {};\n['horizontal', 'vertical'].forEach((prefix) => {\n    const attr = prefix.slice(0, 1) + 'Flip';\n    // vertical-flip\n    customisationAliases[prefix + '-flip'] = attr;\n    // v-flip\n    customisationAliases[prefix.slice(0, 1) + '-flip'] = attr;\n    // verticalFlip\n    customisationAliases[prefix + 'Flip'] = attr;\n});\n/**\n * Fix size: add 'px' to numbers\n */\nfunction fixSize(value) {\n    return value + (value.match(/^[-0-9.]+$/) ? 'px' : '');\n}\n/**\n * Render icon\n */\nconst render = (\n// Icon must be validated before calling this function\nicon, \n// Partial properties\nprops) => {\n    // Split properties\n    const customisations = mergeCustomisations(defaultExtendedIconCustomisations, props);\n    const componentProps = { ...svgDefaults };\n    // Check mode\n    const mode = props.mode || 'svg';\n    // Copy style\n    const style = {};\n    const propsStyle = props.style;\n    const customStyle = typeof propsStyle === 'object' && !(propsStyle instanceof Array)\n        ? propsStyle\n        : {};\n    // Get element properties\n    for (let key in props) {\n        const value = props[key];\n        if (value === void 0) {\n            continue;\n        }\n        switch (key) {\n            // Properties to ignore\n            case 'icon':\n            case 'style':\n            case 'onLoad':\n            case 'mode':\n                break;\n            // Boolean attributes\n            case 'inline':\n            case 'hFlip':\n            case 'vFlip':\n                customisations[key] =\n                    value === true || value === 'true' || value === 1;\n                break;\n            // Flip as string: 'horizontal,vertical'\n            case 'flip':\n                if (typeof value === 'string') {\n                    flipFromString(customisations, value);\n                }\n                break;\n            // Color: override style\n            case 'color':\n                style.color = value;\n                break;\n            // Rotation as string\n            case 'rotate':\n                if (typeof value === 'string') {\n                    customisations[key] = rotateFromString(value);\n                }\n                else if (typeof value === 'number') {\n                    customisations[key] = value;\n                }\n                break;\n            // Remove aria-hidden\n            case 'ariaHidden':\n            case 'aria-hidden':\n                // Vue transforms 'aria-hidden' property to 'ariaHidden'\n                if (value !== true && value !== 'true') {\n                    delete componentProps['aria-hidden'];\n                }\n                break;\n            default: {\n                const alias = customisationAliases[key];\n                if (alias) {\n                    // Aliases for boolean customisations\n                    if (value === true || value === 'true' || value === 1) {\n                        customisations[alias] = true;\n                    }\n                }\n                else if (defaultExtendedIconCustomisations[key] === void 0) {\n                    // Copy missing property if it does not exist in customisations\n                    componentProps[key] = value;\n                }\n            }\n        }\n    }\n    // Generate icon\n    const item = iconToSVG(icon, customisations);\n    const renderAttribs = item.attributes;\n    // Inline display\n    if (customisations.inline) {\n        style.verticalAlign = '-0.125em';\n    }\n    if (mode === 'svg') {\n        // Add style\n        componentProps.style = {\n            ...style,\n            ...customStyle,\n        };\n        // Add icon stuff\n        Object.assign(componentProps, renderAttribs);\n        // Counter for ids based on \"id\" property to render icons consistently on server and client\n        let localCounter = 0;\n        let id = props.id;\n        if (typeof id === 'string') {\n            // Convert '-' to '_' to avoid errors in animations\n            id = id.replace(/-/g, '_');\n        }\n        // Add innerHTML and style to props\n        componentProps['innerHTML'] = replaceIDs(item.body, id ? () => id + 'ID' + localCounter++ : 'iconifyVue');\n        // Render icon\n        return h('svg', componentProps);\n    }\n    // Render <span> with style\n    const { body, width, height } = icon;\n    const useMask = mode === 'mask' ||\n        (mode === 'bg' ? false : body.indexOf('currentColor') !== -1);\n    // Generate SVG\n    const html = iconToHTML(body, {\n        ...renderAttribs,\n        width: width + '',\n        height: height + '',\n    });\n    // Generate style\n    componentProps.style = {\n        ...style,\n        '--svg': svgToURL(html),\n        'width': fixSize(renderAttribs.width),\n        'height': fixSize(renderAttribs.height),\n        ...commonProps,\n        ...(useMask ? monotoneProps : coloredProps),\n        ...customStyle,\n    };\n    return h('span', componentProps);\n};\n\n/**\n * Enable cache\n */\nfunction enableCache(storage) {\n    toggleBrowserCache(storage, true);\n}\n/**\n * Disable cache\n */\nfunction disableCache(storage) {\n    toggleBrowserCache(storage, false);\n}\n/**\n * Initialise stuff\n */\n// Enable short names\nallowSimpleNames(true);\n// Set API module\nsetAPIModule('', fetchAPIModule);\n/**\n * Browser stuff\n */\nif (typeof document !== 'undefined' && typeof window !== 'undefined') {\n    // Set cache and load existing cache\n    initBrowserStorage();\n    const _window = window;\n    // Load icons from global \"IconifyPreload\"\n    if (_window.IconifyPreload !== void 0) {\n        const preload = _window.IconifyPreload;\n        const err = 'Invalid IconifyPreload syntax.';\n        if (typeof preload === 'object' && preload !== null) {\n            (preload instanceof Array ? preload : [preload]).forEach((item) => {\n                try {\n                    if (\n                    // Check if item is an object and not null/array\n                    typeof item !== 'object' ||\n                        item === null ||\n                        item instanceof Array ||\n                        // Check for 'icons' and 'prefix'\n                        typeof item.icons !== 'object' ||\n                        typeof item.prefix !== 'string' ||\n                        // Add icon set\n                        !addCollection(item)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            });\n        }\n    }\n    // Set API from global \"IconifyProviders\"\n    if (_window.IconifyProviders !== void 0) {\n        const providers = _window.IconifyProviders;\n        if (typeof providers === 'object' && providers !== null) {\n            for (let key in providers) {\n                const err = 'IconifyProviders[' + key + '] is invalid.';\n                try {\n                    const value = providers[key];\n                    if (typeof value !== 'object' ||\n                        !value ||\n                        value.resources === void 0) {\n                        continue;\n                    }\n                    if (!addAPIProvider(key, value)) {\n                        console.error(err);\n                    }\n                }\n                catch (e) {\n                    console.error(err);\n                }\n            }\n        }\n    }\n}\n/**\n * Empty icon data, rendered when icon is not available\n */\nconst emptyIcon = {\n    ...defaultIconProps,\n    body: '',\n};\nconst Icon = defineComponent({\n    // Do not inherit other attributes: it is handled by render()\n    inheritAttrs: false,\n    // Set initial data\n    data() {\n        return {\n            // Current icon name\n            _name: '',\n            // Loading\n            _loadingIcon: null,\n            // Mounted status\n            iconMounted: false,\n            // Callback counter to trigger re-render\n            counter: 0,\n        };\n    },\n    mounted() {\n        // Mark as mounted\n        this.iconMounted = true;\n    },\n    unmounted() {\n        this.abortLoading();\n    },\n    methods: {\n        abortLoading() {\n            if (this._loadingIcon) {\n                this._loadingIcon.abort();\n                this._loadingIcon = null;\n            }\n        },\n        // Get data for icon to render or null\n        getIcon(icon, onload) {\n            // Icon is an object\n            if (typeof icon === 'object' &&\n                icon !== null &&\n                typeof icon.body === 'string') {\n                // Stop loading\n                this._name = '';\n                this.abortLoading();\n                return {\n                    data: icon,\n                };\n            }\n            // Invalid icon?\n            let iconName;\n            if (typeof icon !== 'string' ||\n                (iconName = stringToIcon(icon, false, true)) === null) {\n                this.abortLoading();\n                return null;\n            }\n            // Load icon\n            const data = getIconData(iconName);\n            if (!data) {\n                // Icon data is not available\n                if (!this._loadingIcon || this._loadingIcon.name !== icon) {\n                    // New icon to load\n                    this.abortLoading();\n                    this._name = '';\n                    if (data !== null) {\n                        // Icon was not loaded\n                        this._loadingIcon = {\n                            name: icon,\n                            abort: loadIcons([iconName], () => {\n                                this.counter++;\n                            }),\n                        };\n                    }\n                }\n                return null;\n            }\n            // Icon data is available\n            this.abortLoading();\n            if (this._name !== icon) {\n                this._name = icon;\n                if (onload) {\n                    onload(icon);\n                }\n            }\n            // Add classes\n            const classes = ['iconify'];\n            if (iconName.prefix !== '') {\n                classes.push('iconify--' + iconName.prefix);\n            }\n            if (iconName.provider !== '') {\n                classes.push('iconify--' + iconName.provider);\n            }\n            return { data, classes };\n        },\n    },\n    // Render icon\n    render() {\n        // Re-render when counter changes\n        this.counter;\n        const props = this.$attrs;\n        // Get icon data\n        const icon = (this.iconMounted || props.ssr)\n            ? this.getIcon(props.icon, props.onLoad)\n            : null;\n        // Validate icon object\n        if (!icon) {\n            return render(emptyIcon, props);\n        }\n        // Add classes\n        let newProps = props;\n        if (icon.classes) {\n            newProps = {\n                ...props,\n                class: (typeof props['class'] === 'string'\n                    ? props['class'] + ' '\n                    : '') + icon.classes.join(' '),\n            };\n        }\n        // Render icon\n        return render({\n            ...defaultIconProps,\n            ...icon.data,\n        }, newProps);\n    },\n});\n/**\n * Internal API\n */\nconst _api = {\n    getAPIConfig,\n    setAPIModule,\n    sendAPIQuery,\n    setFetch,\n    getFetch,\n    listAPIProviders,\n};\n\nexport { Icon, _api, addAPIProvider, addCollection, addIcon, iconToSVG as buildIcon, calculateSize, disableCache, enableCache, getIcon, iconLoaded as iconExists, iconLoaded, listIcons, loadIcon, loadIcons, replaceIDs };\n", null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_advancedFormat=t()}(this,(function(){\"use strict\";return function(e,t){var r=t.prototype,n=r.format;r.format=function(e){var t=this,r=this.$locale();if(!this.isValid())return n.bind(this)(e);var s=this.$utils(),a=(e||\"YYYY-MM-DDTHH:mm:ssZ\").replace(/\\[([^\\]]+)]|Q|wo|ww|w|WW|W|zzz|z|gggg|GGGG|Do|X|x|k{1,2}|S/g,(function(e){switch(e){case\"Q\":return Math.ceil((t.$M+1)/3);case\"Do\":return r.ordinal(t.$D);case\"gggg\":return t.weekYear();case\"GGGG\":return t.isoWeekYear();case\"wo\":return r.ordinal(t.week(),\"W\");case\"w\":case\"ww\":return s.s(t.week(),\"w\"===e?1:2,\"0\");case\"W\":case\"WW\":return s.s(t.isoWeek(),\"W\"===e?1:2,\"0\");case\"k\":case\"kk\":return s.s(String(0===t.$H?24:t.$H),\"k\"===e?1:2,\"0\");case\"X\":return Math.floor(t.$d.getTime()/1e3);case\"x\":return t.$d.getTime();case\"z\":return\"[\"+t.offsetName()+\"]\";case\"zzz\":return\"[\"+t.offsetName(\"long\")+\"]\";default:return e}}));return n.bind(this)(a)}}}));", null, "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekOfYear=t()}(this,(function(){\"use strict\";var e=\"week\",t=\"year\";return function(i,n,r){var f=n.prototype;f.week=function(i){if(void 0===i&&(i=null),null!==i)return this.add(7*(i-this.week()),\"day\");var n=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var f=r(this).startOf(t).add(1,t).date(n),s=r(this).endOf(e);if(f.isBefore(s))return 1}var a=r(this).startOf(t).date(n).startOf(e).subtract(1,\"millisecond\"),o=this.diff(a,e,!0);return o<0?r(this).startOf(\"week\").week():Math.ceil(o)},f.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}));", "!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=\"undefined\"!=typeof globalThis?globalThis:e||self).dayjs_plugin_weekday=t()}(this,(function(){\"use strict\";return function(e,t){t.prototype.weekday=function(e){var t=this.$locale().weekStart||0,i=this.$W,n=(i<t?i+7:i)-t;return this.$utils().u(e)?n:this.subtract(n,\"day\").add(e,\"day\")}}}));", "!function(n,e){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(e):(n=\"undefined\"!=typeof globalThis?globalThis:n||self).dayjs_plugin_localeData=e()}(this,(function(){\"use strict\";return function(n,e,t){var r=e.prototype,o=function(n){return n&&(n.indexOf?n:n.s)},u=function(n,e,t,r,u){var i=n.name?n:n.$locale(),a=o(i[e]),s=o(i[t]),f=a||s.map((function(n){return n.slice(0,r)}));if(!u)return f;var d=i.weekStart;return f.map((function(n,e){return f[(e+(d||0))%7]}))},i=function(){return t.Ls[t.locale()]},a=function(n,e){return n.formats[e]||function(n){return n.replace(/(\\[[^\\]]+])|(MMMM|MM|DD|dddd)/g,(function(n,e,t){return e||t.slice(1)}))}(n.formats[e.toUpperCase()])},s=function(){var n=this;return{months:function(e){return e?e.format(\"MMMM\"):u(n,\"months\")},monthsShort:function(e){return e?e.format(\"MMM\"):u(n,\"monthsShort\",\"months\",3)},firstDayOfWeek:function(){return n.$locale().weekStart||0},weekdays:function(e){return e?e.format(\"dddd\"):u(n,\"weekdays\")},weekdaysMin:function(e){return e?e.format(\"dd\"):u(n,\"weekdaysMin\",\"weekdays\",2)},weekdaysShort:function(e){return e?e.format(\"ddd\"):u(n,\"weekdaysShort\",\"weekdays\",3)},longDateFormat:function(e){return a(n.$locale(),e)},meridiem:this.$locale().meridiem,ordinal:this.$locale().ordinal}};r.localeData=function(){return s.bind(this)()},t.localeData=function(){var n=i();return{firstDayOfWeek:function(){return n.weekStart||0},weekdays:function(){return t.weekdays()},weekdaysShort:function(){return t.weekdaysShort()},weekdaysMin:function(){return t.weekdaysMin()},months:function(){return t.months()},monthsShort:function(){return t.monthsShort()},longDateFormat:function(e){return a(n,e)},meridiem:n.meridiem,ordinal:n.ordinal}},t.months=function(){return u(i(),\"months\")},t.monthsShort=function(){return u(i(),\"monthsShort\",\"months\",3)},t.weekdays=function(n){return u(i(),\"weekdays\",null,null,n)},t.weekdaysShort=function(n){return u(i(),\"weekdaysShort\",\"weekdays\",3,n)},t.weekdaysMin=function(n){return u(i(),\"weekdaysMin\",\"weekdays\",2,n)}}}));", null, null, null, null, null, null, null, null, "<template>\n  <div ref=\"pageRef\" class=\"fs-page\">\n    <div v-if=\"$slots.header != null\" class=\"fs-page-header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <div class=\"fs-page-content\">\n      <slot></slot>\n    </div>\n    <div v-if=\"$slots.footer != null\" class=\"fs-page-footer\">\n      <slot name=\"footer\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { utils } from \"../../utils\";\nexport default defineComponent({\n  name: \"FsPage\",\n  setup() {\n    const pageRef: Ref = ref();\n    onMounted(() => {\n      const styles = window.getComputedStyle(pageRef.value.parentNode);\n      const positionValue = styles.getPropertyValue(\"position\");\n      if (positionValue !== \"relative\") {\n        utils.logger.warn(\n          \"fs-page父节点的position建议为relative,因为fs-page为相对定位（position:absolute），如果样式没有异常，你可以忽略此警告\"\n        );\n      }\n    });\n    return {\n      pageRef\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-page {\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n\n  .fs-page-header {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid #ddd;\n    > .title {\n      flex: 1;\n      justify-self: flex-start;\n      padding: 18px;\n      font-size: 16px;\n      font-weight: bold;\n      color: #444;\n\n      .sub {\n        font-size: 12px;\n        color: gray;\n        margin-left: 20px;\n        font-weight: lighter;\n      }\n    }\n    > .more {\n      justify-self: flex-end;\n      margin-right: 18px;\n      font-size: 14px;\n      display: flex;\n    }\n  }\n  .fs-page-content {\n    flex: 1;\n    overflow: auto;\n  }\n}\n</style>\n", "<template>\n  <div ref=\"pageRef\" class=\"fs-page\">\n    <div v-if=\"$slots.header != null\" class=\"fs-page-header\">\n      <slot name=\"header\"></slot>\n    </div>\n\n    <div class=\"fs-page-content\">\n      <slot></slot>\n    </div>\n    <div v-if=\"$slots.footer != null\" class=\"fs-page-footer\">\n      <slot name=\"footer\"></slot>\n    </div>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, onMounted, ref, Ref } from \"vue\";\nimport { utils } from \"../../utils\";\nexport default defineComponent({\n  name: \"FsPage\",\n  setup() {\n    const pageRef: Ref = ref();\n    onMounted(() => {\n      const styles = window.getComputedStyle(pageRef.value.parentNode);\n      const positionValue = styles.getPropertyValue(\"position\");\n      if (positionValue !== \"relative\") {\n        utils.logger.warn(\n          \"fs-page父节点的position建议为relative,因为fs-page为相对定位（position:absolute），如果样式没有异常，你可以忽略此警告\"\n        );\n      }\n    });\n    return {\n      pageRef\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-page {\n  width: 100%;\n  top: 0;\n  bottom: 0;\n  position: absolute;\n  display: flex;\n  flex-direction: column;\n\n  .fs-page-header {\n    display: flex;\n    align-items: center;\n    border-bottom: 1px solid #ddd;\n    > .title {\n      flex: 1;\n      justify-self: flex-start;\n      padding: 18px;\n      font-size: 16px;\n      font-weight: bold;\n      color: #444;\n\n      .sub {\n        font-size: 12px;\n        color: gray;\n        margin-left: 20px;\n        font-weight: lighter;\n      }\n    }\n    > .more {\n      justify-self: flex-end;\n      margin-right: 18px;\n      font-size: 14px;\n      display: flex;\n    }\n  }\n  .fs-page-content {\n    flex: 1;\n    overflow: auto;\n  }\n}\n</style>\n", null, null, null, null, null, null, null, null, null, null, "/**\n * @module LRUCache\n */\nconst perf = typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function'\n    ? performance\n    : Date;\nconst warned = new Set();\n/* c8 ignore start */\nconst PROCESS = (typeof process === 'object' && !!process ? process : {});\n/* c8 ignore start */\nconst emitWarning = (msg, type, code, fn) => {\n    typeof PROCESS.emitWarning === 'function'\n        ? PROCESS.emitWarning(msg, type, code, fn)\n        : console.error(`[${code}] ${type}: ${msg}`);\n};\nlet AC = globalThis.AbortController;\nlet AS = globalThis.AbortSignal;\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n    //@ts-ignore\n    AS = class AbortSignal {\n        onabort;\n        _onabort = [];\n        reason;\n        aborted = false;\n        addEventListener(_, fn) {\n            this._onabort.push(fn);\n        }\n    };\n    //@ts-ignore\n    AC = class AbortController {\n        constructor() {\n            warnACPolyfill();\n        }\n        signal = new AS();\n        abort(reason) {\n            if (this.signal.aborted)\n                return;\n            //@ts-ignore\n            this.signal.reason = reason;\n            //@ts-ignore\n            this.signal.aborted = true;\n            //@ts-ignore\n            for (const fn of this.signal._onabort) {\n                fn(reason);\n            }\n            this.signal.onabort?.(reason);\n        }\n    };\n    let printACPolyfillWarning = PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1';\n    const warnACPolyfill = () => {\n        if (!printACPolyfillWarning)\n            return;\n        printACPolyfillWarning = false;\n        emitWarning('AbortController is not defined. If using lru-cache in ' +\n            'node 14, load an AbortController polyfill from the ' +\n            '`node-abort-controller` package. A minimal polyfill is ' +\n            'provided for use by LRUCache.fetch(), but it should not be ' +\n            'relied upon in other contexts (eg, passing it to other APIs that ' +\n            'use AbortController/AbortSignal might have undesirable effects). ' +\n            'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.', 'NO_ABORT_CONTROLLER', 'ENOTSUP', warnACPolyfill);\n    };\n}\n/* c8 ignore stop */\nconst shouldWarn = (code) => !warned.has(code);\nconst TYPE = Symbol('type');\nconst isPosInt = (n) => n && n === Math.floor(n) && n > 0 && isFinite(n);\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max) => !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n        ? Uint8Array\n        : max <= Math.pow(2, 16)\n            ? Uint16Array\n            : max <= Math.pow(2, 32)\n                ? Uint32Array\n                : max <= Number.MAX_SAFE_INTEGER\n                    ? ZeroArray\n                    : null;\n/* c8 ignore stop */\nclass ZeroArray extends Array {\n    constructor(size) {\n        super(size);\n        this.fill(0);\n    }\n}\nclass Stack {\n    heap;\n    length;\n    // private constructor\n    static #constructing = false;\n    static create(max) {\n        const HeapCls = getUintArray(max);\n        if (!HeapCls)\n            return [];\n        Stack.#constructing = true;\n        const s = new Stack(max, HeapCls);\n        Stack.#constructing = false;\n        return s;\n    }\n    constructor(max, HeapCls) {\n        /* c8 ignore start */\n        if (!Stack.#constructing) {\n            throw new TypeError('instantiate Stack using Stack.create(n)');\n        }\n        /* c8 ignore stop */\n        this.heap = new HeapCls(max);\n        this.length = 0;\n    }\n    push(n) {\n        this.heap[this.length++] = n;\n    }\n    pop() {\n        return this.heap[--this.length];\n    }\n}\n/**\n * Default export, the thing you're using this module to get.\n *\n * All properties from the options object (with the exception of\n * {@link OptionsBase.max} and {@link OptionsBase.maxSize}) are added as\n * normal public members. (`max` and `maxBase` are read-only getters.)\n * Changing any of these will alter the defaults for subsequent method calls,\n * but is otherwise safe.\n */\nexport class LRUCache {\n    // properties coming in from the options of these, only max and maxSize\n    // really *need* to be protected. The rest can be modified, as they just\n    // set defaults for various methods.\n    #max;\n    #maxSize;\n    #dispose;\n    #disposeAfter;\n    #fetchMethod;\n    /**\n     * {@link LRUCache.OptionsBase.ttl}\n     */\n    ttl;\n    /**\n     * {@link LRUCache.OptionsBase.ttlResolution}\n     */\n    ttlResolution;\n    /**\n     * {@link LRUCache.OptionsBase.ttlAutopurge}\n     */\n    ttlAutopurge;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnGet}\n     */\n    updateAgeOnGet;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnHas}\n     */\n    updateAgeOnHas;\n    /**\n     * {@link LRUCache.OptionsBase.allowStale}\n     */\n    allowStale;\n    /**\n     * {@link LRUCache.OptionsBase.noDisposeOnSet}\n     */\n    noDisposeOnSet;\n    /**\n     * {@link LRUCache.OptionsBase.noUpdateTTL}\n     */\n    noUpdateTTL;\n    /**\n     * {@link LRUCache.OptionsBase.maxEntrySize}\n     */\n    maxEntrySize;\n    /**\n     * {@link LRUCache.OptionsBase.sizeCalculation}\n     */\n    sizeCalculation;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n     */\n    noDeleteOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n     */\n    noDeleteOnStaleGet;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n     */\n    allowStaleOnFetchAbort;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n     */\n    allowStaleOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n     */\n    ignoreFetchAbort;\n    // computed properties\n    #size;\n    #calculatedSize;\n    #keyMap;\n    #keyList;\n    #valList;\n    #next;\n    #prev;\n    #head;\n    #tail;\n    #free;\n    #disposed;\n    #sizes;\n    #starts;\n    #ttls;\n    #hasDispose;\n    #hasFetchMethod;\n    #hasDisposeAfter;\n    /**\n     * Do not call this method unless you need to inspect the\n     * inner workings of the cache.  If anything returned by this\n     * object is modified in any way, strange breakage may occur.\n     *\n     * These fields are private for a reason!\n     *\n     * @internal\n     */\n    static unsafeExposeInternals(c) {\n        return {\n            // properties\n            starts: c.#starts,\n            ttls: c.#ttls,\n            sizes: c.#sizes,\n            keyMap: c.#keyMap,\n            keyList: c.#keyList,\n            valList: c.#valList,\n            next: c.#next,\n            prev: c.#prev,\n            get head() {\n                return c.#head;\n            },\n            get tail() {\n                return c.#tail;\n            },\n            free: c.#free,\n            // methods\n            isBackgroundFetch: (p) => c.#isBackgroundFetch(p),\n            backgroundFetch: (k, index, options, context) => c.#backgroundFetch(k, index, options, context),\n            moveToTail: (index) => c.#moveToTail(index),\n            indexes: (options) => c.#indexes(options),\n            rindexes: (options) => c.#rindexes(options),\n            isStale: (index) => c.#isStale(index),\n        };\n    }\n    // Protected read-only members\n    /**\n     * {@link LRUCache.OptionsBase.max} (read-only)\n     */\n    get max() {\n        return this.#max;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.maxSize} (read-only)\n     */\n    get maxSize() {\n        return this.#maxSize;\n    }\n    /**\n     * The total computed size of items in the cache (read-only)\n     */\n    get calculatedSize() {\n        return this.#calculatedSize;\n    }\n    /**\n     * The number of items stored in the cache (read-only)\n     */\n    get size() {\n        return this.#size;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n     */\n    get fetchMethod() {\n        return this.#fetchMethod;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.dispose} (read-only)\n     */\n    get dispose() {\n        return this.#dispose;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n     */\n    get disposeAfter() {\n        return this.#disposeAfter;\n    }\n    constructor(options) {\n        const { max = 0, ttl, ttlResolution = 1, ttlAutopurge, updateAgeOnGet, updateAgeOnHas, allowStale, dispose, disposeAfter, noDisposeOnSet, noUpdateTTL, maxSize = 0, maxEntrySize = 0, sizeCalculation, fetchMethod, noDeleteOnFetchRejection, noDeleteOnStaleGet, allowStaleOnFetchRejection, allowStaleOnFetchAbort, ignoreFetchAbort, } = options;\n        if (max !== 0 && !isPosInt(max)) {\n            throw new TypeError('max option must be a nonnegative integer');\n        }\n        const UintArray = max ? getUintArray(max) : Array;\n        if (!UintArray) {\n            throw new Error('invalid max value: ' + max);\n        }\n        this.#max = max;\n        this.#maxSize = maxSize;\n        this.maxEntrySize = maxEntrySize || this.#maxSize;\n        this.sizeCalculation = sizeCalculation;\n        if (this.sizeCalculation) {\n            if (!this.#maxSize && !this.maxEntrySize) {\n                throw new TypeError('cannot set sizeCalculation without setting maxSize or maxEntrySize');\n            }\n            if (typeof this.sizeCalculation !== 'function') {\n                throw new TypeError('sizeCalculation set to non-function');\n            }\n        }\n        if (fetchMethod !== undefined &&\n            typeof fetchMethod !== 'function') {\n            throw new TypeError('fetchMethod must be a function if specified');\n        }\n        this.#fetchMethod = fetchMethod;\n        this.#hasFetchMethod = !!fetchMethod;\n        this.#keyMap = new Map();\n        this.#keyList = new Array(max).fill(undefined);\n        this.#valList = new Array(max).fill(undefined);\n        this.#next = new UintArray(max);\n        this.#prev = new UintArray(max);\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free = Stack.create(max);\n        this.#size = 0;\n        this.#calculatedSize = 0;\n        if (typeof dispose === 'function') {\n            this.#dispose = dispose;\n        }\n        if (typeof disposeAfter === 'function') {\n            this.#disposeAfter = disposeAfter;\n            this.#disposed = [];\n        }\n        else {\n            this.#disposeAfter = undefined;\n            this.#disposed = undefined;\n        }\n        this.#hasDispose = !!this.#dispose;\n        this.#hasDisposeAfter = !!this.#disposeAfter;\n        this.noDisposeOnSet = !!noDisposeOnSet;\n        this.noUpdateTTL = !!noUpdateTTL;\n        this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection;\n        this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection;\n        this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort;\n        this.ignoreFetchAbort = !!ignoreFetchAbort;\n        // NB: maxEntrySize is set to maxSize if it's set\n        if (this.maxEntrySize !== 0) {\n            if (this.#maxSize !== 0) {\n                if (!isPosInt(this.#maxSize)) {\n                    throw new TypeError('maxSize must be a positive integer if specified');\n                }\n            }\n            if (!isPosInt(this.maxEntrySize)) {\n                throw new TypeError('maxEntrySize must be a positive integer if specified');\n            }\n            this.#initializeSizeTracking();\n        }\n        this.allowStale = !!allowStale;\n        this.noDeleteOnStaleGet = !!noDeleteOnStaleGet;\n        this.updateAgeOnGet = !!updateAgeOnGet;\n        this.updateAgeOnHas = !!updateAgeOnHas;\n        this.ttlResolution =\n            isPosInt(ttlResolution) || ttlResolution === 0\n                ? ttlResolution\n                : 1;\n        this.ttlAutopurge = !!ttlAutopurge;\n        this.ttl = ttl || 0;\n        if (this.ttl) {\n            if (!isPosInt(this.ttl)) {\n                throw new TypeError('ttl must be a positive integer if specified');\n            }\n            this.#initializeTTLTracking();\n        }\n        // do not allow completely unbounded caches\n        if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n            throw new TypeError('At least one of max, maxSize, or ttl is required');\n        }\n        if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n            const code = 'LRU_CACHE_UNBOUNDED';\n            if (shouldWarn(code)) {\n                warned.add(code);\n                const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n                    'result in unbounded memory consumption.';\n                emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache);\n            }\n        }\n    }\n    /**\n     * Return the remaining TTL time for a given entry key\n     */\n    getRemainingTTL(key) {\n        return this.#keyMap.has(key) ? Infinity : 0;\n    }\n    #initializeTTLTracking() {\n        const ttls = new ZeroArray(this.#max);\n        const starts = new ZeroArray(this.#max);\n        this.#ttls = ttls;\n        this.#starts = starts;\n        this.#setItemTTL = (index, ttl, start = perf.now()) => {\n            starts[index] = ttl !== 0 ? start : 0;\n            ttls[index] = ttl;\n            if (ttl !== 0 && this.ttlAutopurge) {\n                const t = setTimeout(() => {\n                    if (this.#isStale(index)) {\n                        this.delete(this.#keyList[index]);\n                    }\n                }, ttl + 1);\n                // unref() not supported on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n        };\n        this.#updateItemAge = index => {\n            starts[index] = ttls[index] !== 0 ? perf.now() : 0;\n        };\n        this.#statusTTL = (status, index) => {\n            if (ttls[index]) {\n                const ttl = ttls[index];\n                const start = starts[index];\n                /* c8 ignore next */\n                if (!ttl || !start)\n                    return;\n                status.ttl = ttl;\n                status.start = start;\n                status.now = cachedNow || getNow();\n                const age = status.now - start;\n                status.remainingTTL = ttl - age;\n            }\n        };\n        // debounce calls to perf.now() to 1s so we're not hitting\n        // that costly call repeatedly.\n        let cachedNow = 0;\n        const getNow = () => {\n            const n = perf.now();\n            if (this.ttlResolution > 0) {\n                cachedNow = n;\n                const t = setTimeout(() => (cachedNow = 0), this.ttlResolution);\n                // not available on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n            return n;\n        };\n        this.getRemainingTTL = key => {\n            const index = this.#keyMap.get(key);\n            if (index === undefined) {\n                return 0;\n            }\n            const ttl = ttls[index];\n            const start = starts[index];\n            if (!ttl || !start) {\n                return Infinity;\n            }\n            const age = (cachedNow || getNow()) - start;\n            return ttl - age;\n        };\n        this.#isStale = index => {\n            const s = starts[index];\n            const t = ttls[index];\n            return !!t && !!s && (cachedNow || getNow()) - s > t;\n        };\n    }\n    // conditionally set private methods related to TTL\n    #updateItemAge = () => { };\n    #statusTTL = () => { };\n    #setItemTTL = () => { };\n    /* c8 ignore stop */\n    #isStale = () => false;\n    #initializeSizeTracking() {\n        const sizes = new ZeroArray(this.#max);\n        this.#calculatedSize = 0;\n        this.#sizes = sizes;\n        this.#removeItemSize = index => {\n            this.#calculatedSize -= sizes[index];\n            sizes[index] = 0;\n        };\n        this.#requireSize = (k, v, size, sizeCalculation) => {\n            // provisionally accept background fetches.\n            // actual value size will be checked when they return.\n            if (this.#isBackgroundFetch(v)) {\n                return 0;\n            }\n            if (!isPosInt(size)) {\n                if (sizeCalculation) {\n                    if (typeof sizeCalculation !== 'function') {\n                        throw new TypeError('sizeCalculation must be a function');\n                    }\n                    size = sizeCalculation(v, k);\n                    if (!isPosInt(size)) {\n                        throw new TypeError('sizeCalculation return invalid (expect positive integer)');\n                    }\n                }\n                else {\n                    throw new TypeError('invalid size value (must be positive integer). ' +\n                        'When maxSize or maxEntrySize is used, sizeCalculation ' +\n                        'or size must be set.');\n                }\n            }\n            return size;\n        };\n        this.#addItemSize = (index, size, status) => {\n            sizes[index] = size;\n            if (this.#maxSize) {\n                const maxSize = this.#maxSize - sizes[index];\n                while (this.#calculatedSize > maxSize) {\n                    this.#evict(true);\n                }\n            }\n            this.#calculatedSize += sizes[index];\n            if (status) {\n                status.entrySize = size;\n                status.totalCalculatedSize = this.#calculatedSize;\n            }\n        };\n    }\n    #removeItemSize = _i => { };\n    #addItemSize = (_i, _s, _st) => { };\n    #requireSize = (_k, _v, size, sizeCalculation) => {\n        if (size || sizeCalculation) {\n            throw new TypeError('cannot set size without setting maxSize or maxEntrySize on cache');\n        }\n        return 0;\n    };\n    *#indexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#tail; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#head) {\n                    break;\n                }\n                else {\n                    i = this.#prev[i];\n                }\n            }\n        }\n    }\n    *#rindexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#head; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#tail) {\n                    break;\n                }\n                else {\n                    i = this.#next[i];\n                }\n            }\n        }\n    }\n    #isValidIndex(index) {\n        return (index !== undefined &&\n            this.#keyMap.get(this.#keyList[index]) === index);\n    }\n    /**\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from most recently used to least recently used.\n     */\n    *entries() {\n        for (const i of this.#indexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.entries}\n     *\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from least recently used to most recently used.\n     */\n    *rentries() {\n        for (const i of this.#rindexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the keys in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *keys() {\n        for (const i of this.#indexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.keys}\n     *\n     * Return a generator yielding the keys in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rkeys() {\n        for (const i of this.#rindexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the values in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *values() {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.values}\n     *\n     * Return a generator yielding the values in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rvalues() {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Iterating over the cache itself yields the same results as\n     * {@link LRUCache.entries}\n     */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /**\n     * A String value that is used in the creation of the default string description of an object.\n     * Called by the built-in method Object.prototype.toString.\n     */\n    [Symbol.toStringTag] = 'LRUCache';\n    /**\n     * Find a value for which the supplied fn method returns a truthy value,\n     * similar to Array.find().  fn is called as fn(value, key, cache).\n     */\n    find(fn, getOptions = {}) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            if (fn(value, this.#keyList[i], this)) {\n                return this.get(this.#keyList[i], getOptions);\n            }\n        }\n    }\n    /**\n     * Call the supplied function on each item in the cache, in order from\n     * most recently used to least recently used.  fn is called as\n     * fn(value, key, cache).  Does not update age or recenty of use.\n     * Does not iterate over stale values.\n     */\n    forEach(fn, thisp = this) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * The same as {@link LRUCache.forEach} but items are iterated over in\n     * reverse order.  (ie, less recently used items are iterated over first.)\n     */\n    rforEach(fn, thisp = this) {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * Delete any stale entries. Returns true if anything was removed,\n     * false otherwise.\n     */\n    purgeStale() {\n        let deleted = false;\n        for (const i of this.#rindexes({ allowStale: true })) {\n            if (this.#isStale(i)) {\n                this.delete(this.#keyList[i]);\n                deleted = true;\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Get the extended info about a given entry, to get its value, size, and\n     * TTL info simultaneously. Like {@link LRUCache#dump}, but just for a\n     * single key. Always returns stale values, if their info is found in the\n     * cache, so be sure to check for expired TTLs if relevant.\n     */\n    info(key) {\n        const i = this.#keyMap.get(key);\n        if (i === undefined)\n            return undefined;\n        const v = this.#valList[i];\n        const value = this.#isBackgroundFetch(v)\n            ? v.__staleWhileFetching\n            : v;\n        if (value === undefined)\n            return undefined;\n        const entry = { value };\n        if (this.#ttls && this.#starts) {\n            const ttl = this.#ttls[i];\n            const start = this.#starts[i];\n            if (ttl && start) {\n                const remain = ttl - (perf.now() - start);\n                entry.ttl = remain;\n                entry.start = Date.now();\n            }\n        }\n        if (this.#sizes) {\n            entry.size = this.#sizes[i];\n        }\n        return entry;\n    }\n    /**\n     * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n     * passed to cache.load()\n     */\n    dump() {\n        const arr = [];\n        for (const i of this.#indexes({ allowStale: true })) {\n            const key = this.#keyList[i];\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined || key === undefined)\n                continue;\n            const entry = { value };\n            if (this.#ttls && this.#starts) {\n                entry.ttl = this.#ttls[i];\n                // always dump the start relative to a portable timestamp\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = perf.now() - this.#starts[i];\n                entry.start = Math.floor(Date.now() - age);\n            }\n            if (this.#sizes) {\n                entry.size = this.#sizes[i];\n            }\n            arr.unshift([key, entry]);\n        }\n        return arr;\n    }\n    /**\n     * Reset the cache and load in the items in entries in the order listed.\n     * Note that the shape of the resulting cache may be different if the\n     * same options are not used in both caches.\n     */\n    load(arr) {\n        this.clear();\n        for (const [key, entry] of arr) {\n            if (entry.start) {\n                // entry.start is a portable timestamp, but we may be using\n                // node's performance.now(), so calculate the offset, so that\n                // we get the intended remaining TTL, no matter how long it's\n                // been on ice.\n                //\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = Date.now() - entry.start;\n                entry.start = perf.now() - age;\n            }\n            this.set(key, entry.value, entry);\n        }\n    }\n    /**\n     * Add a value to the cache.\n     *\n     * Note: if `undefined` is specified as a value, this is an alias for\n     * {@link LRUCache#delete}\n     */\n    set(k, v, setOptions = {}) {\n        if (v === undefined) {\n            this.delete(k);\n            return this;\n        }\n        const { ttl = this.ttl, start, noDisposeOnSet = this.noDisposeOnSet, sizeCalculation = this.sizeCalculation, status, } = setOptions;\n        let { noUpdateTTL = this.noUpdateTTL } = setOptions;\n        const size = this.#requireSize(k, v, setOptions.size || 0, sizeCalculation);\n        // if the item doesn't fit, don't do anything\n        // NB: maxEntrySize set to maxSize by default\n        if (this.maxEntrySize && size > this.maxEntrySize) {\n            if (status) {\n                status.set = 'miss';\n                status.maxEntrySizeExceeded = true;\n            }\n            // have to delete, in case something is there already.\n            this.delete(k);\n            return this;\n        }\n        let index = this.#size === 0 ? undefined : this.#keyMap.get(k);\n        if (index === undefined) {\n            // addition\n            index = (this.#size === 0\n                ? this.#tail\n                : this.#free.length !== 0\n                    ? this.#free.pop()\n                    : this.#size === this.#max\n                        ? this.#evict(false)\n                        : this.#size);\n            this.#keyList[index] = k;\n            this.#valList[index] = v;\n            this.#keyMap.set(k, index);\n            this.#next[this.#tail] = index;\n            this.#prev[index] = this.#tail;\n            this.#tail = index;\n            this.#size++;\n            this.#addItemSize(index, size, status);\n            if (status)\n                status.set = 'add';\n            noUpdateTTL = false;\n        }\n        else {\n            // update\n            this.#moveToTail(index);\n            const oldVal = this.#valList[index];\n            if (v !== oldVal) {\n                if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n                    oldVal.__abortController.abort(new Error('replaced'));\n                    const { __staleWhileFetching: s } = oldVal;\n                    if (s !== undefined && !noDisposeOnSet) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(s, k, 'set');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([s, k, 'set']);\n                        }\n                    }\n                }\n                else if (!noDisposeOnSet) {\n                    if (this.#hasDispose) {\n                        this.#dispose?.(oldVal, k, 'set');\n                    }\n                    if (this.#hasDisposeAfter) {\n                        this.#disposed?.push([oldVal, k, 'set']);\n                    }\n                }\n                this.#removeItemSize(index);\n                this.#addItemSize(index, size, status);\n                this.#valList[index] = v;\n                if (status) {\n                    status.set = 'replace';\n                    const oldValue = oldVal && this.#isBackgroundFetch(oldVal)\n                        ? oldVal.__staleWhileFetching\n                        : oldVal;\n                    if (oldValue !== undefined)\n                        status.oldValue = oldValue;\n                }\n            }\n            else if (status) {\n                status.set = 'update';\n            }\n        }\n        if (ttl !== 0 && !this.#ttls) {\n            this.#initializeTTLTracking();\n        }\n        if (this.#ttls) {\n            if (!noUpdateTTL) {\n                this.#setItemTTL(index, ttl, start);\n            }\n            if (status)\n                this.#statusTTL(status, index);\n        }\n        if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return this;\n    }\n    /**\n     * Evict the least recently used item, returning its value or\n     * `undefined` if cache is empty.\n     */\n    pop() {\n        try {\n            while (this.#size) {\n                const val = this.#valList[this.#head];\n                this.#evict(true);\n                if (this.#isBackgroundFetch(val)) {\n                    if (val.__staleWhileFetching) {\n                        return val.__staleWhileFetching;\n                    }\n                }\n                else if (val !== undefined) {\n                    return val;\n                }\n            }\n        }\n        finally {\n            if (this.#hasDisposeAfter && this.#disposed) {\n                const dt = this.#disposed;\n                let task;\n                while ((task = dt?.shift())) {\n                    this.#disposeAfter?.(...task);\n                }\n            }\n        }\n    }\n    #evict(free) {\n        const head = this.#head;\n        const k = this.#keyList[head];\n        const v = this.#valList[head];\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('evicted'));\n        }\n        else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n                this.#dispose?.(v, k, 'evict');\n            }\n            if (this.#hasDisposeAfter) {\n                this.#disposed?.push([v, k, 'evict']);\n            }\n        }\n        this.#removeItemSize(head);\n        // if we aren't about to use the index, then null these out\n        if (free) {\n            this.#keyList[head] = undefined;\n            this.#valList[head] = undefined;\n            this.#free.push(head);\n        }\n        if (this.#size === 1) {\n            this.#head = this.#tail = 0;\n            this.#free.length = 0;\n        }\n        else {\n            this.#head = this.#next[head];\n        }\n        this.#keyMap.delete(k);\n        this.#size--;\n        return head;\n    }\n    /**\n     * Check if a key is in the cache, without updating the recency of use.\n     * Will return false if the item is stale, even though it is technically\n     * in the cache.\n     *\n     * Will not update item age unless\n     * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n     */\n    has(k, hasOptions = {}) {\n        const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v) &&\n                v.__staleWhileFetching === undefined) {\n                return false;\n            }\n            if (!this.#isStale(index)) {\n                if (updateAgeOnHas) {\n                    this.#updateItemAge(index);\n                }\n                if (status) {\n                    status.has = 'hit';\n                    this.#statusTTL(status, index);\n                }\n                return true;\n            }\n            else if (status) {\n                status.has = 'stale';\n                this.#statusTTL(status, index);\n            }\n        }\n        else if (status) {\n            status.has = 'miss';\n        }\n        return false;\n    }\n    /**\n     * Like {@link LRUCache#get} but doesn't update recency or delete stale\n     * items.\n     *\n     * Returns `undefined` if the item is stale, unless\n     * {@link LRUCache.OptionsBase.allowStale} is set.\n     */\n    peek(k, peekOptions = {}) {\n        const { allowStale = this.allowStale } = peekOptions;\n        const index = this.#keyMap.get(k);\n        if (index === undefined ||\n            (!allowStale && this.#isStale(index))) {\n            return;\n        }\n        const v = this.#valList[index];\n        // either stale and allowed, or forcing a refresh of non-stale value\n        return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n    }\n    #backgroundFetch(k, index, options, context) {\n        const v = index === undefined ? undefined : this.#valList[index];\n        if (this.#isBackgroundFetch(v)) {\n            return v;\n        }\n        const ac = new AC();\n        const { signal } = options;\n        // when/if our AC signals, then stop listening to theirs.\n        signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n            signal: ac.signal,\n        });\n        const fetchOpts = {\n            signal: ac.signal,\n            options,\n            context,\n        };\n        const cb = (v, updateCache = false) => {\n            const { aborted } = ac.signal;\n            const ignoreAbort = options.ignoreFetchAbort && v !== undefined;\n            if (options.status) {\n                if (aborted && !updateCache) {\n                    options.status.fetchAborted = true;\n                    options.status.fetchError = ac.signal.reason;\n                    if (ignoreAbort)\n                        options.status.fetchAbortIgnored = true;\n                }\n                else {\n                    options.status.fetchResolved = true;\n                }\n            }\n            if (aborted && !ignoreAbort && !updateCache) {\n                return fetchFail(ac.signal.reason);\n            }\n            // either we didn't abort, and are still here, or we did, and ignored\n            const bf = p;\n            if (this.#valList[index] === p) {\n                if (v === undefined) {\n                    if (bf.__staleWhileFetching) {\n                        this.#valList[index] = bf.__staleWhileFetching;\n                    }\n                    else {\n                        this.delete(k);\n                    }\n                }\n                else {\n                    if (options.status)\n                        options.status.fetchUpdated = true;\n                    this.set(k, v, fetchOpts.options);\n                }\n            }\n            return v;\n        };\n        const eb = (er) => {\n            if (options.status) {\n                options.status.fetchRejected = true;\n                options.status.fetchError = er;\n            }\n            return fetchFail(er);\n        };\n        const fetchFail = (er) => {\n            const { aborted } = ac.signal;\n            const allowStaleAborted = aborted && options.allowStaleOnFetchAbort;\n            const allowStale = allowStaleAborted || options.allowStaleOnFetchRejection;\n            const noDelete = allowStale || options.noDeleteOnFetchRejection;\n            const bf = p;\n            if (this.#valList[index] === p) {\n                // if we allow stale on fetch rejections, then we need to ensure that\n                // the stale value is not removed from the cache when the fetch fails.\n                const del = !noDelete || bf.__staleWhileFetching === undefined;\n                if (del) {\n                    this.delete(k);\n                }\n                else if (!allowStaleAborted) {\n                    // still replace the *promise* with the stale value,\n                    // since we are done with the promise at this point.\n                    // leave it untouched if we're still waiting for an\n                    // aborted background fetch that hasn't yet returned.\n                    this.#valList[index] = bf.__staleWhileFetching;\n                }\n            }\n            if (allowStale) {\n                if (options.status && bf.__staleWhileFetching !== undefined) {\n                    options.status.returnedStale = true;\n                }\n                return bf.__staleWhileFetching;\n            }\n            else if (bf.__returned === bf) {\n                throw er;\n            }\n        };\n        const pcall = (res, rej) => {\n            const fmp = this.#fetchMethod?.(k, v, fetchOpts);\n            if (fmp && fmp instanceof Promise) {\n                fmp.then(v => res(v === undefined ? undefined : v), rej);\n            }\n            // ignored, we go until we finish, regardless.\n            // defer check until we are actually aborting,\n            // so fetchMethod can override.\n            ac.signal.addEventListener('abort', () => {\n                if (!options.ignoreFetchAbort ||\n                    options.allowStaleOnFetchAbort) {\n                    res(undefined);\n                    // when it eventually resolves, update the cache.\n                    if (options.allowStaleOnFetchAbort) {\n                        res = v => cb(v, true);\n                    }\n                }\n            });\n        };\n        if (options.status)\n            options.status.fetchDispatched = true;\n        const p = new Promise(pcall).then(cb, eb);\n        const bf = Object.assign(p, {\n            __abortController: ac,\n            __staleWhileFetching: v,\n            __returned: undefined,\n        });\n        if (index === undefined) {\n            // internal, don't expose status.\n            this.set(k, bf, { ...fetchOpts.options, status: undefined });\n            index = this.#keyMap.get(k);\n        }\n        else {\n            this.#valList[index] = bf;\n        }\n        return bf;\n    }\n    #isBackgroundFetch(p) {\n        if (!this.#hasFetchMethod)\n            return false;\n        const b = p;\n        return (!!b &&\n            b instanceof Promise &&\n            b.hasOwnProperty('__staleWhileFetching') &&\n            b.__abortController instanceof AC);\n    }\n    async fetch(k, fetchOptions = {}) {\n        const { \n        // get options\n        allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, \n        // set options\n        ttl = this.ttl, noDisposeOnSet = this.noDisposeOnSet, size = 0, sizeCalculation = this.sizeCalculation, noUpdateTTL = this.noUpdateTTL, \n        // fetch exclusive options\n        noDeleteOnFetchRejection = this.noDeleteOnFetchRejection, allowStaleOnFetchRejection = this.allowStaleOnFetchRejection, ignoreFetchAbort = this.ignoreFetchAbort, allowStaleOnFetchAbort = this.allowStaleOnFetchAbort, context, forceRefresh = false, status, signal, } = fetchOptions;\n        if (!this.#hasFetchMethod) {\n            if (status)\n                status.fetch = 'get';\n            return this.get(k, {\n                allowStale,\n                updateAgeOnGet,\n                noDeleteOnStaleGet,\n                status,\n            });\n        }\n        const options = {\n            allowStale,\n            updateAgeOnGet,\n            noDeleteOnStaleGet,\n            ttl,\n            noDisposeOnSet,\n            size,\n            sizeCalculation,\n            noUpdateTTL,\n            noDeleteOnFetchRejection,\n            allowStaleOnFetchRejection,\n            allowStaleOnFetchAbort,\n            ignoreFetchAbort,\n            status,\n            signal,\n        };\n        let index = this.#keyMap.get(k);\n        if (index === undefined) {\n            if (status)\n                status.fetch = 'miss';\n            const p = this.#backgroundFetch(k, index, options, context);\n            return (p.__returned = p);\n        }\n        else {\n            // in cache, maybe already fetching\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                const stale = allowStale && v.__staleWhileFetching !== undefined;\n                if (status) {\n                    status.fetch = 'inflight';\n                    if (stale)\n                        status.returnedStale = true;\n                }\n                return stale ? v.__staleWhileFetching : (v.__returned = v);\n            }\n            // if we force a refresh, that means do NOT serve the cached value,\n            // unless we are already in the process of refreshing the cache.\n            const isStale = this.#isStale(index);\n            if (!forceRefresh && !isStale) {\n                if (status)\n                    status.fetch = 'hit';\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                if (status)\n                    this.#statusTTL(status, index);\n                return v;\n            }\n            // ok, it is stale or a forced refresh, and not already fetching.\n            // refresh the cache.\n            const p = this.#backgroundFetch(k, index, options, context);\n            const hasStale = p.__staleWhileFetching !== undefined;\n            const staleVal = hasStale && allowStale;\n            if (status) {\n                status.fetch = isStale ? 'stale' : 'refresh';\n                if (staleVal && isStale)\n                    status.returnedStale = true;\n            }\n            return staleVal ? p.__staleWhileFetching : (p.__returned = p);\n        }\n    }\n    /**\n     * Return a value from the cache. Will update the recency of the cache\n     * entry found.\n     *\n     * If the key is not found, get() will return `undefined`.\n     */\n    get(k, getOptions = {}) {\n        const { allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, status, } = getOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const value = this.#valList[index];\n            const fetching = this.#isBackgroundFetch(value);\n            if (status)\n                this.#statusTTL(status, index);\n            if (this.#isStale(index)) {\n                if (status)\n                    status.get = 'stale';\n                // delete only if not an in-flight background fetch\n                if (!fetching) {\n                    if (!noDeleteOnStaleGet) {\n                        this.delete(k);\n                    }\n                    if (status && allowStale)\n                        status.returnedStale = true;\n                    return allowStale ? value : undefined;\n                }\n                else {\n                    if (status &&\n                        allowStale &&\n                        value.__staleWhileFetching !== undefined) {\n                        status.returnedStale = true;\n                    }\n                    return allowStale ? value.__staleWhileFetching : undefined;\n                }\n            }\n            else {\n                if (status)\n                    status.get = 'hit';\n                // if we're currently fetching it, we don't actually have it yet\n                // it's not stale, which means this isn't a staleWhileRefetching.\n                // If it's not stale, and fetching, AND has a __staleWhileFetching\n                // value, then that means the user fetched with {forceRefresh:true},\n                // so it's safe to return that value.\n                if (fetching) {\n                    return value.__staleWhileFetching;\n                }\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                return value;\n            }\n        }\n        else if (status) {\n            status.get = 'miss';\n        }\n    }\n    #connect(p, n) {\n        this.#prev[n] = p;\n        this.#next[p] = n;\n    }\n    #moveToTail(index) {\n        // if tail already, nothing to do\n        // if head, move head to next[index]\n        // else\n        //   move next[prev[index]] to next[index] (head has no prev)\n        //   move prev[next[index]] to prev[index]\n        // prev[index] = tail\n        // next[tail] = index\n        // tail = index\n        if (index !== this.#tail) {\n            if (index === this.#head) {\n                this.#head = this.#next[index];\n            }\n            else {\n                this.#connect(this.#prev[index], this.#next[index]);\n            }\n            this.#connect(this.#tail, index);\n            this.#tail = index;\n        }\n    }\n    /**\n     * Deletes a key out of the cache.\n     * Returns true if the key was deleted, false otherwise.\n     */\n    delete(k) {\n        let deleted = false;\n        if (this.#size !== 0) {\n            const index = this.#keyMap.get(k);\n            if (index !== undefined) {\n                deleted = true;\n                if (this.#size === 1) {\n                    this.clear();\n                }\n                else {\n                    this.#removeItemSize(index);\n                    const v = this.#valList[index];\n                    if (this.#isBackgroundFetch(v)) {\n                        v.__abortController.abort(new Error('deleted'));\n                    }\n                    else if (this.#hasDispose || this.#hasDisposeAfter) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(v, k, 'delete');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([v, k, 'delete']);\n                        }\n                    }\n                    this.#keyMap.delete(k);\n                    this.#keyList[index] = undefined;\n                    this.#valList[index] = undefined;\n                    if (index === this.#tail) {\n                        this.#tail = this.#prev[index];\n                    }\n                    else if (index === this.#head) {\n                        this.#head = this.#next[index];\n                    }\n                    else {\n                        const pi = this.#prev[index];\n                        this.#next[pi] = this.#next[index];\n                        const ni = this.#next[index];\n                        this.#prev[ni] = this.#prev[index];\n                    }\n                    this.#size--;\n                    this.#free.push(index);\n                }\n            }\n        }\n        if (this.#hasDisposeAfter && this.#disposed?.length) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Clear the cache entirely, throwing away all values.\n     */\n    clear() {\n        for (const index of this.#rindexes({ allowStale: true })) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                v.__abortController.abort(new Error('deleted'));\n            }\n            else {\n                const k = this.#keyList[index];\n                if (this.#hasDispose) {\n                    this.#dispose?.(v, k, 'delete');\n                }\n                if (this.#hasDisposeAfter) {\n                    this.#disposed?.push([v, k, 'delete']);\n                }\n            }\n        }\n        this.#keyMap.clear();\n        this.#valList.fill(undefined);\n        this.#keyList.fill(undefined);\n        if (this.#ttls && this.#starts) {\n            this.#ttls.fill(0);\n            this.#starts.fill(0);\n        }\n        if (this.#sizes) {\n            this.#sizes.fill(0);\n        }\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free.length = 0;\n        this.#calculatedSize = 0;\n        this.#size = 0;\n        if (this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n    }\n}\n//# sourceMappingURL=index.js.map", null, null, null, null, "<template>\n  <div class=\"fs-container\">\n    <div class=\"box\">\n      <div class=\"inner\" :style=\"computedInnerStyle\">\n        <div class=\"header\">\n          <!-- header -->\n          <slot name=\"header\"></slot>\n        </div>\n        <div class=\"body\" :style=\"computedBodyStyle\">\n          <!-- body, 高度自适应 -->\n          <slot></slot>\n        </div>\n        <div class=\"footer\">\n          <!-- footer -->\n          <slot name=\"footer\"></slot>\n        </div>\n      </div>\n    </div>\n    <slot name=\"box\"></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from \"vue\";\nimport { useMerge } from \"../../use\";\n/**\n * crud的容器，根据外部高度自适应\n */\nexport default defineComponent({\n  name: \"FsContainer\",\n  props: {\n    /**\n     * 是否固定高度\n     */\n    fixedHeight: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * body的样式\n     */\n    bodyStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * inner的样式\n     */\n    innerStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const computedInnerStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ position: \"relative\" }, props.innerStyle);\n      }\n      return props.innerStyle;\n    });\n\n    const computedBodyStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ flex: \"unset\" }, props.bodyStyle);\n      }\n      return props.bodyStyle;\n    });\n\n    return {\n      computedInnerStyle,\n      computedBodyStyle\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-container {\n  &.compact {\n    padding: 0;\n  }\n  padding: 0 20px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .box {\n    height: 100%;\n    width: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    .inner {\n      position: absolute;\n      width: 100%;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      flex-direction: column;\n      .header {\n        flex-shrink: 0;\n      }\n      .body {\n        flex: 1;\n        overflow-y: auto;\n      }\n      .footer {\n        flex-shrink: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-container\">\n    <div class=\"box\">\n      <div class=\"inner\" :style=\"computedInnerStyle\">\n        <div class=\"header\">\n          <!-- header -->\n          <slot name=\"header\"></slot>\n        </div>\n        <div class=\"body\" :style=\"computedBodyStyle\">\n          <!-- body, 高度自适应 -->\n          <slot></slot>\n        </div>\n        <div class=\"footer\">\n          <!-- footer -->\n          <slot name=\"footer\"></slot>\n        </div>\n      </div>\n    </div>\n    <slot name=\"box\"></slot>\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, computed } from \"vue\";\nimport { useMerge } from \"../../use\";\n/**\n * crud的容器，根据外部高度自适应\n */\nexport default defineComponent({\n  name: \"FsContainer\",\n  props: {\n    /**\n     * 是否固定高度\n     */\n    fixedHeight: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * body的样式\n     */\n    bodyStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * inner的样式\n     */\n    innerStyle: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const computedInnerStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ position: \"relative\" }, props.innerStyle);\n      }\n      return props.innerStyle;\n    });\n\n    const computedBodyStyle = computed(() => {\n      if (props.fixedHeight === false) {\n        return merge({ flex: \"unset\" }, props.bodyStyle);\n      }\n      return props.bodyStyle;\n    });\n\n    return {\n      computedInnerStyle,\n      computedBodyStyle\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-container {\n  &.compact {\n    padding: 0;\n  }\n  padding: 0 20px;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  .box {\n    height: 100%;\n    width: 100%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    .inner {\n      position: absolute;\n      width: 100%;\n      top: 0;\n      bottom: 0;\n      display: flex;\n      flex-direction: column;\n      .header {\n        flex-shrink: 0;\n      }\n      .body {\n        flex: 1;\n        overflow-y: auto;\n      }\n      .footer {\n        flex-shrink: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-default\">\n    <template #header>\n      <div class=\"fs-crud-header\">\n        <div class=\"fs-header-top\">\n          <slot name=\"header-top\"></slot>\n        </div>\n        <slot name=\"search\"></slot>\n        <div class=\"fs-header-middle\">\n          <slot name=\"header-middle\"></slot>\n        </div>\n        <slot name=\"actionbar\"></slot>\n        <slot name=\"toolbar\"></slot>\n        <div class=\"fs-header-bottom\">\n          <slot name=\"header-bottom\"></slot>\n        </div>\n        <slot name=\"tabs\"></slot>\n      </div>\n    </template>\n\n    <!-- 默认插槽 -->\n    <slot></slot>\n    <!-- table -->\n    <slot name=\"table\"></slot>\n\n    <slot name=\"form\"> </slot>\n\n    <template #footer>\n      <div class=\"fs-crud-footer\">\n        <slot name=\"footer-top\"></slot>\n        <slot name=\"pagination\"></slot>\n        <slot name=\"footer-bottom\"></slot>\n      </div>\n    </template>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n/**\n * 默认布局\n */\nexport default defineComponent({\n  name: \"FsLayoutDefault\"\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-default {\n  .fs-tabs-filter {\n    margin-top: 10px;\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-default\">\n    <template #header>\n      <div class=\"fs-crud-header\">\n        <div class=\"fs-header-top\">\n          <slot name=\"header-top\"></slot>\n        </div>\n        <slot name=\"search\"></slot>\n        <div class=\"fs-header-middle\">\n          <slot name=\"header-middle\"></slot>\n        </div>\n        <slot name=\"actionbar\"></slot>\n        <slot name=\"toolbar\"></slot>\n        <div class=\"fs-header-bottom\">\n          <slot name=\"header-bottom\"></slot>\n        </div>\n        <slot name=\"tabs\"></slot>\n      </div>\n    </template>\n\n    <!-- 默认插槽 -->\n    <slot></slot>\n    <!-- table -->\n    <slot name=\"table\"></slot>\n\n    <slot name=\"form\"> </slot>\n\n    <template #footer>\n      <div class=\"fs-crud-footer\">\n        <slot name=\"footer-top\"></slot>\n        <slot name=\"pagination\"></slot>\n        <slot name=\"footer-bottom\"></slot>\n      </div>\n    </template>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n/**\n * 默认布局\n */\nexport default defineComponent({\n  name: \"FsLayoutDefault\"\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-default {\n  .fs-tabs-filter {\n    margin-top: 10px;\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-card\">\n    <template v-if=\"searchShow\" #header>\n      <div class=\"fs-header-top\">\n        <slot name=\"header-top\"></slot>\n      </div>\n      <component :is=\"cardComponentName\">\n        <slot name=\"search\"></slot>\n      </component>\n      <div class=\"fs-header-bottom\">\n        <slot name=\"header-bottom\"></slot>\n      </div>\n    </template>\n\n    <fs-container>\n      <template #header>\n        <slot name=\"tabs\"></slot>\n      </template>\n      <component :is=\"cardComponentName\" class=\"fs-layout-card-body\">\n        <template #title>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <template #header>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <fs-container>\n          <!-- 默认插槽 -->\n          <slot></slot>\n          <!-- table -->\n          <slot name=\"table\"></slot>\n          <slot name=\"form\"></slot>\n          <template #footer>\n            <div class=\"fs-crud-footer\">\n              <slot name=\"footer-top\"></slot>\n              <slot name=\"pagination\"></slot>\n              <slot name=\"footer-bottom\"></slot>\n            </div>\n          </template>\n        </fs-container>\n      </component>\n    </fs-container>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, ref } from \"vue\";\nimport { useUi } from \"../../use/use-ui\";\n/**\n * card布局\n */\nexport default defineComponent({\n  name: \"FsLayoutCard\",\n  setup() {\n    const getCrudBinding = inject(\"get:crudBinding\");\n    const searchShow = computed(() => {\n      if (getCrudBinding == null) {\n        return true;\n      }\n      // @ts-ignore\n      return getCrudBinding()?.search?.show;\n    });\n\n    const { ui } = useUi();\n\n    const cardComponentName = ref(ui.card.name);\n    return {\n      searchShow,\n      cardComponentName\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-card {\n  & > .box > .inner > .header {\n    margin: 10px 10px 5px 10px;\n  }\n  & > .box > .inner > .body {\n    margin: 5px 10px 10px 10px;\n  }\n  .top-bar {\n    display: flex;\n    justify-content: space-between;\n  }\n  .fs-container {\n    padding: 0;\n    .box {\n      .inner {\n        .header {\n          .ant-card-body {\n            padding: 14px;\n          }\n        }\n      }\n    }\n  }\n  .fs-layout-card-body {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    .ant-card-head {\n      min-height: 0;\n      padding: 0px;\n      .ant-card-head-title {\n        padding: 0;\n      }\n    }\n\n    .el-card__header {\n      padding: 0;\n    }\n\n    .n-card-header {\n      padding: 0px;\n      border-bottom: 1px solid #eee;\n    }\n    .n-card__content {\n      padding: 10px;\n    }\n\n    .fs-crud-actionbar {\n      margin: 10px;\n      display: flex;\n      align-items: center;\n    }\n    .fs-crud-toolbar {\n      margin: 10px;\n      display: flex;\n      align-items: center;\n    }\n\n    .ant-card-body {\n      flex: 1;\n      padding: 10px;\n    }\n    .el-card__body {\n      flex: 1;\n      padding: 10px;\n    }\n  }\n\n  .fs-tabs-filter {\n    margin-bottom: -1px;\n    .n-tabs .n-tabs-nav.n-tabs-nav--card-type .n-tabs-tab {\n      &.n-tabs-tab--active {\n        background-color: #fff;\n      }\n      background-color: #ffffff60;\n    }\n\n    .el-tabs--card > .el-tabs__header .el-tabs__item {\n      &.is-active {\n        background-color: #fff;\n      }\n      background-color: #ffffff80;\n    }\n  }\n}\n</style>\n", "<template>\n  <fs-container class=\"fs-layout-card\">\n    <template v-if=\"searchShow\" #header>\n      <div class=\"fs-header-top\">\n        <slot name=\"header-top\"></slot>\n      </div>\n      <component :is=\"cardComponentName\">\n        <slot name=\"search\"></slot>\n      </component>\n      <div class=\"fs-header-bottom\">\n        <slot name=\"header-bottom\"></slot>\n      </div>\n    </template>\n\n    <fs-container>\n      <template #header>\n        <slot name=\"tabs\"></slot>\n      </template>\n      <component :is=\"cardComponentName\" class=\"fs-layout-card-body\">\n        <template #title>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <template #header>\n          <div class=\"top-bar\">\n            <slot name=\"actionbar\"></slot>\n            <slot name=\"toolbar\"></slot>\n          </div>\n        </template>\n        <fs-container>\n          <!-- 默认插槽 -->\n          <slot></slot>\n          <!-- table -->\n          <slot name=\"table\"></slot>\n          <slot name=\"form\"></slot>\n          <template #footer>\n            <div class=\"fs-crud-footer\">\n              <slot name=\"footer-top\"></slot>\n              <slot name=\"pagination\"></slot>\n              <slot name=\"footer-bottom\"></slot>\n            </div>\n          </template>\n        </fs-container>\n      </component>\n    </fs-container>\n  </fs-container>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, inject, ref } from \"vue\";\nimport { useUi } from \"../../use/use-ui\";\n/**\n * card布局\n */\nexport default defineComponent({\n  name: \"FsLayoutCard\",\n  setup() {\n    const getCrudBinding = inject(\"get:crudBinding\");\n    const searchShow = computed(() => {\n      if (getCrudBinding == null) {\n        return true;\n      }\n      // @ts-ignore\n      return getCrudBinding()?.search?.show;\n    });\n\n    const { ui } = useUi();\n\n    const cardComponentName = ref(ui.card.name);\n    return {\n      searchShow,\n      cardComponentName\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-layout-card {\n  & > .box > .inner > .header {\n    margin: 10px 10px 5px 10px;\n  }\n  & > .box > .inner > .body {\n    margin: 5px 10px 10px 10px;\n  }\n  .top-bar {\n    display: flex;\n    justify-content: space-between;\n  }\n  .fs-container {\n    padding: 0;\n    .box {\n      .inner {\n        .header {\n          .ant-card-body {\n            padding: 14px;\n          }\n        }\n      }\n    }\n  }\n  .fs-layout-card-body {\n    height: 100%;\n    display: flex;\n    flex-direction: column;\n\n    .ant-card-head {\n      min-height: 0;\n      padding: 0px;\n      .ant-card-head-title {\n        padding: 0;\n      }\n    }\n\n    .el-card__header {\n      padding: 0;\n    }\n\n    .n-card-header {\n      padding: 0px;\n      border-bottom: 1px solid #eee;\n    }\n    .n-card__content {\n      padding: 10px;\n    }\n\n    .fs-crud-actionbar {\n      margin: 10px;\n      display: flex;\n      align-items: center;\n    }\n    .fs-crud-toolbar {\n      margin: 10px;\n      display: flex;\n      align-items: center;\n    }\n\n    .ant-card-body {\n      flex: 1;\n      padding: 10px;\n    }\n    .el-card__body {\n      flex: 1;\n      padding: 10px;\n    }\n  }\n\n  .fs-tabs-filter {\n    margin-bottom: -1px;\n    .n-tabs .n-tabs-nav.n-tabs-nav--card-type .n-tabs-tab {\n      &.n-tabs-tab--active {\n        background-color: #fff;\n      }\n      background-color: #ffffff60;\n    }\n\n    .el-tabs--card > .el-tabs__header .el-tabs__item {\n      &.is-active {\n        background-color: #fff;\n      }\n      background-color: #ffffff80;\n    }\n  }\n}\n</style>\n", null, null, "<template>\n  <span class=\"fs-iconify\" :class=\"{ 'fs-iconify-spin': spin }\">\n    <Icon ref=\"iconifyRef\" :icon=\"icon\" />\n  </span>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, nextTick, onMounted, ref, unref, watch } from \"vue\";\nimport { Icon } from \"@iconify/vue\";\n/**\n * iconify 按需加载图标组件\n * https://iconify.design/icon-sets/ion/\n */\nexport default defineComponent({\n  name: \"FsIconify\",\n  components: { Icon },\n  props: {\n    /**\n     * 图标名称\n     */\n    icon: {\n      type: String\n    },\n    /**\n     * 旋转\n     */\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, ctx) {\n    const iconifyRef = ref(null);\n    return { iconifyRef };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-iconify {\n  //display: inline-flex !important;\n  display: inline-flex;\n  align-items: center;\n  &-spin {\n    svg {\n      animation: fsLoadingCircle 1s infinite linear;\n    }\n  }\n\n  &.fs-icon {\n    display: inline-flex;\n  }\n}\n\n@keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@-webkit-keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n//span.iconify {\n//  display: block;\n//  min-width: 1em;\n//  min-height: 1em;\n//  // background-color: @iconify-bg-color;\n//  border-radius: 100%;\n//}\n</style>\n", "<template>\n  <span class=\"fs-iconify\" :class=\"{ 'fs-iconify-spin': spin }\">\n    <Icon ref=\"iconifyRef\" :icon=\"icon\" />\n  </span>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, nextTick, onMounted, ref, unref, watch } from \"vue\";\nimport { Icon } from \"@iconify/vue\";\n/**\n * iconify 按需加载图标组件\n * https://iconify.design/icon-sets/ion/\n */\nexport default defineComponent({\n  name: \"FsIconify\",\n  components: { Icon },\n  props: {\n    /**\n     * 图标名称\n     */\n    icon: {\n      type: String\n    },\n    /**\n     * 旋转\n     */\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props, ctx) {\n    const iconifyRef = ref(null);\n    return { iconifyRef };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-iconify {\n  //display: inline-flex !important;\n  display: inline-flex;\n  align-items: center;\n  &-spin {\n    svg {\n      animation: fsLoadingCircle 1s infinite linear;\n    }\n  }\n\n  &.fs-icon {\n    display: inline-flex;\n  }\n}\n\n@keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n@-webkit-keyframes fsLoadingCircle {\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n}\n\n//span.iconify {\n//  display: block;\n//  min-width: 1em;\n//  min-height: 1em;\n//  // background-color: @iconify-bg-color;\n//  border-radius: 100%;\n//}\n</style>\n", "<template>\n  <span :class=\"['fs-icon-svg', spin && 'fs-icon-spin']\">\n    <svg class=\"fs-icon-svg-content\" aria-hidden=\"true\">\n      <use :xlink:href=\"symbolId\"></use>\n    </svg>\n  </span>\n</template>\n<script lang=\"ts\">\nimport type { CSSProperties } from \"vue\";\nimport { defineComponent, computed } from \"vue\";\n\nexport default defineComponent({\n  name: \"FsSvgIcon\",\n  props: {\n    icon: {\n      type: String,\n      required: true\n    },\n    size: {\n      type: [Number, String],\n      default: 16\n    },\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const symbolId = computed(() => `#${props.icon}`);\n\n    const getStyle = computed((): CSSProperties => {\n      const { size } = props;\n      let s = `${size}`;\n      s = `${s.replace(\"px\", \"\")}px`;\n      return {\n        width: s,\n        height: s\n      };\n    });\n    return { symbolId, getStyle };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-icon-svg {\n  display: inline-block;\n  vertical-align: middle;\n  &.fs-icon-spin {\n    animation: loadingCircle 1s infinite linear;\n  }\n\n  .fs-icon-svg-content {\n    width: 1em;\n    height: 1em;\n    vertical-align: -0.15em;\n    fill: currentColor;\n    overflow: hidden;\n  }\n}\n</style>\n", "<template>\n  <span :class=\"['fs-icon-svg', spin && 'fs-icon-spin']\">\n    <svg class=\"fs-icon-svg-content\" aria-hidden=\"true\">\n      <use :xlink:href=\"symbolId\"></use>\n    </svg>\n  </span>\n</template>\n<script lang=\"ts\">\nimport type { CSSProperties } from \"vue\";\nimport { defineComponent, computed } from \"vue\";\n\nexport default defineComponent({\n  name: \"FsSvgIcon\",\n  props: {\n    icon: {\n      type: String,\n      required: true\n    },\n    size: {\n      type: [Number, String],\n      default: 16\n    },\n    spin: {\n      type: Boolean,\n      default: false\n    }\n  },\n  setup(props) {\n    const symbolId = computed(() => `#${props.icon}`);\n\n    const getStyle = computed((): CSSProperties => {\n      const { size } = props;\n      let s = `${size}`;\n      s = `${s.replace(\"px\", \"\")}px`;\n      return {\n        width: s,\n        height: s\n      };\n    });\n    return { symbolId, getStyle };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-icon-svg {\n  display: inline-block;\n  vertical-align: middle;\n  &.fs-icon-spin {\n    animation: loadingCircle 1s infinite linear;\n  }\n\n  .fs-icon-svg-content {\n    width: 1em;\n    height: 1em;\n    vertical-align: -0.15em;\n    fill: currentColor;\n    overflow: hidden;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-label\">\n    <div class=\"label\" v-bind=\"labelAttrs\">\n      {{ label }}\n      <slot name=\"label\"></slot>\n    </div>\n    <div class=\"content\" v-bind=\"contentAttrs\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * label组件\n */\nexport default defineComponent({\n  name: \"FsLabel\",\n  props: {\n    label: {\n      type: String,\n      default: \"\"\n    },\n    labelAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    contentAttrs: {\n      type: Object,\n      default: () => ({})\n    }\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-label {\n  display: flex;\n  align-items: center;\n  .label {\n    display: flex;\n    text-align: right;\n    margin-right: 10px;\n    min-width: 100px;\n    justify-content: flex-end;\n  }\n  .content {\n    flex: 1;\n    display: flex;\n    min-width: 100px;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: left;\n    align-items: center;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-label\">\n    <div class=\"label\" v-bind=\"labelAttrs\">\n      {{ label }}\n      <slot name=\"label\"></slot>\n    </div>\n    <div class=\"content\" v-bind=\"contentAttrs\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * label组件\n */\nexport default defineComponent({\n  name: \"FsLabel\",\n  props: {\n    label: {\n      type: String,\n      default: \"\"\n    },\n    labelAttrs: {\n      type: Object,\n      default: () => ({})\n    },\n    contentAttrs: {\n      type: Object,\n      default: () => ({})\n    }\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-label {\n  display: flex;\n  align-items: center;\n  .label {\n    display: flex;\n    text-align: right;\n    margin-right: 10px;\n    min-width: 100px;\n    justify-content: flex-end;\n  }\n  .content {\n    flex: 1;\n    display: flex;\n    min-width: 100px;\n    flex-direction: row;\n    flex-wrap: nowrap;\n    justify-content: left;\n    align-items: center;\n  }\n}\n</style>\n", null, "<template>\n  <div class=\"fs-box\">\n    <slot></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 单纯的包裹一个子组件\n */\nexport default defineComponent({\n  name: \"FsBox\"\n});\n</script>\n", "<template>\n  <div class=\"fs-box\">\n    <slot></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 单纯的包裹一个子组件\n */\nexport default defineComponent({\n  name: \"FsBox\"\n});\n</script>\n", null, null, null, "<template>\n  <component\n    :is=\"ui.form.name\"\n    ref=\"formRef\"\n    class=\"fs-form\"\n    :class=\"{\n      'fs-form-grid': display === 'grid',\n      'fs-form-flex': display === 'flex',\n      'fs-form-invalid': validRef === false\n    }\"\n    onsubmit=\"event.preventDefault();\"\n    :model=\"form\"\n  >\n    <!-- row -->\n    <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n      <!-- col -->\n      <template v-for=\"item in computedDefaultColumns\" :key=\"item?.key\">\n        <component :is=\"ui.col.name\" v-if=\"formItemShow(item)\" class=\"fs-col\" v-bind=\"item.col\">\n          <fs-form-item\n            v-if=\"item.blank !== true\"\n            :ref=\"\n              (el: any) => {\n                if (el) {\n                  formItemRefs[item.key] = el;\n                }\n              }\n            \"\n            :item=\"item\"\n            :helper=\"helper\"\n            :model-value=\"get(form, item.key)\"\n            :form-slot=\"mergedSlots['form_' + item.key]\"\n            :get-context-fn=\"getContextFn\"\n            @update:model-value=\"set(form, item.key, $event)\"\n          />\n        </component>\n      </template>\n    </component>\n    <component\n      :is=\"computedGroup.wrapper.parent\"\n      v-if=\"computedGroup.wrapper\"\n      v-model:[ui.collapse.modelValue]=\"groupActiveKey\"\n      style=\"width: 100%\"\n      v-bind=\"computedGroup\"\n    >\n      <template v-for=\"(groupItem, groupKey) of computedGroup.groups\" :key=\"groupKey\">\n        <component\n          :is=\"computedGroup.wrapper.child\"\n          v-if=\"groupItemShow(groupItem)\"\n          :[ui.collapse.keyName]=\"groupKey\"\n          v-bind=\"groupItem\"\n          :class=\"{ 'fs-form-group-error': errorsRef['group.' + groupKey] }\"\n        >\n          <template v-for=\"(item, slotName) of groupItem.slots\" :key=\"slotName\" #[slotName]=\"scope\">\n            <fs-render :render-func=\"item\" :scope=\"{ ...scope, hasError: errorsRef['group.' + groupKey] }\" />\n          </template>\n          <!-- row -->\n          <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n            <!-- col -->\n            <template v-for=\"key in groupItem.columns\" :key=\"key\">\n              <component\n                :is=\"ui.col.name\"\n                v-if=\"formItemShow(computedColumns[key])\"\n                class=\"fs-col\"\n                v-bind=\"mergeCol(groupItem.col, computedColumns[key]?.col)\"\n              >\n                <fs-form-item\n                  v-if=\"computedColumns[key] && computedColumns[key]?.blank !== true\"\n                  :ref=\"\n                    (el: any) => {\n                      if (el) {\n                        formItemRefs[key] = el;\n                      }\n                    }\n                  \"\n                  :item=\"computedColumns[key]\"\n                  :model-value=\"get(form, key)\"\n                  :form-slot=\"mergedSlots['form_' + key]\"\n                  :get-context-fn=\"getContextFn\"\n                  @update:model-value=\"set(form, key, $event)\"\n                />\n              </component>\n            </template>\n          </component>\n        </component>\n      </template>\n    </component>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  onMounted,\n  reactive,\n  Ref,\n  ref,\n  toRaw,\n  unref,\n  UnwrapNestedRefs,\n  watch\n} from \"vue\";\nimport _ from \"lodash-es\";\nimport { ComputeValue, useCompute } from \"../../use/use-compute\";\nimport logger from \"../../utils/util.log\";\nimport { useMerge } from \"../../use/use-merge\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { FormScopeContext, SetFormDataOptions, useUi, utils } from \"../../index\";\n\n/**\n * 配置化的表单组件\n * 暴露的方法：\n * ref.submit() = 提交表单\n * ref.reset() = 重置表单\n */\nexport default defineComponent({\n  name: \"FsForm\",\n  props: {\n    /**\n     * 初始表单数据\n     **/\n    initialForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 字段模版\n     * {\n     *   key:{\n     *     title: \"字段名称\",\n     *     component:{\n     *       name:\"组件名称\"\n     *       ...组件参数\n     *     }\n     *   }\n     * }\n     * */\n    columns: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 字段分组\n     * {\n     *   type:'xxx', //分组展示类型\n     *   groups:{ //分组数据\n     *     groupKey:{ title:'xxx',columns:['fieldKey','fieldKey']}\n     *   }\n     * }\n     */\n    group: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 重置表单后的操作\n     */\n    doReset: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮，表单校验前执行操作（async）\n     */\n    beforeValidate: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单校验完完成后，提交前处理（async）\n     */\n    beforeSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮时执行操作（async）\n     */\n    doSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单提交后处理（async）\n     */\n    afterSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 插槽内容\n     */\n    slots: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * 布局方式【flex|grid】\n     */\n    display: {\n      type: String,\n      default: \"flex\" // flex\n    },\n    /**\n     * 序号，编辑时会传入\n     */\n    index: {\n      type: Number,\n      default: undefined\n    },\n    /**\n     * 模式 [add,edit,view,自定义]\n     */\n    mode: {\n      type: String,\n      default: undefined\n    },\n    /**\n     * a-row配置\n     */\n    row: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * el-col|a-col配置，可配置跨列\n     */\n    col: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * formItem的公共配置\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * helper位置：{position:'label'}\n     */\n    helper: {\n      type: Object\n    },\n\n    watch: {\n      type: Function,\n      default: null\n    }\n  },\n  emits: [\"reset\", \"submit\", \"success\", \"validationError\", \"value-change\", \"init\"],\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const { ui } = useUi();\n    const { AsyncComputeValue, doComputed } = useCompute();\n    const formRef = ref();\n    const form: UnwrapNestedRefs<any> = reactive({});\n    const { proxy } = getCurrentInstance();\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item: any) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"form.value配置不支持Compute/AsyncCompute类型的动态计算\");\n      }\n    });\n    function createInitialForm() {\n      const form = {};\n      // 初始数据赋值\n      _.each(props.columns, (item: any, key: any) => {\n        const defValue = unref(item.value);\n        if (defValue !== undefined) {\n          _.set(form, key, defValue);\n        }\n      });\n      merge(form, _.cloneDeep(props.initialForm));\n      return form;\n    }\n\n    const initialForm = createInitialForm();\n    setFormData(initialForm);\n\n    const scope: Ref<FormScopeContext> = computed(() => {\n      return {\n        row: initialForm,\n        form,\n        index: props.index,\n        mode: props.mode || \"add\",\n        attrs: ctx.attrs,\n        getComponentRef\n      } as FormScopeContext;\n    });\n\n    function getContextFn() {\n      return scope.value;\n    }\n\n    const computedColumns = doComputed(() => {\n      return props.columns;\n    }, getContextFn);\n    //form.valueBuilder\n\n    function doValueBuilder(form: any) {\n      if (form == null) {\n        return;\n      }\n      _.each(props.columns, (item: any, key: any) => {\n        let value = _.get(form, key);\n        if (item.valueBuilder) {\n          item.valueBuilder({\n            value,\n            key,\n            row: initialForm,\n            form,\n            index: props.index,\n            mode: props.mode\n          });\n        }\n      });\n    }\n\n    function getFormData() {\n      return form;\n    }\n    function setFormData(formData: any, options: SetFormDataOptions = {}) {\n      doValueBuilder(formData);\n\n      if (options.mergeForm === false) {\n        for (const key in form) {\n          delete form[key];\n        }\n      }\n      merge(form, formData);\n      const { valueChange } = options;\n      if (valueChange) {\n        _.forEach(props.columns, (column: any, key: any) => {\n          const value = form[key];\n          doValueChange(key, value);\n        });\n      }\n    }\n\n    function mergeCol(...col: any) {\n      return merge({}, props.col, ...col);\n    }\n\n    function buildItemScope(item: any): FormScopeContext {\n      return { key: item.key, ...scope.value };\n    }\n\n    // doValueBuilder(form);\n\n    // watch(\n    //   () => props.initialForm,\n    //   () => {\n    //     setFormData(createInitialForm(), { mergeForm: false });\n    //   }\n    // );\n\n    function doValueChange(key: string, value: any) {\n      const event = { key, value, formRef: proxy, ...scope.value, immediate: false };\n      ctx.emit(\"value-change\", event);\n      let valueChange = props.columns[key].valueChange;\n      if (valueChange) {\n        if (valueChange instanceof Function) {\n          valueChange(event);\n        } else if (valueChange.handle) {\n          valueChange.handle(event);\n        }\n      }\n    }\n\n    const formItemRefs: Ref = ref({});\n\n    function getFormItemRef(key: string) {\n      return formItemRefs.value[key];\n    }\n\n    function getComponentRef(key: string, isAsync = false) {\n      return getFormItemRef(key)?.getComponentRef(isAsync);\n    }\n\n    const groupActiveKey = ref([]);\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.forEach(props.group?.groups, (groupItem: any, key: any) => {\n      if (groupItem.collapsed !== true) {\n        groupActiveKey.value.push(key);\n      }\n    });\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    if (props.group?.groupType === \"tabs\") {\n      groupActiveKey.value = groupActiveKey.value.length > 0 ? groupActiveKey.value[0] : null;\n    }\n\n    //构建分组数据\n    const computedGroup = doComputed(\n      () => {\n        return props.group;\n      },\n      getContextFn,\n      null,\n      (group) => {\n        if (!group) {\n          return {};\n        }\n        //找出没有添加进分组的字段\n        const groupedKeys: any = {};\n        _.forEach(group?.groups, (groupItem: any, key: string) => {\n          _.forEach(groupItem.columns, (item: any) => {\n            if (computedColumns.value[item] == null) {\n              utils.logger.warn(\"无效的分组字段：\" + item);\n              return;\n            }\n            groupedKeys[item] = key;\n          });\n        });\n\n        const type = group.groupType;\n        let wrapper = {\n          parent: ui.collapse.name,\n          child: ui.collapseItem.name\n        };\n        if (type === \"tabs\") {\n          wrapper.parent = ui.tabs.name;\n          wrapper.child = ui.tabPane.name;\n        }\n        return merge(\n          {\n            wrapper,\n            groupedKeys\n          },\n          group\n        );\n      }\n    );\n\n    const computedDefaultColumns = computed(() => {\n      const columns: any = [];\n      //default columns排序\n      _.forEach(computedColumns.value, (value: any, key: string) => {\n        const item = _.cloneDeep(props.formItem || {});\n        value = merge(item, value);\n        value.key = key;\n        if (value.order == null) {\n          value.order = Constants.orderDefault;\n        }\n        if (computedGroup.value?.groupedKeys == null || computedGroup.value?.groupedKeys[key] == null) {\n          columns.push(value);\n        }\n        value.col = mergeCol(value.col);\n      });\n      //排序\n      columns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n\n      return columns;\n    });\n\n    function getFormRef() {\n      return formRef.value;\n    }\n    async function reset() {\n      // ui.form.resetWrap(formRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n\n      if (props.doReset) {\n        await props.doReset(scope.value);\n      }\n      ctx.emit(\"reset\");\n    }\n\n    const validRef: Ref = ref();\n    const errorsRef: Ref = ref({});\n\n    function fillGroupError(fieldErrors: any) {\n      if (!computedGroup.value?.groupedKeys) {\n        return;\n      }\n      for (let key in fieldErrors) {\n        const group = computedGroup.value?.groupedKeys[key];\n        if (group != null) {\n          fieldErrors[\"group.\" + group] = true;\n        }\n      }\n    }\n    async function submit() {\n      const validateScope = { ...scope.value, form };\n      if (props.beforeValidate) {\n        const ret = await props.beforeValidate(validateScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      try {\n        errorsRef.value = {};\n        await ui.form.validateWrap(formRef.value);\n        validRef.value = true;\n      } catch (e: any) {\n        validRef.value = false;\n        const validateErrors = ui.form.transformValidateErrors(e);\n        fillGroupError(validateErrors);\n        errorsRef.value = validateErrors;\n        ctx.emit(\"validationError\", scope.value);\n        throw e;\n      }\n\n      const formData = _.cloneDeep(toRaw(form));\n      const submitScope = { ...scope.value, form: formData };\n      logger.debug(\"form submit\", JSON.stringify(form));\n      _.each(props.columns, (item: any, key: string) => {\n        let value = _.get(formData, key);\n        if (item.valueResolve) {\n          item.valueResolve({\n            value,\n            key,\n            ...submitScope\n          });\n        }\n      });\n\n      if (props.beforeSubmit) {\n        const ret = await props.beforeSubmit(submitScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      //移除不允许提交的字段\n      _.each(props.columns, (item: any, key: string) => {\n        if (item.submit === false) {\n          _.unset(formData, key);\n        } else if (item.submit === true) {\n          //设置强制提交的字段\n          _.set(formData, key, formData[key]);\n        }\n      });\n\n      if (props.doSubmit) {\n        const res = await props.doSubmit(submitScope);\n        submitScope.res = res;\n        if (res === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"submit\", submitScope);\n      if (props.afterSubmit) {\n        const success = await props.afterSubmit(submitScope);\n        if (success === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"success\", submitScope);\n\n      return submitScope;\n    }\n\n    onMounted(() => {\n      // immediate valueChange触发\n      _.forEach(computedColumns.value, (item: any, key: string) => {\n        if (item.valueChange == null) {\n          return;\n        }\n        let valueChange = item.valueChange;\n        if (valueChange && valueChange.immediate === true && valueChange.handle) {\n          const event = { key, value: form[key], formRef: proxy, ...scope.value, immediate: true };\n          if (valueChange.handle) {\n            valueChange.handle(event);\n          }\n        }\n      });\n    });\n\n    function formItemShow(item: any) {\n      if (item && item.show !== false) {\n        return true;\n      }\n      return false;\n    }\n    function groupItemShow(groupItem: any) {\n      if (!groupItem.columns) {\n        return false;\n      }\n      if (groupItem.show === false) {\n        return false;\n      }\n\n      for (let key of groupItem.columns) {\n        if (computedColumns.value[key] == null) {\n          continue;\n        }\n        const isFieldShow = formItemShow(computedColumns.value[key]);\n        if (isFieldShow) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    if (props.watch) {\n      watch(\n        () => {\n          return form;\n        },\n        (newVal, oldVal) => {\n          if (props.watch) {\n            props.watch(scope.value);\n          }\n        },\n        {\n          deep: true,\n          immediate: true\n        }\n      );\n    }\n\n    function isDirty() {\n      const before = JSON.stringify(initialForm);\n      const after = JSON.stringify(form);\n      return before !== after;\n    }\n\n    const mergedSlots = computed(() => {\n      return _.merge({}, props.slots, ctx.slots);\n    });\n\n    ctx.emit(\"init\", scope.value);\n\n    return {\n      get: (form: any, key: string) => {\n        return _.get(form, key);\n      },\n      set: (form: any, key: string, value: any) => {\n        _.set(form, key, value);\n        doValueChange(key, value);\n      },\n      ui,\n      validRef,\n      errorsRef,\n      formRef,\n      computedColumns,\n      computedDefaultColumns,\n      submit,\n      reset,\n      getFormRef,\n      scope,\n      buildItemScope,\n      groupActiveKey,\n      form,\n      formItemRefs,\n      getFormData,\n      setFormData,\n      getComponentRef,\n      mergeCol,\n      computedGroup,\n      getContextFn,\n      formItemShow,\n      groupItemShow,\n      isDirty,\n      mergedSlots\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form {\n  .el-collapse-item__content {\n    margin-top: 10px;\n    padding-left: 30px;\n    padding-right: 30px;\n  }\n\n  .fs-form-invalid {\n  }\n\n  .fs-form-item-component {\n    .ant-picker,\n    .ant-input-affix-wrapper,\n    .ant-input-number,\n    .el-cascader,\n    .el-date-editor,\n    .el-input-number,\n    .el-input,\n    > .el-select,\n    > .n-select,\n    .n-date-picker,\n    .n-input-number {\n      width: 100%;\n    }\n\n    .el-date-editor .el-range__icon {\n      margin-left: 10px;\n    }\n    .el-date-editor .el-range__close-icon {\n      margin-right: 10px;\n    }\n\n    .el-range-editor.el-input__wrapper {\n      padding: 0;\n    }\n  }\n\n  //.el-date-editor.el-input__wrapper {\n  //  width: 100%;\n  //}\n}\n.fs-form-grid {\n  .fs-row {\n    display: grid;\n    grid-template-columns: 50% 50%;\n    // gap: 0 20px; //列间距 20px\n    .fs-col {\n      max-width: 100%;\n      width: 100%;\n    }\n\n    // antdv\n    .ant-form-item-label {\n      width: 100px;\n      flex: none;\n      max-width: none;\n    }\n    .ant-form-item-control-wrapper {\n      flex: 1;\n      max-width: none;\n    }\n  }\n\n  // element\n  .el-row::after,\n  .el-row::before {\n    display: none;\n  }\n}\n.fs-form-flex {\n  display: flex;\n  justify-content: flex-start;\n  align-items: baseline;\n  flex-wrap: wrap;\n  .fs-row {\n    width: 100%;\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"ui.form.name\"\n    ref=\"formRef\"\n    class=\"fs-form\"\n    :class=\"{\n      'fs-form-grid': display === 'grid',\n      'fs-form-flex': display === 'flex',\n      'fs-form-invalid': validRef === false\n    }\"\n    onsubmit=\"event.preventDefault();\"\n    :model=\"form\"\n  >\n    <!-- row -->\n    <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n      <!-- col -->\n      <template v-for=\"item in computedDefaultColumns\" :key=\"item?.key\">\n        <component :is=\"ui.col.name\" v-if=\"formItemShow(item)\" class=\"fs-col\" v-bind=\"item.col\">\n          <fs-form-item\n            v-if=\"item.blank !== true\"\n            :ref=\"\n              (el: any) => {\n                if (el) {\n                  formItemRefs[item.key] = el;\n                }\n              }\n            \"\n            :item=\"item\"\n            :helper=\"helper\"\n            :model-value=\"get(form, item.key)\"\n            :form-slot=\"mergedSlots['form_' + item.key]\"\n            :get-context-fn=\"getContextFn\"\n            @update:model-value=\"set(form, item.key, $event)\"\n          />\n        </component>\n      </template>\n    </component>\n    <component\n      :is=\"computedGroup.wrapper.parent\"\n      v-if=\"computedGroup.wrapper\"\n      v-model:[ui.collapse.modelValue]=\"groupActiveKey\"\n      style=\"width: 100%\"\n      v-bind=\"computedGroup\"\n    >\n      <template v-for=\"(groupItem, groupKey) of computedGroup.groups\" :key=\"groupKey\">\n        <component\n          :is=\"computedGroup.wrapper.child\"\n          v-if=\"groupItemShow(groupItem)\"\n          :[ui.collapse.keyName]=\"groupKey\"\n          v-bind=\"groupItem\"\n          :class=\"{ 'fs-form-group-error': errorsRef['group.' + groupKey] }\"\n        >\n          <template v-for=\"(item, slotName) of groupItem.slots\" :key=\"slotName\" #[slotName]=\"scope\">\n            <fs-render :render-func=\"item\" :scope=\"{ ...scope, hasError: errorsRef['group.' + groupKey] }\" />\n          </template>\n          <!-- row -->\n          <component :is=\"ui.row.name\" class=\"fs-row\" v-bind=\"row\">\n            <!-- col -->\n            <template v-for=\"key in groupItem.columns\" :key=\"key\">\n              <component\n                :is=\"ui.col.name\"\n                v-if=\"formItemShow(computedColumns[key])\"\n                class=\"fs-col\"\n                v-bind=\"mergeCol(groupItem.col, computedColumns[key]?.col)\"\n              >\n                <fs-form-item\n                  v-if=\"computedColumns[key] && computedColumns[key]?.blank !== true\"\n                  :ref=\"\n                    (el: any) => {\n                      if (el) {\n                        formItemRefs[key] = el;\n                      }\n                    }\n                  \"\n                  :item=\"computedColumns[key]\"\n                  :model-value=\"get(form, key)\"\n                  :form-slot=\"mergedSlots['form_' + key]\"\n                  :get-context-fn=\"getContextFn\"\n                  @update:model-value=\"set(form, key, $event)\"\n                />\n              </component>\n            </template>\n          </component>\n        </component>\n      </template>\n    </component>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport {\n  computed,\n  defineComponent,\n  getCurrentInstance,\n  onMounted,\n  reactive,\n  Ref,\n  ref,\n  toRaw,\n  unref,\n  UnwrapNestedRefs,\n  watch\n} from \"vue\";\nimport _ from \"lodash-es\";\nimport { ComputeValue, useCompute } from \"../../use/use-compute\";\nimport logger from \"../../utils/util.log\";\nimport { useMerge } from \"../../use/use-merge\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { FormScopeContext, SetFormDataOptions, useUi, utils } from \"../../index\";\n\n/**\n * 配置化的表单组件\n * 暴露的方法：\n * ref.submit() = 提交表单\n * ref.reset() = 重置表单\n */\nexport default defineComponent({\n  name: \"FsForm\",\n  props: {\n    /**\n     * 初始表单数据\n     **/\n    initialForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 字段模版\n     * {\n     *   key:{\n     *     title: \"字段名称\",\n     *     component:{\n     *       name:\"组件名称\"\n     *       ...组件参数\n     *     }\n     *   }\n     * }\n     * */\n    columns: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 字段分组\n     * {\n     *   type:'xxx', //分组展示类型\n     *   groups:{ //分组数据\n     *     groupKey:{ title:'xxx',columns:['fieldKey','fieldKey']}\n     *   }\n     * }\n     */\n    group: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * 重置表单后的操作\n     */\n    doReset: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮，表单校验前执行操作（async）\n     */\n    beforeValidate: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单校验完完成后，提交前处理（async）\n     */\n    beforeSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 点击保存按钮时执行操作（async）\n     */\n    doSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 表单提交后处理（async）\n     */\n    afterSubmit: {\n      type: Function,\n      default: undefined\n    },\n    /**\n     * 插槽内容\n     */\n    slots: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    },\n    /**\n     * 布局方式【flex|grid】\n     */\n    display: {\n      type: String,\n      default: \"flex\" // flex\n    },\n    /**\n     * 序号，编辑时会传入\n     */\n    index: {\n      type: Number,\n      default: undefined\n    },\n    /**\n     * 模式 [add,edit,view,自定义]\n     */\n    mode: {\n      type: String,\n      default: undefined\n    },\n    /**\n     * a-row配置\n     */\n    row: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * el-col|a-col配置，可配置跨列\n     */\n    col: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * formItem的公共配置\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    },\n    /**\n     * helper位置：{position:'label'}\n     */\n    helper: {\n      type: Object\n    },\n\n    watch: {\n      type: Function,\n      default: null\n    }\n  },\n  emits: [\"reset\", \"submit\", \"success\", \"validationError\", \"value-change\", \"init\"],\n  setup(props, ctx) {\n    const { merge } = useMerge();\n    const { ui } = useUi();\n    const { AsyncComputeValue, doComputed } = useCompute();\n    const formRef = ref();\n    const form: UnwrapNestedRefs<any> = reactive({});\n    const { proxy } = getCurrentInstance();\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item: any) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"form.value配置不支持Compute/AsyncCompute类型的动态计算\");\n      }\n    });\n    function createInitialForm() {\n      const form = {};\n      // 初始数据赋值\n      _.each(props.columns, (item: any, key: any) => {\n        const defValue = unref(item.value);\n        if (defValue !== undefined) {\n          _.set(form, key, defValue);\n        }\n      });\n      merge(form, _.cloneDeep(props.initialForm));\n      return form;\n    }\n\n    const initialForm = createInitialForm();\n    setFormData(initialForm);\n\n    const scope: Ref<FormScopeContext> = computed(() => {\n      return {\n        row: initialForm,\n        form,\n        index: props.index,\n        mode: props.mode || \"add\",\n        attrs: ctx.attrs,\n        getComponentRef\n      } as FormScopeContext;\n    });\n\n    function getContextFn() {\n      return scope.value;\n    }\n\n    const computedColumns = doComputed(() => {\n      return props.columns;\n    }, getContextFn);\n    //form.valueBuilder\n\n    function doValueBuilder(form: any) {\n      if (form == null) {\n        return;\n      }\n      _.each(props.columns, (item: any, key: any) => {\n        let value = _.get(form, key);\n        if (item.valueBuilder) {\n          item.valueBuilder({\n            value,\n            key,\n            row: initialForm,\n            form,\n            index: props.index,\n            mode: props.mode\n          });\n        }\n      });\n    }\n\n    function getFormData() {\n      return form;\n    }\n    function setFormData(formData: any, options: SetFormDataOptions = {}) {\n      doValueBuilder(formData);\n\n      if (options.mergeForm === false) {\n        for (const key in form) {\n          delete form[key];\n        }\n      }\n      merge(form, formData);\n      const { valueChange } = options;\n      if (valueChange) {\n        _.forEach(props.columns, (column: any, key: any) => {\n          const value = form[key];\n          doValueChange(key, value);\n        });\n      }\n    }\n\n    function mergeCol(...col: any) {\n      return merge({}, props.col, ...col);\n    }\n\n    function buildItemScope(item: any): FormScopeContext {\n      return { key: item.key, ...scope.value };\n    }\n\n    // doValueBuilder(form);\n\n    // watch(\n    //   () => props.initialForm,\n    //   () => {\n    //     setFormData(createInitialForm(), { mergeForm: false });\n    //   }\n    // );\n\n    function doValueChange(key: string, value: any) {\n      const event = { key, value, formRef: proxy, ...scope.value, immediate: false };\n      ctx.emit(\"value-change\", event);\n      let valueChange = props.columns[key].valueChange;\n      if (valueChange) {\n        if (valueChange instanceof Function) {\n          valueChange(event);\n        } else if (valueChange.handle) {\n          valueChange.handle(event);\n        }\n      }\n    }\n\n    const formItemRefs: Ref = ref({});\n\n    function getFormItemRef(key: string) {\n      return formItemRefs.value[key];\n    }\n\n    function getComponentRef(key: string, isAsync = false) {\n      return getFormItemRef(key)?.getComponentRef(isAsync);\n    }\n\n    const groupActiveKey = ref([]);\n\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.forEach(props.group?.groups, (groupItem: any, key: any) => {\n      if (groupItem.collapsed !== true) {\n        groupActiveKey.value.push(key);\n      }\n    });\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    if (props.group?.groupType === \"tabs\") {\n      groupActiveKey.value = groupActiveKey.value.length > 0 ? groupActiveKey.value[0] : null;\n    }\n\n    //构建分组数据\n    const computedGroup = doComputed(\n      () => {\n        return props.group;\n      },\n      getContextFn,\n      null,\n      (group) => {\n        if (!group) {\n          return {};\n        }\n        //找出没有添加进分组的字段\n        const groupedKeys: any = {};\n        _.forEach(group?.groups, (groupItem: any, key: string) => {\n          _.forEach(groupItem.columns, (item: any) => {\n            if (computedColumns.value[item] == null) {\n              utils.logger.warn(\"无效的分组字段：\" + item);\n              return;\n            }\n            groupedKeys[item] = key;\n          });\n        });\n\n        const type = group.groupType;\n        let wrapper = {\n          parent: ui.collapse.name,\n          child: ui.collapseItem.name\n        };\n        if (type === \"tabs\") {\n          wrapper.parent = ui.tabs.name;\n          wrapper.child = ui.tabPane.name;\n        }\n        return merge(\n          {\n            wrapper,\n            groupedKeys\n          },\n          group\n        );\n      }\n    );\n\n    const computedDefaultColumns = computed(() => {\n      const columns: any = [];\n      //default columns排序\n      _.forEach(computedColumns.value, (value: any, key: string) => {\n        const item = _.cloneDeep(props.formItem || {});\n        value = merge(item, value);\n        value.key = key;\n        if (value.order == null) {\n          value.order = Constants.orderDefault;\n        }\n        if (computedGroup.value?.groupedKeys == null || computedGroup.value?.groupedKeys[key] == null) {\n          columns.push(value);\n        }\n        value.col = mergeCol(value.col);\n      });\n      //排序\n      columns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n\n      return columns;\n    });\n\n    function getFormRef() {\n      return formRef.value;\n    }\n    async function reset() {\n      // ui.form.resetWrap(formRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n\n      if (props.doReset) {\n        await props.doReset(scope.value);\n      }\n      ctx.emit(\"reset\");\n    }\n\n    const validRef: Ref = ref();\n    const errorsRef: Ref = ref({});\n\n    function fillGroupError(fieldErrors: any) {\n      if (!computedGroup.value?.groupedKeys) {\n        return;\n      }\n      for (let key in fieldErrors) {\n        const group = computedGroup.value?.groupedKeys[key];\n        if (group != null) {\n          fieldErrors[\"group.\" + group] = true;\n        }\n      }\n    }\n    async function submit() {\n      const validateScope = { ...scope.value, form };\n      if (props.beforeValidate) {\n        const ret = await props.beforeValidate(validateScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      try {\n        errorsRef.value = {};\n        await ui.form.validateWrap(formRef.value);\n        validRef.value = true;\n      } catch (e: any) {\n        validRef.value = false;\n        const validateErrors = ui.form.transformValidateErrors(e);\n        fillGroupError(validateErrors);\n        errorsRef.value = validateErrors;\n        ctx.emit(\"validationError\", scope.value);\n        throw e;\n      }\n\n      const formData = _.cloneDeep(toRaw(form));\n      const submitScope = { ...scope.value, form: formData };\n      logger.debug(\"form submit\", JSON.stringify(form));\n      _.each(props.columns, (item: any, key: string) => {\n        let value = _.get(formData, key);\n        if (item.valueResolve) {\n          item.valueResolve({\n            value,\n            key,\n            ...submitScope\n          });\n        }\n      });\n\n      if (props.beforeSubmit) {\n        const ret = await props.beforeSubmit(submitScope);\n        if (ret === false) {\n          return false;\n        }\n      }\n\n      //移除不允许提交的字段\n      _.each(props.columns, (item: any, key: string) => {\n        if (item.submit === false) {\n          _.unset(formData, key);\n        } else if (item.submit === true) {\n          //设置强制提交的字段\n          _.set(formData, key, formData[key]);\n        }\n      });\n\n      if (props.doSubmit) {\n        const res = await props.doSubmit(submitScope);\n        submitScope.res = res;\n        if (res === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"submit\", submitScope);\n      if (props.afterSubmit) {\n        const success = await props.afterSubmit(submitScope);\n        if (success === false) {\n          return false;\n        }\n      }\n      ctx.emit(\"success\", submitScope);\n\n      return submitScope;\n    }\n\n    onMounted(() => {\n      // immediate valueChange触发\n      _.forEach(computedColumns.value, (item: any, key: string) => {\n        if (item.valueChange == null) {\n          return;\n        }\n        let valueChange = item.valueChange;\n        if (valueChange && valueChange.immediate === true && valueChange.handle) {\n          const event = { key, value: form[key], formRef: proxy, ...scope.value, immediate: true };\n          if (valueChange.handle) {\n            valueChange.handle(event);\n          }\n        }\n      });\n    });\n\n    function formItemShow(item: any) {\n      if (item && item.show !== false) {\n        return true;\n      }\n      return false;\n    }\n    function groupItemShow(groupItem: any) {\n      if (!groupItem.columns) {\n        return false;\n      }\n      if (groupItem.show === false) {\n        return false;\n      }\n\n      for (let key of groupItem.columns) {\n        if (computedColumns.value[key] == null) {\n          continue;\n        }\n        const isFieldShow = formItemShow(computedColumns.value[key]);\n        if (isFieldShow) {\n          return true;\n        }\n      }\n      return false;\n    }\n\n    if (props.watch) {\n      watch(\n        () => {\n          return form;\n        },\n        (newVal, oldVal) => {\n          if (props.watch) {\n            props.watch(scope.value);\n          }\n        },\n        {\n          deep: true,\n          immediate: true\n        }\n      );\n    }\n\n    function isDirty() {\n      const before = JSON.stringify(initialForm);\n      const after = JSON.stringify(form);\n      return before !== after;\n    }\n\n    const mergedSlots = computed(() => {\n      return _.merge({}, props.slots, ctx.slots);\n    });\n\n    ctx.emit(\"init\", scope.value);\n\n    return {\n      get: (form: any, key: string) => {\n        return _.get(form, key);\n      },\n      set: (form: any, key: string, value: any) => {\n        _.set(form, key, value);\n        doValueChange(key, value);\n      },\n      ui,\n      validRef,\n      errorsRef,\n      formRef,\n      computedColumns,\n      computedDefaultColumns,\n      submit,\n      reset,\n      getFormRef,\n      scope,\n      buildItemScope,\n      groupActiveKey,\n      form,\n      formItemRefs,\n      getFormData,\n      setFormData,\n      getComponentRef,\n      mergeCol,\n      computedGroup,\n      getContextFn,\n      formItemShow,\n      groupItemShow,\n      isDirty,\n      mergedSlots\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form {\n  .el-collapse-item__content {\n    margin-top: 10px;\n    padding-left: 30px;\n    padding-right: 30px;\n  }\n\n  .fs-form-invalid {\n  }\n\n  .fs-form-item-component {\n    .ant-picker,\n    .ant-input-affix-wrapper,\n    .ant-input-number,\n    .el-cascader,\n    .el-date-editor,\n    .el-input-number,\n    .el-input,\n    > .el-select,\n    > .n-select,\n    .n-date-picker,\n    .n-input-number {\n      width: 100%;\n    }\n\n    .el-date-editor .el-range__icon {\n      margin-left: 10px;\n    }\n    .el-date-editor .el-range__close-icon {\n      margin-right: 10px;\n    }\n\n    .el-range-editor.el-input__wrapper {\n      padding: 0;\n    }\n  }\n\n  //.el-date-editor.el-input__wrapper {\n  //  width: 100%;\n  //}\n}\n.fs-form-grid {\n  .fs-row {\n    display: grid;\n    grid-template-columns: 50% 50%;\n    // gap: 0 20px; //列间距 20px\n    .fs-col {\n      max-width: 100%;\n      width: 100%;\n    }\n\n    // antdv\n    .ant-form-item-label {\n      width: 100px;\n      flex: none;\n      max-width: none;\n    }\n    .ant-form-item-control-wrapper {\n      flex: 1;\n      max-width: none;\n    }\n  }\n\n  // element\n  .el-row::after,\n  .el-row::before {\n    display: none;\n  }\n}\n.fs-form-flex {\n  display: flex;\n  justify-content: flex-start;\n  align-items: baseline;\n  flex-wrap: wrap;\n  .fs-row {\n    width: 100%;\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"ui.formItem.name\"\n    v-if=\"item\"\n    class=\"fs-form-item\"\n    :[ui.formItem.prop]=\"computedKey\"\n    v-bind=\"item\"\n    :path=\"item.key\"\n    :rule-path=\"item.key\"\n  >\n    <template #label>\n      <span v-if=\"computedLabelIsRender\" class=\"fs-form-item-label-text\">\n        <fs-render :render-func=\"computedLabelRender\"></fs-render>\n      </span>\n      <span v-else class=\"fs-form-item-label-text\" :title=\"computedLabel\">\n        {{ computedLabel }}\n      </span>\n\n      <component\n        :is=\"ui.tooltip.name\"\n        v-if=\"item.helper && computedHelperPosition === 'label'\"\n        v-bind=\"computedHelperTooltip\"\n      >\n        <template #[ui.tooltip.content]>\n          <span class=\"fs-form-helper-tooltip\">\n            <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n          </span>\n        </template>\n        <template #[ui.tooltip.trigger]>\n          <span class=\"fs-form-item-label-icon\">\n            <fs-icon class=\"fs-form-item-label-icon-inner\" :icon=\"ui.icons.question\"></fs-icon>\n          </span>\n        </template>\n      </component>\n    </template>\n    <div class=\"fs-form-item-content\">\n      <fs-render v-if=\"item.topRender\" :render-func=\"item.topRender\" :scope=\"scopeFunc()\" />\n      <div class=\"fs-form-item-render\">\n        <fs-render v-if=\"item.prefixRender\" :render-func=\"item.prefixRender\" :scope=\"scopeFunc()\" />\n        <div class=\"fs-form-item-component\">\n          <fs-slot-render v-if=\"formSlot\" :slots=\"formSlot\" :scope=\"scopeFunc()\" />\n          <template v-else-if=\"item.component?.show !== false\">\n            <fs-render\n              v-if=\"item.conditionalRender && item.conditionalRender.match && item.conditionalRender.match(scopeFunc())\"\n              :render-func=\"item.conditionalRender.render\"\n              :scope=\"scopeFunc()\"\n            />\n            <fs-render v-else-if=\"item.render\" :render-func=\"item.render\" :scope=\"scopeFunc()\" />\n            <fs-component-render\n              v-else\n              ref=\"componentRenderRef\"\n              v-bind=\"item.component\"\n              :model-value=\"modelValue\"\n              :scope=\"scopeFunc()\"\n              @update:modelValue=\"updateModelValue\"\n            />\n          </template>\n        </div>\n        <fs-render v-if=\"item.suffixRender\" :render-func=\"item.suffixRender\" :scope=\"scopeFunc()\" />\n      </div>\n      <fs-render v-if=\"item.bottomRender\" :render-func=\"item.bottomRender\" :scope=\"scopeFunc()\" />\n      <template v-if=\"item.helper && computedHelperPosition !== 'label'\">\n        <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n      </template>\n    </div>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { ref, computed, defineComponent, Ref, PropType } from \"vue\";\nimport FsRender from \"../render/fs-render.js\";\nimport { ScopeContext } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * form-item组件封装\n */\nexport default defineComponent({\n  name: \"FsFormItem\",\n  components: { FsRender },\n  props: {\n    /**\n     * 表单字段值(v-model)\n     */\n    modelValue: {},\n    /**\n     * 字段配置\n     */\n    item: {\n      type: Object as PropType<any>,\n      default: undefined\n    },\n    /**\n     * 字段组件插槽\n     */\n    formSlot: {\n      type: Function,\n      default: undefined\n    },\n    getContextFn: {\n      type: Function,\n      default: undefined\n    },\n    helper: {\n      type: [String, Object]\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const componentRenderRef = ref();\n    // const scopeComputed: Ref<ScopeContext> = computed(() => {});\n\n    const scopeFunc = () => {\n      const scope = props.getContextFn ? props.getContextFn() : {};\n      return { value: props.modelValue, key: props.item.key, ...scope };\n    };\n\n    function updateModelValue(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n    }\n    function getComponentRef(isAsync = false) {\n      if (isAsync) {\n        return componentRenderRef.value?.getTargetRefAsync();\n      }\n      return componentRenderRef.value?.getTargetRef();\n    }\n\n    const computedHelperPosition = computed(() => {\n      return props.item?.helper?.position || (props.helper as any)?.position;\n    });\n    const computedHelperTooltip = computed(() => {\n      return merge({}, props.item.helper?.tooltip, (props.helper as any)?.tooltip);\n    });\n    const computedKey = computed(() => {\n      if (props.item == null) {\n        return;\n      }\n      if (props.item.key.indexOf(\".\") >= 0) {\n        return props.item.key.split(\".\");\n      }\n      return props.item.key;\n    });\n\n    const computedLabel = computed(() => {\n      return props.item.label || props.item.title;\n    });\n    const computedLabelIsRender = computed(() => {\n      return computedLabel.value instanceof Function;\n    });\n\n    const computedLabelRender = () => {\n      return computedLabel.value(scopeFunc());\n    };\n\n    return {\n      ui,\n      updateModelValue,\n      scopeFunc,\n      getComponentRef,\n      componentRenderRef,\n      computedHelperPosition,\n      computedHelperTooltip,\n      computedKey,\n      computedLabelIsRender,\n      computedLabel,\n      computedLabelRender\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form-item {\n  .ant-form-item-label {\n    //line-height: 1;\n    .fs-form-item-label-text {\n      width: 100%;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n  }\n  .el-form-item {\n    .fs-form-item-label-icon {\n      line-height: 1;\n      height: inherit;\n    }\n  }\n  .fs-form-item-label-icon {\n    margin: 0 2px;\n    .fs-form-item-label-icon-inner {\n      line-height: inherit;\n      height: inherit;\n    }\n  }\n  .fs-form-item-content {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    flex: 1;\n    .fs-form-item-render {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      .fs-form-item-component {\n        flex: 1;\n        max-width: 100%;\n      }\n    }\n  }\n}\n.fs-form-helper-tooltip {\n  .fs-form-helper {\n    color: inherit;\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"ui.formItem.name\"\n    v-if=\"item\"\n    class=\"fs-form-item\"\n    :[ui.formItem.prop]=\"computedKey\"\n    v-bind=\"item\"\n    :path=\"item.key\"\n    :rule-path=\"item.key\"\n  >\n    <template #label>\n      <span v-if=\"computedLabelIsRender\" class=\"fs-form-item-label-text\">\n        <fs-render :render-func=\"computedLabelRender\"></fs-render>\n      </span>\n      <span v-else class=\"fs-form-item-label-text\" :title=\"computedLabel\">\n        {{ computedLabel }}\n      </span>\n\n      <component\n        :is=\"ui.tooltip.name\"\n        v-if=\"item.helper && computedHelperPosition === 'label'\"\n        v-bind=\"computedHelperTooltip\"\n      >\n        <template #[ui.tooltip.content]>\n          <span class=\"fs-form-helper-tooltip\">\n            <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n          </span>\n        </template>\n        <template #[ui.tooltip.trigger]>\n          <span class=\"fs-form-item-label-icon\">\n            <fs-icon class=\"fs-form-item-label-icon-inner\" :icon=\"ui.icons.question\"></fs-icon>\n          </span>\n        </template>\n      </component>\n    </template>\n    <div class=\"fs-form-item-content\">\n      <fs-render v-if=\"item.topRender\" :render-func=\"item.topRender\" :scope=\"scopeFunc()\" />\n      <div class=\"fs-form-item-render\">\n        <fs-render v-if=\"item.prefixRender\" :render-func=\"item.prefixRender\" :scope=\"scopeFunc()\" />\n        <div class=\"fs-form-item-component\">\n          <fs-slot-render v-if=\"formSlot\" :slots=\"formSlot\" :scope=\"scopeFunc()\" />\n          <template v-else-if=\"item.component?.show !== false\">\n            <fs-render\n              v-if=\"item.conditionalRender && item.conditionalRender.match && item.conditionalRender.match(scopeFunc())\"\n              :render-func=\"item.conditionalRender.render\"\n              :scope=\"scopeFunc()\"\n            />\n            <fs-render v-else-if=\"item.render\" :render-func=\"item.render\" :scope=\"scopeFunc()\" />\n            <fs-component-render\n              v-else\n              ref=\"componentRenderRef\"\n              v-bind=\"item.component\"\n              :model-value=\"modelValue\"\n              :scope=\"scopeFunc()\"\n              @update:modelValue=\"updateModelValue\"\n            />\n          </template>\n        </div>\n        <fs-render v-if=\"item.suffixRender\" :render-func=\"item.suffixRender\" :scope=\"scopeFunc()\" />\n      </div>\n      <fs-render v-if=\"item.bottomRender\" :render-func=\"item.bottomRender\" :scope=\"scopeFunc()\" />\n      <template v-if=\"item.helper && computedHelperPosition !== 'label'\">\n        <fs-form-helper :helper=\"item.helper\" :scope=\"scopeFunc()\" />\n      </template>\n    </div>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { ref, computed, defineComponent, Ref, PropType } from \"vue\";\nimport FsRender from \"../render/fs-render.js\";\nimport { ScopeContext } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * form-item组件封装\n */\nexport default defineComponent({\n  name: \"FsFormItem\",\n  components: { FsRender },\n  props: {\n    /**\n     * 表单字段值(v-model)\n     */\n    modelValue: {},\n    /**\n     * 字段配置\n     */\n    item: {\n      type: Object as PropType<any>,\n      default: undefined\n    },\n    /**\n     * 字段组件插槽\n     */\n    formSlot: {\n      type: Function,\n      default: undefined\n    },\n    getContextFn: {\n      type: Function,\n      default: undefined\n    },\n    helper: {\n      type: [String, Object]\n    }\n  },\n  emits: [\"update:modelValue\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const componentRenderRef = ref();\n    // const scopeComputed: Ref<ScopeContext> = computed(() => {});\n\n    const scopeFunc = () => {\n      const scope = props.getContextFn ? props.getContextFn() : {};\n      return { value: props.modelValue, key: props.item.key, ...scope };\n    };\n\n    function updateModelValue(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n    }\n    function getComponentRef(isAsync = false) {\n      if (isAsync) {\n        return componentRenderRef.value?.getTargetRefAsync();\n      }\n      return componentRenderRef.value?.getTargetRef();\n    }\n\n    const computedHelperPosition = computed(() => {\n      return props.item?.helper?.position || (props.helper as any)?.position;\n    });\n    const computedHelperTooltip = computed(() => {\n      return merge({}, props.item.helper?.tooltip, (props.helper as any)?.tooltip);\n    });\n    const computedKey = computed(() => {\n      if (props.item == null) {\n        return;\n      }\n      if (props.item.key.indexOf(\".\") >= 0) {\n        return props.item.key.split(\".\");\n      }\n      return props.item.key;\n    });\n\n    const computedLabel = computed(() => {\n      return props.item.label || props.item.title;\n    });\n    const computedLabelIsRender = computed(() => {\n      return computedLabel.value instanceof Function;\n    });\n\n    const computedLabelRender = () => {\n      return computedLabel.value(scopeFunc());\n    };\n\n    return {\n      ui,\n      updateModelValue,\n      scopeFunc,\n      getComponentRef,\n      componentRenderRef,\n      computedHelperPosition,\n      computedHelperTooltip,\n      computedKey,\n      computedLabelIsRender,\n      computedLabel,\n      computedLabelRender\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-form-item {\n  .ant-form-item-label {\n    //line-height: 1;\n    .fs-form-item-label-text {\n      width: 100%;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n  }\n  .el-form-item {\n    .fs-form-item-label-icon {\n      line-height: 1;\n      height: inherit;\n    }\n  }\n  .fs-form-item-label-icon {\n    margin: 0 2px;\n    .fs-form-item-label-icon-inner {\n      line-height: inherit;\n      height: inherit;\n    }\n  }\n  .fs-form-item-content {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    flex: 1;\n    .fs-form-item-render {\n      display: flex;\n      align-items: center;\n      justify-content: flex-start;\n      .fs-form-item-component {\n        flex: 1;\n        max-width: 100%;\n      }\n    }\n  }\n}\n.fs-form-helper-tooltip {\n  .fs-form-helper {\n    color: inherit;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-form-helper\">\n    <pre v-if=\"typeof helper === 'string'\">{{ helper }}</pre>\n    <template v-else-if=\"helper.render\">\n      <fs-render :render-func=\"helper.render\" :scope=\"scope\" />\n    </template>\n    <pre v-else-if=\"helper.text\">{{ helper.text }}</pre>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 表单字段帮助说明组件\n */\nexport default defineComponent({\n  name: \"FsFormHelper\",\n  props: {\n    /**\n     * 帮助说明, text: 说明文字, render: function(scope) 自定义渲染\n     */\n    helper: {\n      type: [\n        /**\n         * text: 说明文字,\n         * render: function , 自定义render\n         */\n        Object,\n        /**\n         * 说明文本\n         */\n        String\n      ]\n    },\n    scope: {}\n  },\n  setup(props) {}\n});\n</script>\n<style lang=\"less\">\n.fs-form-helper {\n  color: #7e7e7e;\n  line-height: 1.3;\n  margin-top: 4px;\n  margin-bottom: 6px;\n\n  font-size: 12px;\n  pre {\n    font-family: inherit;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    margin-bottom: 0px;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-form-helper\">\n    <pre v-if=\"typeof helper === 'string'\">{{ helper }}</pre>\n    <template v-else-if=\"helper.render\">\n      <fs-render :render-func=\"helper.render\" :scope=\"scope\" />\n    </template>\n    <pre v-else-if=\"helper.text\">{{ helper.text }}</pre>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\n\n/**\n * 表单字段帮助说明组件\n */\nexport default defineComponent({\n  name: \"FsFormHelper\",\n  props: {\n    /**\n     * 帮助说明, text: 说明文字, render: function(scope) 自定义渲染\n     */\n    helper: {\n      type: [\n        /**\n         * text: 说明文字,\n         * render: function , 自定义render\n         */\n        Object,\n        /**\n         * 说明文本\n         */\n        String\n      ]\n    },\n    scope: {}\n  },\n  setup(props) {}\n});\n</script>\n<style lang=\"less\">\n.fs-form-helper {\n  color: #7e7e7e;\n  line-height: 1.3;\n  margin-top: 4px;\n  margin-bottom: 6px;\n\n  font-size: 12px;\n  pre {\n    font-family: inherit;\n    white-space: pre-wrap;\n    word-wrap: break-word;\n    margin-bottom: 0px;\n  }\n}\n</style>\n", null, "<script lang=\"ts\">\nimport { defineComponent as __MACROS_defineComponent } from \"vue\";\nexport default /*#__PURE__*/ __MACROS_defineComponent({\n  name: \"FsFormProvider\"\n});\n</script>\n<template>\n  <slot></slot>\n  <fs-form-wrapper v-for=\"item of formWrapperList\" :key=\"item.id\" v-bind=\"item\" />\n</template>\n\n<script setup lang=\"ts\">\nimport { provide, Ref, ref } from \"vue\";\nimport FsFormWrapper from \"./fs-form-wrapper.js\";\nimport { OpenDialogProps } from \"../../d\";\n\n;\n\nconst formWrapperList: Ref = ref({});\n\nfunction getMaxZIndex(): number {\n  let elements = document.querySelectorAll(\"*\");\n  let maxZindex = 10;\n  for (let i = 0; i < elements.length; i++) {\n    // @ts-ignore\n    maxZindex = Math.max(maxZindex, elements[i].style.zIndex || 0);\n  }\n  return maxZindex;\n}\n\nprovide(\"use:form:wrapper\", () => {\n  return {\n    open(opts: OpenDialogProps) {\n      const id = opts.id || Math.floor(Math.random() * 1000000) + \"\";\n      return new Promise((resolve, reject) => {\n        formWrapperList.value[id] = {\n          id,\n          // zIndex: getMaxZIndex() + 1,\n          async onMounted(instance: any) {\n            await instance.open(opts);\n            resolve(instance);\n          },\n          onClosed() {\n            if (!opts.id) {\n              //如果不是固定id，则关闭后销毁\n              delete formWrapperList.value[id];\n            }\n          }\n        };\n      });\n    }\n  };\n});\n</script>\n", "<template>\n  <component\n    :is=\"container?.is || 'fs-layout-default'\"\n    ref=\"containerRef\"\n    class=\"fs-crud-container\"\n    v-bind=\"container\"\n    :class=\"computedClass\"\n  >\n    <slot></slot>\n\n    <template #header-top>\n      <slot name=\"header-top\"></slot>\n    </template>\n    <template #header-bottom>\n      <slot name=\"header-bottom\"></slot>\n    </template>\n    <template #header-middle>\n      <slot name=\"header-middle\"></slot>\n    </template>\n\n    <template #search>\n      <div class=\"fs-crud-search\">\n        <component :is=\"search.is || 'fs-search'\" ref=\"searchRef\" v-bind=\"search\" :slots=\"computedSearchSlots\" />\n      </div>\n    </template>\n\n    <template #actionbar>\n      <div v-if=\"actionbar && actionbar.show !== false\" class=\"fs-crud-actionbar\">\n        <slot name=\"actionbar-left\"></slot>\n        <fs-actionbar v-bind=\"actionbar\" />\n        <slot name=\"actionbar-right\"></slot>\n      </div>\n    </template>\n\n    <template #toolbar>\n      <div v-if=\"toolbar && toolbar.show !== false\" class=\"fs-crud-toolbar\">\n        <slot name=\"toolbar-left\"></slot>\n        <fs-toolbar ref=\"toolbarRef\" v-bind=\"toolbar\" :slots=\"computedToolbarSlots\" :columns=\"table.columns\" />\n        <slot name=\"toolbar-right\"></slot>\n      </div>\n    </template>\n    <template #tabs>\n      <fs-tabs-filter v-if=\"tabsBinding.show\" ref=\"tabsRef\" class=\"fs-tabs\" v-bind=\"tabsBinding\" />\n    </template>\n    <template #table>\n      <fs-table\n        ref=\"tableRef\"\n        class=\"fs-crud-table\"\n        v-bind=\"computedTable\"\n        :columns=\"table.columns\"\n        :loading=\"table.loading\"\n        :row-handle=\"rowHandle\"\n        :data=\"data\"\n        :cell-slots=\"computedCellSlots\"\n      />\n    </template>\n\n    <template #form>\n      <div ref=\"innerWrapperRef\" class=\"fs-form-wrapper-container\" :class=\"{ 'fs-form-inner-wrapper': isFormInner }\">\n        <fs-form-wrapper\n          ref=\"formWrapperRef\"\n          :slots=\"computedFormSlots\"\n          :inner-wrapper=\"innerWrapperRef\"\n          @inner-change=\"onFormInnerChange\"\n          @value-change=\"$emit('form-value-change', $event)\"\n        />\n        <!-- 编辑对话框 -->\n      </div>\n    </template>\n\n    <template #pagination>\n      <div class=\"fs-crud-pagination\">\n        <div class=\"fs-pagination-left\">\n          <slot name=\"pagination-left\"></slot>\n        </div>\n        <div class=\"fs-pagination\">\n          <!-- pagination.currentPage 如果为空， element会出警告 -->\n          <component :is=\"ui.pagination.name\" v-if=\"pagination.show !== false\" v-bind=\"pagination\" />\n        </div>\n        <div class=\"fs-pagination-right\">\n          <slot name=\"pagination-right\"></slot>\n        </div>\n      </div>\n    </template>\n\n    <template #footer-top>\n      <slot name=\"footer-top\"></slot>\n    </template>\n    <template #footer-bottom>\n      <slot name=\"footer-bottom\"></slot>\n    </template>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, PropType, provide, ref, SetupContext, toRef } from \"vue\";\nimport _ from \"lodash-es\";\nimport { uiContext } from \"../ui\";\nimport { useMerge } from \"../use/use-merge\";\nimport utilLog from \"../utils/util.log\";\nimport { RowSelectionProps, SetSearchFormDataProps } from \"../d\";\nimport { useUi } from \"../use\";\nimport { utils } from \"../utils\";\nimport logger from \"../utils/util.log\";\n\nconst { merge } = useMerge();\n\nfunction useProviders(props: any, ctx: SetupContext) {\n  provide(\"get:columns\", () => {\n    return props.table.columns;\n  });\n  provide(\"update:columns\", (columns: any) => {\n    ctx.emit(\"update:columns\", columns);\n  });\n\n  provide(\"get:crudBinding\", () => {\n    return props;\n  });\n}\n\nfunction useSearch(props: any, ctx: SetupContext) {\n  const searchRef = ref();\n  const getSearchRef = () => {\n    return searchRef.value;\n  };\n\n  const getSearchFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getForm();\n    }\n    logger.warn(\"请使用expose.getSearchFormData代替\");\n    return {};\n  };\n\n  const getSearchValidatedFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getValidatedForm();\n    }\n    logger.warn(\"请使用expose.getSearchValidatedFormData代替\");\n    return {};\n  };\n\n  /**\n   * 设置form值\n   * @param form form对象\n   * @param opts = {\n   *    isMerge:false 是否与原有form值合并,\n   * }\n   */\n  function setSearchFormData({ form, mergeForm = false }: SetSearchFormDataProps) {\n    if (searchRef.value) {\n      searchRef.value.setForm(form, mergeForm);\n    }\n  }\n\n  return {\n    searchRef,\n    getSearchRef,\n    getSearchFormData,\n    setSearchFormData,\n    getSearchValidatedFormData\n  };\n}\n\nfunction useTabs(searchRet: any, props: any, ctx: SetupContext) {\n  const tabsBinding = computed(() => {\n    if (props.tabs && props.tabs.show && props.tabs.name) {\n      let dict = null;\n      const defaultTabs = { ...props.tabs };\n      if (props.search?.columns && props.search?.columns[props.tabs.name]?.component?.dict) {\n        dict = props.search?.columns[props.tabs.name]?.component?.dict;\n        if (defaultTabs.value == null) {\n          defaultTabs.value = dict.value;\n        }\n        if (defaultTabs.label == null) {\n          defaultTabs.label = dict.label;\n        }\n        if (defaultTabs.options == null) {\n          defaultTabs.options = dict.data || [];\n        }\n      }\n\n      return {\n        ...defaultTabs,\n        modelValue: props.search.validatedForm && props.search.validatedForm[props.tabs.name],\n        \"onUpdate:modelValue\": (value: any) => {\n          ctx.emit(\"tab-change\", { [props.tabs.name]: value });\n        }\n      };\n    }\n    return {\n      show: false\n    };\n  });\n  return {\n    tabsBinding\n  };\n}\n\nfunction slotFilter(ctxSlots: any, keyPrefix: string) {\n  if (!ctxSlots) {\n    return {};\n  }\n  const slots: any = {};\n  _.forEach(ctxSlots, (value, key) => {\n    if (key.startsWith(keyPrefix)) {\n      slots[key] = value;\n    }\n  });\n  return slots;\n}\n\nfunction useFixedHeight(props: any, ctx: SetupContext, { tableRef, containerRef }: any) {\n  const ui = uiContext.get();\n  if (ui.table.hasMaxHeight(props.table)) {\n    return {};\n  }\n  if (!ui.table.fixedHeaderNeedComputeBodyHeight) {\n    return {};\n  }\n  const maxHeightRef = ref(null);\n\n  function computeBodyHeight() {\n    const tableDom = tableRef?.value?.$el;\n    if (tableDom == null || tableDom.querySelector == null) {\n      return;\n    }\n    const headDom = tableDom.querySelector(ui.table.headerDomSelector);\n    if (headDom == null) {\n      return;\n    }\n    const tableHeight = tableDom.getBoundingClientRect().height;\n    const headHeight = headDom.getBoundingClientRect().height;\n    maxHeightRef.value = tableHeight - headHeight - 2 + (props.table.maxHeightAdjust || 0);\n\n    utilLog.debug(\"table max height recomputed \", maxHeightRef.value);\n  }\n\n  function watchBodyHeightChange() {\n    const tableDom = tableRef.value.$el;\n    if (tableDom == null) {\n      return;\n    }\n    const tableWrapperDom = tableDom.parentNode;\n\n    const observer = new ResizeObserver(function (entries) {\n      utilLog.debug(\"table resized\", entries);\n      // 每次被观测的元素尺寸发生改变这里都会执行\n      if (entries.length > 0 && entries[0].contentRect.height > 0) {\n        computeBodyHeight();\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 200);\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 500);\n      }\n    });\n    observer.observe(tableWrapperDom); // 观测DOM元素\n  }\n\n  onMounted(async () => {\n    await nextTick();\n    await nextTick();\n    watchBodyHeightChange();\n  });\n  return { maxHeightRef, computeBodyHeight };\n}\n\nfunction useTable(props: any, ctx: SetupContext) {\n  const ui = uiContext.get();\n  const tableRef = ref();\n  const toolbarRef = ref();\n  const containerRef = ref();\n  const { maxHeightRef, computeBodyHeight } = useFixedHeight(props, ctx, { tableRef, containerRef });\n  const { merge } = useMerge();\n  const tablePropRef = toRef(props, \"table\");\n  const computedTable = computed(() => {\n    // antdv naive 高度自适应， 如果用户有配置scroll，则优先使用用户配置的\n    let fixedHeight = {};\n    if (maxHeightRef?.value != null) {\n      fixedHeight = ui.table.buildMaxHeight(maxHeightRef.value);\n    }\n    const pAttrs = utils.dash.omit(tablePropRef, \"loading\", \"columns\", \"columnsMap\");\n\n    return merge(fixedHeight, { ...ctx.attrs, ...pAttrs });\n  });\n\n  const computedToolbar = toRef(props, \"toolbar\");\n\n  const computedCellSlots = computed(() => {\n    return slotFilter(ctx.slots, \"cell\");\n  });\n\n  const computedFormSlots = computed(() => {\n    return slotFilter(ctx.slots, \"form\");\n  });\n  const computedSearchSlots = computed(() => {\n    return slotFilter(ctx.slots, \"search\");\n  });\n  const computedToolbarSlots = computed(() => {\n    return slotFilter(ctx.slots, \"toolbar\");\n  });\n\n  const formWrapperRef = ref();\n\n  const computedClass = computed(() => {\n    const clazz: any = { compact: props.toolbar.compact !== false };\n    if (props.customClass) {\n      clazz[props.customClass] = true;\n    }\n    return clazz;\n  });\n\n  const innerWrapperRef = ref();\n\n  const isFormInner = ref(false);\n  const onFormInnerChange = (value: any) => {\n    isFormInner.value = value;\n  };\n\n  return {\n    tableRef,\n    containerRef,\n    toolbarRef,\n    computedTable,\n    computedToolbar,\n    computedCellSlots,\n    formWrapperRef,\n    isFormInner,\n    onFormInnerChange,\n    computedFormSlots,\n    computedSearchSlots,\n    computedToolbarSlots,\n    computeBodyHeight,\n    computedClass,\n    innerWrapperRef\n  };\n}\n\n/**\n * fs-crud\n */\nexport default defineComponent({\n  name: \"FsCrud\",\n  inheritAttrs: false,\n  props: {\n    /**\n     * 表格配置，见FsTable\n     */\n    table: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 表格数据\n     */\n    // eslint-disable-next-line vue/require-default-prop\n    data: {\n      type: Array\n    },\n    /**\n     * 操作列配置，见FsRowHandle\n     */\n    rowHandle: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查询框配置，见FsSearch\n     */\n    search: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 工具条配置，见FsToolbar\n     */\n    toolbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 动作条配置，见FsActionbar\n     */\n    actionbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * tabs filter\n     */\n    tabs: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 添加表单对话框配置，见FsFormWrapper\n     */\n    addForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 编辑表单对话框配置，见FsFormWrapper\n     */\n    editForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查看表单对话框配置，见FsFormWrapper\n     */\n    viewForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 翻页配置,支持el-pagination|a-pagination配置\n     */\n    pagination: {\n      type: Object,\n      default() {\n        return { show: false };\n      }\n    },\n    /**\n     * 容器配置，见FsContainer\n     */\n    container: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * crud包裹容器的class\n     */\n    customClass: {},\n    /**\n     * 不要传到fs-table去\n     */\n    form: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * 可选择\n     */\n    selection: {\n      type: Object as PropType<RowSelectionProps>,\n      default() {\n        return { show: false };\n      }\n    }\n  },\n  emits: [\"update:search\", \"update:compact\", \"update:columns\", \"form-value-change\", \"update:modelValue\", \"tab-change\"],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    useProviders(props, ctx);\n    const search = useSearch(props, ctx);\n    const tabs = useTabs(search, props, ctx);\n    const table = useTable(props, ctx);\n    return {\n      ui,\n      ...search,\n      ...table,\n      ...tabs\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n//作为数据表格使用的预设样式，隐藏footer，表格高度碎记录数增加而增加\n.fs-crud-as-table {\n  min-height: 0 !important;\n  height: unset;\n\n  .fs-crud-footer {\n    display: none;\n  }\n\n  .box .inner {\n    position: static;\n  }\n}\n\n.fs-crud-container {\n  min-height: 300px;\n\n  &.compact {\n    .el-table--border {\n      border-left: 0;\n    }\n\n    .fs-crud-header {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n\n    .fs-crud-footer {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n  }\n\n  .fs-crud-header {\n    display: flex;\n    padding: 10px 0;\n    flex-wrap: wrap;\n\n    .fs-header-top {\n      width: 100%;\n    }\n\n    .fs-crud-search {\n      width: 100%;\n      grid-column: span 2;\n      padding-bottom: 5px;\n    }\n\n    .fs-header-middle {\n      width: 100%;\n    }\n\n    .fs-header-bottom {\n      width: 100%;\n    }\n\n    .fs-crud-actionbar {\n      // padding-top: 5px;\n      display: flex;\n      flex: 10000;\n      align-items: center;\n      min-width: 1px;\n    }\n\n    .fs-crud-toolbar {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      margin-right: 10px;\n      flex: 1;\n    }\n  }\n\n  .fs-crud-table {\n    height: 100%;\n    width: 100%;\n  }\n\n  .fs-crud-footer {\n    padding: 10px 0;\n\n    .fs-crud-pagination {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n\n      .fs-pagination-left {\n        margin-right: 10px;\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n\n      .fs-pagination {\n        flex: 1;\n\n        .ant-pagination-options {\n          .ant-select {\n            width: auto;\n          }\n        }\n\n        .el-pagination {\n          padding-left: 0;\n          padding-right: 0;\n        }\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <component\n    :is=\"container?.is || 'fs-layout-default'\"\n    ref=\"containerRef\"\n    class=\"fs-crud-container\"\n    v-bind=\"container\"\n    :class=\"computedClass\"\n  >\n    <slot></slot>\n\n    <template #header-top>\n      <slot name=\"header-top\"></slot>\n    </template>\n    <template #header-bottom>\n      <slot name=\"header-bottom\"></slot>\n    </template>\n    <template #header-middle>\n      <slot name=\"header-middle\"></slot>\n    </template>\n\n    <template #search>\n      <div class=\"fs-crud-search\">\n        <component :is=\"search.is || 'fs-search'\" ref=\"searchRef\" v-bind=\"search\" :slots=\"computedSearchSlots\" />\n      </div>\n    </template>\n\n    <template #actionbar>\n      <div v-if=\"actionbar && actionbar.show !== false\" class=\"fs-crud-actionbar\">\n        <slot name=\"actionbar-left\"></slot>\n        <fs-actionbar v-bind=\"actionbar\" />\n        <slot name=\"actionbar-right\"></slot>\n      </div>\n    </template>\n\n    <template #toolbar>\n      <div v-if=\"toolbar && toolbar.show !== false\" class=\"fs-crud-toolbar\">\n        <slot name=\"toolbar-left\"></slot>\n        <fs-toolbar ref=\"toolbarRef\" v-bind=\"toolbar\" :slots=\"computedToolbarSlots\" :columns=\"table.columns\" />\n        <slot name=\"toolbar-right\"></slot>\n      </div>\n    </template>\n    <template #tabs>\n      <fs-tabs-filter v-if=\"tabsBinding.show\" ref=\"tabsRef\" class=\"fs-tabs\" v-bind=\"tabsBinding\" />\n    </template>\n    <template #table>\n      <fs-table\n        ref=\"tableRef\"\n        class=\"fs-crud-table\"\n        v-bind=\"computedTable\"\n        :columns=\"table.columns\"\n        :loading=\"table.loading\"\n        :row-handle=\"rowHandle\"\n        :data=\"data\"\n        :cell-slots=\"computedCellSlots\"\n      />\n    </template>\n\n    <template #form>\n      <div ref=\"innerWrapperRef\" class=\"fs-form-wrapper-container\" :class=\"{ 'fs-form-inner-wrapper': isFormInner }\">\n        <fs-form-wrapper\n          ref=\"formWrapperRef\"\n          :slots=\"computedFormSlots\"\n          :inner-wrapper=\"innerWrapperRef\"\n          @inner-change=\"onFormInnerChange\"\n          @value-change=\"$emit('form-value-change', $event)\"\n        />\n        <!-- 编辑对话框 -->\n      </div>\n    </template>\n\n    <template #pagination>\n      <div class=\"fs-crud-pagination\">\n        <div class=\"fs-pagination-left\">\n          <slot name=\"pagination-left\"></slot>\n        </div>\n        <div class=\"fs-pagination\">\n          <!-- pagination.currentPage 如果为空， element会出警告 -->\n          <component :is=\"ui.pagination.name\" v-if=\"pagination.show !== false\" v-bind=\"pagination\" />\n        </div>\n        <div class=\"fs-pagination-right\">\n          <slot name=\"pagination-right\"></slot>\n        </div>\n      </div>\n    </template>\n\n    <template #footer-top>\n      <slot name=\"footer-top\"></slot>\n    </template>\n    <template #footer-bottom>\n      <slot name=\"footer-bottom\"></slot>\n    </template>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, PropType, provide, ref, SetupContext, toRef } from \"vue\";\nimport _ from \"lodash-es\";\nimport { uiContext } from \"../ui\";\nimport { useMerge } from \"../use/use-merge\";\nimport utilLog from \"../utils/util.log\";\nimport { RowSelectionProps, SetSearchFormDataProps } from \"../d\";\nimport { useUi } from \"../use\";\nimport { utils } from \"../utils\";\nimport logger from \"../utils/util.log\";\n\nconst { merge } = useMerge();\n\nfunction useProviders(props: any, ctx: SetupContext) {\n  provide(\"get:columns\", () => {\n    return props.table.columns;\n  });\n  provide(\"update:columns\", (columns: any) => {\n    ctx.emit(\"update:columns\", columns);\n  });\n\n  provide(\"get:crudBinding\", () => {\n    return props;\n  });\n}\n\nfunction useSearch(props: any, ctx: SetupContext) {\n  const searchRef = ref();\n  const getSearchRef = () => {\n    return searchRef.value;\n  };\n\n  const getSearchFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getForm();\n    }\n    logger.warn(\"请使用expose.getSearchFormData代替\");\n    return {};\n  };\n\n  const getSearchValidatedFormData = () => {\n    if (searchRef.value) {\n      return searchRef.value.getValidatedForm();\n    }\n    logger.warn(\"请使用expose.getSearchValidatedFormData代替\");\n    return {};\n  };\n\n  /**\n   * 设置form值\n   * @param form form对象\n   * @param opts = {\n   *    isMerge:false 是否与原有form值合并,\n   * }\n   */\n  function setSearchFormData({ form, mergeForm = false }: SetSearchFormDataProps) {\n    if (searchRef.value) {\n      searchRef.value.setForm(form, mergeForm);\n    }\n  }\n\n  return {\n    searchRef,\n    getSearchRef,\n    getSearchFormData,\n    setSearchFormData,\n    getSearchValidatedFormData\n  };\n}\n\nfunction useTabs(searchRet: any, props: any, ctx: SetupContext) {\n  const tabsBinding = computed(() => {\n    if (props.tabs && props.tabs.show && props.tabs.name) {\n      let dict = null;\n      const defaultTabs = { ...props.tabs };\n      if (props.search?.columns && props.search?.columns[props.tabs.name]?.component?.dict) {\n        dict = props.search?.columns[props.tabs.name]?.component?.dict;\n        if (defaultTabs.value == null) {\n          defaultTabs.value = dict.value;\n        }\n        if (defaultTabs.label == null) {\n          defaultTabs.label = dict.label;\n        }\n        if (defaultTabs.options == null) {\n          defaultTabs.options = dict.data || [];\n        }\n      }\n\n      return {\n        ...defaultTabs,\n        modelValue: props.search.validatedForm && props.search.validatedForm[props.tabs.name],\n        \"onUpdate:modelValue\": (value: any) => {\n          ctx.emit(\"tab-change\", { [props.tabs.name]: value });\n        }\n      };\n    }\n    return {\n      show: false\n    };\n  });\n  return {\n    tabsBinding\n  };\n}\n\nfunction slotFilter(ctxSlots: any, keyPrefix: string) {\n  if (!ctxSlots) {\n    return {};\n  }\n  const slots: any = {};\n  _.forEach(ctxSlots, (value, key) => {\n    if (key.startsWith(keyPrefix)) {\n      slots[key] = value;\n    }\n  });\n  return slots;\n}\n\nfunction useFixedHeight(props: any, ctx: SetupContext, { tableRef, containerRef }: any) {\n  const ui = uiContext.get();\n  if (ui.table.hasMaxHeight(props.table)) {\n    return {};\n  }\n  if (!ui.table.fixedHeaderNeedComputeBodyHeight) {\n    return {};\n  }\n  const maxHeightRef = ref(null);\n\n  function computeBodyHeight() {\n    const tableDom = tableRef?.value?.$el;\n    if (tableDom == null || tableDom.querySelector == null) {\n      return;\n    }\n    const headDom = tableDom.querySelector(ui.table.headerDomSelector);\n    if (headDom == null) {\n      return;\n    }\n    const tableHeight = tableDom.getBoundingClientRect().height;\n    const headHeight = headDom.getBoundingClientRect().height;\n    maxHeightRef.value = tableHeight - headHeight - 2 + (props.table.maxHeightAdjust || 0);\n\n    utilLog.debug(\"table max height recomputed \", maxHeightRef.value);\n  }\n\n  function watchBodyHeightChange() {\n    const tableDom = tableRef.value.$el;\n    if (tableDom == null) {\n      return;\n    }\n    const tableWrapperDom = tableDom.parentNode;\n\n    const observer = new ResizeObserver(function (entries) {\n      utilLog.debug(\"table resized\", entries);\n      // 每次被观测的元素尺寸发生改变这里都会执行\n      if (entries.length > 0 && entries[0].contentRect.height > 0) {\n        computeBodyHeight();\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 200);\n        setTimeout(() => {\n          computeBodyHeight();\n        }, 500);\n      }\n    });\n    observer.observe(tableWrapperDom); // 观测DOM元素\n  }\n\n  onMounted(async () => {\n    await nextTick();\n    await nextTick();\n    watchBodyHeightChange();\n  });\n  return { maxHeightRef, computeBodyHeight };\n}\n\nfunction useTable(props: any, ctx: SetupContext) {\n  const ui = uiContext.get();\n  const tableRef = ref();\n  const toolbarRef = ref();\n  const containerRef = ref();\n  const { maxHeightRef, computeBodyHeight } = useFixedHeight(props, ctx, { tableRef, containerRef });\n  const { merge } = useMerge();\n  const tablePropRef = toRef(props, \"table\");\n  const computedTable = computed(() => {\n    // antdv naive 高度自适应， 如果用户有配置scroll，则优先使用用户配置的\n    let fixedHeight = {};\n    if (maxHeightRef?.value != null) {\n      fixedHeight = ui.table.buildMaxHeight(maxHeightRef.value);\n    }\n    const pAttrs = utils.dash.omit(tablePropRef, \"loading\", \"columns\", \"columnsMap\");\n\n    return merge(fixedHeight, { ...ctx.attrs, ...pAttrs });\n  });\n\n  const computedToolbar = toRef(props, \"toolbar\");\n\n  const computedCellSlots = computed(() => {\n    return slotFilter(ctx.slots, \"cell\");\n  });\n\n  const computedFormSlots = computed(() => {\n    return slotFilter(ctx.slots, \"form\");\n  });\n  const computedSearchSlots = computed(() => {\n    return slotFilter(ctx.slots, \"search\");\n  });\n  const computedToolbarSlots = computed(() => {\n    return slotFilter(ctx.slots, \"toolbar\");\n  });\n\n  const formWrapperRef = ref();\n\n  const computedClass = computed(() => {\n    const clazz: any = { compact: props.toolbar.compact !== false };\n    if (props.customClass) {\n      clazz[props.customClass] = true;\n    }\n    return clazz;\n  });\n\n  const innerWrapperRef = ref();\n\n  const isFormInner = ref(false);\n  const onFormInnerChange = (value: any) => {\n    isFormInner.value = value;\n  };\n\n  return {\n    tableRef,\n    containerRef,\n    toolbarRef,\n    computedTable,\n    computedToolbar,\n    computedCellSlots,\n    formWrapperRef,\n    isFormInner,\n    onFormInnerChange,\n    computedFormSlots,\n    computedSearchSlots,\n    computedToolbarSlots,\n    computeBodyHeight,\n    computedClass,\n    innerWrapperRef\n  };\n}\n\n/**\n * fs-crud\n */\nexport default defineComponent({\n  name: \"FsCrud\",\n  inheritAttrs: false,\n  props: {\n    /**\n     * 表格配置，见FsTable\n     */\n    table: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 表格数据\n     */\n    // eslint-disable-next-line vue/require-default-prop\n    data: {\n      type: Array\n    },\n    /**\n     * 操作列配置，见FsRowHandle\n     */\n    rowHandle: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查询框配置，见FsSearch\n     */\n    search: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 工具条配置，见FsToolbar\n     */\n    toolbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 动作条配置，见FsActionbar\n     */\n    actionbar: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * tabs filter\n     */\n    tabs: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 添加表单对话框配置，见FsFormWrapper\n     */\n    addForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 编辑表单对话框配置，见FsFormWrapper\n     */\n    editForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 查看表单对话框配置，见FsFormWrapper\n     */\n    viewForm: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 翻页配置,支持el-pagination|a-pagination配置\n     */\n    pagination: {\n      type: Object,\n      default() {\n        return { show: false };\n      }\n    },\n    /**\n     * 容器配置，见FsContainer\n     */\n    container: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * crud包裹容器的class\n     */\n    customClass: {},\n    /**\n     * 不要传到fs-table去\n     */\n    form: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n\n    /**\n     * 可选择\n     */\n    selection: {\n      type: Object as PropType<RowSelectionProps>,\n      default() {\n        return { show: false };\n      }\n    }\n  },\n  emits: [\"update:search\", \"update:compact\", \"update:columns\", \"form-value-change\", \"update:modelValue\", \"tab-change\"],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    useProviders(props, ctx);\n    const search = useSearch(props, ctx);\n    const tabs = useTabs(search, props, ctx);\n    const table = useTable(props, ctx);\n    return {\n      ui,\n      ...search,\n      ...table,\n      ...tabs\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n//作为数据表格使用的预设样式，隐藏footer，表格高度碎记录数增加而增加\n.fs-crud-as-table {\n  min-height: 0 !important;\n  height: unset;\n\n  .fs-crud-footer {\n    display: none;\n  }\n\n  .box .inner {\n    position: static;\n  }\n}\n\n.fs-crud-container {\n  min-height: 300px;\n\n  &.compact {\n    .el-table--border {\n      border-left: 0;\n    }\n\n    .fs-crud-header {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n\n    .fs-crud-footer {\n      padding-left: 10px;\n      padding-right: 10px;\n    }\n  }\n\n  .fs-crud-header {\n    display: flex;\n    padding: 10px 0;\n    flex-wrap: wrap;\n\n    .fs-header-top {\n      width: 100%;\n    }\n\n    .fs-crud-search {\n      width: 100%;\n      grid-column: span 2;\n      padding-bottom: 5px;\n    }\n\n    .fs-header-middle {\n      width: 100%;\n    }\n\n    .fs-header-bottom {\n      width: 100%;\n    }\n\n    .fs-crud-actionbar {\n      // padding-top: 5px;\n      display: flex;\n      flex: 10000;\n      align-items: center;\n      min-width: 1px;\n    }\n\n    .fs-crud-toolbar {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      margin-right: 10px;\n      flex: 1;\n    }\n  }\n\n  .fs-crud-table {\n    height: 100%;\n    width: 100%;\n  }\n\n  .fs-crud-footer {\n    padding: 10px 0;\n\n    .fs-crud-pagination {\n      display: flex;\n      flex-direction: row;\n      justify-content: center;\n      align-items: center;\n\n      .fs-pagination-left {\n        margin-right: 10px;\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n\n      .fs-pagination {\n        flex: 1;\n\n        .ant-pagination-options {\n          .ant-select {\n            width: auto;\n          }\n        }\n\n        .el-pagination {\n          padding-left: 0;\n          padding-right: 0;\n        }\n      }\n\n      .fs-pagination-right {\n        flex: 0;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-row-handle\">\n    <slot name=\"cell-rowHandle-left\" v-bind=\"scope\"></slot>\n    <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n      <fs-button\n        v-if=\"item.show !== false && !isDropdownBtn(item, index)\"\n        class=\"row-handle-btn\"\n        v-bind=\"item\"\n        @click.stop=\"doClick(item)\"\n      />\n    </template>\n    <slot name=\"cell-rowHandle-middle\" v-bind=\"scope\"></slot>\n    <!-- 下拉按钮菜单 -->\n    <span v-if=\"hasDropdownBtn\" class=\"row-handle-btn fs-handle-row-dropdown\">\n      <component :is=\"ui.dropdown.name\" v-bind=\"computedDropdownBinding\">\n        <fs-button v-bind=\"dropdown.more\" />\n        <template #[ui.dropdown.slotName]>\n          <component\n            :is=\"ui.dropdownMenu.name\"\n            v-if=\"ui.dropdown.renderMode === 'slot'\"\n            v-bind=\"ui.dropdownMenu.command(doDropdownItemClick)\"\n          >\n            <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n              <component\n                :is=\"ui.dropdownItem.name\"\n                v-if=\"item.show !== false && isDropdownBtn(item, index)\"\n                :[ui.dropdownItem.command]=\"item.key\"\n                v-bind=\"item.dropdownItem\"\n                :disabled=\"item.disabled\"\n              >\n                <div class=\"fs-row-handle-dropdown-item\" v-bind=\"item\">\n                  <fs-icon v-if=\"item.icon\" :icon=\"item.icon\" /> {{ item.text || item.title }}\n                </div>\n              </component>\n            </template>\n          </component>\n        </template>\n      </component>\n    </span>\n    <slot name=\"cell-rowHandle-right\" v-bind=\"scope\"></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent } from \"vue\";\nimport _ from \"lodash-es\";\nimport traceUtil from \"../../utils/util.trace\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ScopeContext } from \"../../d\";\nimport { useMerge } from \"../../use\";\n\n/**\n * 操作列配置\n */\nexport default defineComponent({\n  name: \"FsRowHandle\",\n  props: {\n    /**\n     * 按钮折叠配置\n     */\n    dropdown: {\n      type: Object\n    },\n    /**\n     * 按钮配置\n     * {\n     *   view:{...FsButton,click:Function,order:1},\n     *   edit:{...FsButton,click:Function,order:2},\n     *   remove:{...FsButton,click:Function,order:3},\n     *   ...自定义\n     * }\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 按钮分组,上面的buttons为默认分组\n     *  {\n     *    groupKey:{buttonKey:{},buttonKey2:{}}\n     *  }\n     */\n    group: {\n      type: Object\n    },\n    /**\n     * 当前激活分组\n     */\n    active: {\n      type: String,\n      default: \"default\"\n    },\n    /**\n     * scope\n     */\n    scope: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  emits: [\"handle\"],\n  setup(props: any, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const { t } = useI18n();\n    const doClick = (item: any) => {\n      const index = props.scope[ui.tableColumn.index];\n      const row = props.scope[ui.tableColumn.row];\n      const e: ScopeContext = { key: item.key, row, btn: item, index, ...props.scope };\n      if (item.click) {\n        return item.click(e);\n      }\n      ctx.emit(\"handle\", e);\n    };\n    const { doComputed } = useCompute();\n    const pickedProps = computed(() => {\n      return {\n        dropdown: props.dropdown,\n        buttons: props.buttons,\n        active: props.active,\n        group: props.group\n      };\n    });\n    const computeProps = doComputed(\n      () => {\n        return pickedProps.value;\n      },\n      () => {\n        const index = props.scope[ui.tableColumn.index];\n        const row = props.scope[ui.tableColumn.row];\n        return { ...props.scope, index, row };\n      }\n    );\n\n    //const computeProps = { value: props };\n    const computedHandleBtns = computed(() => {\n      let mergedBtns = null;\n      if (computeProps.value.active == null || computeProps.value.active === \"default\") {\n        const defBtns = {\n          view: {\n            key: \"view\",\n            text: t(\"fs.rowHandle.view.text\"),\n            title: t(\"fs.rowHandle.view.text\")\n          },\n          copy: {\n            key: \"copy\",\n            text: t(\"fs.rowHandle.copy.text\"),\n            title: t(\"fs.rowHandle.copy.text\")\n          },\n          edit: {\n            key: \"edit\",\n            type: \"primary\",\n            text: t(\"fs.rowHandle.edit.text\"),\n            title: t(\"fs.rowHandle.edit.text\")\n          },\n          remove: {\n            key: \"remove\",\n            ...ui.button.colors(\"danger\"),\n            text: t(\"fs.rowHandle.remove.text\"),\n            title: t(\"fs.rowHandle.remove.text\")\n          }\n        };\n        mergedBtns = merge(defBtns, computeProps.value.buttons);\n      } else {\n        mergedBtns = computeProps.value.group[computeProps.value.active];\n      }\n\n      const btns: ButtonProps[] = [];\n      _.forEach(mergedBtns, (item, key) => {\n        item.key = key;\n        if (item.show === false) {\n          return;\n        }\n        btns.push(item);\n      });\n\n      return _.sortBy(btns, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n    });\n\n    const computedDropdownAtLeast = computed(() => {\n      if (\n        computeProps.value.dropdown == null ||\n        computeProps.value.dropdown.atLeast == null ||\n        computeProps.value.dropdown.atLeast <= 0 ||\n        computedHandleBtns.value.length <= computeProps.value.dropdown.atLeast\n      ) {\n        return 0;\n      }\n      return computeProps.value.dropdown.atLeast || 0;\n    });\n    function isDropdownBtn(item: any, index: number) {\n      if (item.dropdown === true) {\n        return true;\n      }\n      if (computedDropdownAtLeast.value > 0 && computedDropdownAtLeast.value < index) {\n        return true;\n      }\n      return false;\n    }\n    const hasDropdownBtn = computed(() => {\n      let index = 0;\n      for (const item of computedHandleBtns.value) {\n        const is = isDropdownBtn(item, index);\n        if (is) {\n          return true;\n        }\n        index++;\n      }\n      return false;\n    });\n\n    function doDropdownItemClick($event: any) {\n      for (let btn of computedHandleBtns.value) {\n        if ($event === btn.key) {\n          doClick(btn);\n          return;\n        }\n      }\n    }\n\n    const computedDropdownBinding = computed(() => {\n      const binding: any = {};\n      if (ui.dropdown.renderMode !== \"slot\") {\n        // naive 通过options配置来显示子项\n        const btns = computedHandleBtns.value;\n        const opts: ButtonProps[] = [];\n        _.forEach(btns, (value, index) => {\n          if (value.show !== false && isDropdownBtn(value, index)) {\n            opts.push({\n              [ui.dropdown.value]: value.key,\n              [ui.dropdown.label]: value.text,\n              title: value.title\n            });\n          }\n        });\n        binding.options = opts;\n      }\n      return {\n        ..._.omit(props.dropdown, \"more\", \"atLeast\"),\n        ...ui.dropdown.command(doDropdownItemClick),\n        ...binding\n      };\n    });\n\n    return {\n      ui,\n      hasDropdownBtn,\n      computedHandleBtns,\n      doDropdownItemClick,\n      computedDropdownAtLeast,\n      doClick,\n      isDropdownBtn,\n      computedDropdownBinding\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-row-handle {\n  // display: flex ; // 这里不能用flex，否则会破坏align:center配置\n  flex-wrap: wrap;\n  display: inline-flex;\n  align-items: center;\n  .el-button + .el-button {\n    margin-left: 2px;\n  }\n  & > * {\n    margin: 2px;\n    display: inline-flex;\n    align-items: center;\n  }\n  .fs-row-handle-dropdown-item {\n    display: flex;\n  }\n\n  .n-button {\n    align-items: center;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-row-handle\">\n    <slot name=\"cell-rowHandle-left\" v-bind=\"scope\"></slot>\n    <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n      <fs-button\n        v-if=\"item.show !== false && !isDropdownBtn(item, index)\"\n        class=\"row-handle-btn\"\n        v-bind=\"item\"\n        @click.stop=\"doClick(item)\"\n      />\n    </template>\n    <slot name=\"cell-rowHandle-middle\" v-bind=\"scope\"></slot>\n    <!-- 下拉按钮菜单 -->\n    <span v-if=\"hasDropdownBtn\" class=\"row-handle-btn fs-handle-row-dropdown\">\n      <component :is=\"ui.dropdown.name\" v-bind=\"computedDropdownBinding\">\n        <fs-button v-bind=\"dropdown.more\" />\n        <template #[ui.dropdown.slotName]>\n          <component\n            :is=\"ui.dropdownMenu.name\"\n            v-if=\"ui.dropdown.renderMode === 'slot'\"\n            v-bind=\"ui.dropdownMenu.command(doDropdownItemClick)\"\n          >\n            <template v-for=\"(item, index) in computedHandleBtns\" :key=\"index\">\n              <component\n                :is=\"ui.dropdownItem.name\"\n                v-if=\"item.show !== false && isDropdownBtn(item, index)\"\n                :[ui.dropdownItem.command]=\"item.key\"\n                v-bind=\"item.dropdownItem\"\n                :disabled=\"item.disabled\"\n              >\n                <div class=\"fs-row-handle-dropdown-item\" v-bind=\"item\">\n                  <fs-icon v-if=\"item.icon\" :icon=\"item.icon\" /> {{ item.text || item.title }}\n                </div>\n              </component>\n            </template>\n          </component>\n        </template>\n      </component>\n    </span>\n    <slot name=\"cell-rowHandle-right\" v-bind=\"scope\"></slot>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent } from \"vue\";\nimport _ from \"lodash-es\";\nimport traceUtil from \"../../utils/util.trace\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ScopeContext } from \"../../d\";\nimport { useMerge } from \"../../use\";\n\n/**\n * 操作列配置\n */\nexport default defineComponent({\n  name: \"FsRowHandle\",\n  props: {\n    /**\n     * 按钮折叠配置\n     */\n    dropdown: {\n      type: Object\n    },\n    /**\n     * 按钮配置\n     * {\n     *   view:{...FsButton,click:Function,order:1},\n     *   edit:{...FsButton,click:Function,order:2},\n     *   remove:{...FsButton,click:Function,order:3},\n     *   ...自定义\n     * }\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 按钮分组,上面的buttons为默认分组\n     *  {\n     *    groupKey:{buttonKey:{},buttonKey2:{}}\n     *  }\n     */\n    group: {\n      type: Object\n    },\n    /**\n     * 当前激活分组\n     */\n    active: {\n      type: String,\n      default: \"default\"\n    },\n    /**\n     * scope\n     */\n    scope: {\n      type: Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  emits: [\"handle\"],\n  setup(props: any, ctx) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const { t } = useI18n();\n    const doClick = (item: any) => {\n      const index = props.scope[ui.tableColumn.index];\n      const row = props.scope[ui.tableColumn.row];\n      const e: ScopeContext = { key: item.key, row, btn: item, index, ...props.scope };\n      if (item.click) {\n        return item.click(e);\n      }\n      ctx.emit(\"handle\", e);\n    };\n    const { doComputed } = useCompute();\n    const pickedProps = computed(() => {\n      return {\n        dropdown: props.dropdown,\n        buttons: props.buttons,\n        active: props.active,\n        group: props.group\n      };\n    });\n    const computeProps = doComputed(\n      () => {\n        return pickedProps.value;\n      },\n      () => {\n        const index = props.scope[ui.tableColumn.index];\n        const row = props.scope[ui.tableColumn.row];\n        return { ...props.scope, index, row };\n      }\n    );\n\n    //const computeProps = { value: props };\n    const computedHandleBtns = computed(() => {\n      let mergedBtns = null;\n      if (computeProps.value.active == null || computeProps.value.active === \"default\") {\n        const defBtns = {\n          view: {\n            key: \"view\",\n            text: t(\"fs.rowHandle.view.text\"),\n            title: t(\"fs.rowHandle.view.text\")\n          },\n          copy: {\n            key: \"copy\",\n            text: t(\"fs.rowHandle.copy.text\"),\n            title: t(\"fs.rowHandle.copy.text\")\n          },\n          edit: {\n            key: \"edit\",\n            type: \"primary\",\n            text: t(\"fs.rowHandle.edit.text\"),\n            title: t(\"fs.rowHandle.edit.text\")\n          },\n          remove: {\n            key: \"remove\",\n            ...ui.button.colors(\"danger\"),\n            text: t(\"fs.rowHandle.remove.text\"),\n            title: t(\"fs.rowHandle.remove.text\")\n          }\n        };\n        mergedBtns = merge(defBtns, computeProps.value.buttons);\n      } else {\n        mergedBtns = computeProps.value.group[computeProps.value.active];\n      }\n\n      const btns: ButtonProps[] = [];\n      _.forEach(mergedBtns, (item, key) => {\n        item.key = key;\n        if (item.show === false) {\n          return;\n        }\n        btns.push(item);\n      });\n\n      return _.sortBy(btns, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n    });\n\n    const computedDropdownAtLeast = computed(() => {\n      if (\n        computeProps.value.dropdown == null ||\n        computeProps.value.dropdown.atLeast == null ||\n        computeProps.value.dropdown.atLeast <= 0 ||\n        computedHandleBtns.value.length <= computeProps.value.dropdown.atLeast\n      ) {\n        return 0;\n      }\n      return computeProps.value.dropdown.atLeast || 0;\n    });\n    function isDropdownBtn(item: any, index: number) {\n      if (item.dropdown === true) {\n        return true;\n      }\n      if (computedDropdownAtLeast.value > 0 && computedDropdownAtLeast.value < index) {\n        return true;\n      }\n      return false;\n    }\n    const hasDropdownBtn = computed(() => {\n      let index = 0;\n      for (const item of computedHandleBtns.value) {\n        const is = isDropdownBtn(item, index);\n        if (is) {\n          return true;\n        }\n        index++;\n      }\n      return false;\n    });\n\n    function doDropdownItemClick($event: any) {\n      for (let btn of computedHandleBtns.value) {\n        if ($event === btn.key) {\n          doClick(btn);\n          return;\n        }\n      }\n    }\n\n    const computedDropdownBinding = computed(() => {\n      const binding: any = {};\n      if (ui.dropdown.renderMode !== \"slot\") {\n        // naive 通过options配置来显示子项\n        const btns = computedHandleBtns.value;\n        const opts: ButtonProps[] = [];\n        _.forEach(btns, (value, index) => {\n          if (value.show !== false && isDropdownBtn(value, index)) {\n            opts.push({\n              [ui.dropdown.value]: value.key,\n              [ui.dropdown.label]: value.text,\n              title: value.title\n            });\n          }\n        });\n        binding.options = opts;\n      }\n      return {\n        ..._.omit(props.dropdown, \"more\", \"atLeast\"),\n        ...ui.dropdown.command(doDropdownItemClick),\n        ...binding\n      };\n    });\n\n    return {\n      ui,\n      hasDropdownBtn,\n      computedHandleBtns,\n      doDropdownItemClick,\n      computedDropdownAtLeast,\n      doClick,\n      isDropdownBtn,\n      computedDropdownBinding\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-row-handle {\n  // display: flex ; // 这里不能用flex，否则会破坏align:center配置\n  flex-wrap: wrap;\n  display: inline-flex;\n  align-items: center;\n  .el-button + .el-button {\n    margin-left: 2px;\n  }\n  & > * {\n    margin: 2px;\n    display: inline-flex;\n    align-items: center;\n  }\n  .fs-row-handle-dropdown-item {\n    display: flex;\n  }\n\n  .n-button {\n    align-items: center;\n  }\n}\n</style>\n", "function _extends() {\n  _extends = Object.assign ? Object.assign.bind() : function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nfunction _construct(Parent, args, Class) {\n  if (_isNativeReflectConstruct()) {\n    _construct = Reflect.construct.bind();\n  } else {\n    _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) _setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nfunction _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !_isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return _construct(Class, arguments, _getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return _setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\n/* eslint no-console:0 */\nvar formatRegExp = /%[sdj%]/g;\nvar warning = function warning() {}; // don't print warning message when in production env or node runtime\n\nif (typeof process !== 'undefined' && process.env && process.env.NODE_ENV !== 'production' && typeof window !== 'undefined' && typeof document !== 'undefined') {\n  warning = function warning(type, errors) {\n    if (typeof console !== 'undefined' && console.warn && typeof ASYNC_VALIDATOR_NO_WARNING === 'undefined') {\n      if (errors.every(function (e) {\n        return typeof e === 'string';\n      })) {\n        console.warn(type, errors);\n      }\n    }\n  };\n}\n\nfunction convertFieldsError(errors) {\n  if (!errors || !errors.length) return null;\n  var fields = {};\n  errors.forEach(function (error) {\n    var field = error.field;\n    fields[field] = fields[field] || [];\n    fields[field].push(error);\n  });\n  return fields;\n}\nfunction format(template) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n\n  var i = 0;\n  var len = args.length;\n\n  if (typeof template === 'function') {\n    return template.apply(null, args);\n  }\n\n  if (typeof template === 'string') {\n    var str = template.replace(formatRegExp, function (x) {\n      if (x === '%%') {\n        return '%';\n      }\n\n      if (i >= len) {\n        return x;\n      }\n\n      switch (x) {\n        case '%s':\n          return String(args[i++]);\n\n        case '%d':\n          return Number(args[i++]);\n\n        case '%j':\n          try {\n            return JSON.stringify(args[i++]);\n          } catch (_) {\n            return '[Circular]';\n          }\n\n          break;\n\n        default:\n          return x;\n      }\n    });\n    return str;\n  }\n\n  return template;\n}\n\nfunction isNativeStringType(type) {\n  return type === 'string' || type === 'url' || type === 'hex' || type === 'email' || type === 'date' || type === 'pattern';\n}\n\nfunction isEmptyValue(value, type) {\n  if (value === undefined || value === null) {\n    return true;\n  }\n\n  if (type === 'array' && Array.isArray(value) && !value.length) {\n    return true;\n  }\n\n  if (isNativeStringType(type) && typeof value === 'string' && !value) {\n    return true;\n  }\n\n  return false;\n}\n\nfunction asyncParallelArray(arr, func, callback) {\n  var results = [];\n  var total = 0;\n  var arrLength = arr.length;\n\n  function count(errors) {\n    results.push.apply(results, errors || []);\n    total++;\n\n    if (total === arrLength) {\n      callback(results);\n    }\n  }\n\n  arr.forEach(function (a) {\n    func(a, count);\n  });\n}\n\nfunction asyncSerialArray(arr, func, callback) {\n  var index = 0;\n  var arrLength = arr.length;\n\n  function next(errors) {\n    if (errors && errors.length) {\n      callback(errors);\n      return;\n    }\n\n    var original = index;\n    index = index + 1;\n\n    if (original < arrLength) {\n      func(arr[original], next);\n    } else {\n      callback([]);\n    }\n  }\n\n  next([]);\n}\n\nfunction flattenObjArr(objArr) {\n  var ret = [];\n  Object.keys(objArr).forEach(function (k) {\n    ret.push.apply(ret, objArr[k] || []);\n  });\n  return ret;\n}\n\nvar AsyncValidationError = /*#__PURE__*/function (_Error) {\n  _inheritsLoose(AsyncValidationError, _Error);\n\n  function AsyncValidationError(errors, fields) {\n    var _this;\n\n    _this = _Error.call(this, 'Async Validation Error') || this;\n    _this.errors = errors;\n    _this.fields = fields;\n    return _this;\n  }\n\n  return AsyncValidationError;\n}( /*#__PURE__*/_wrapNativeSuper(Error));\nfunction asyncMap(objArr, option, func, callback, source) {\n  if (option.first) {\n    var _pending = new Promise(function (resolve, reject) {\n      var next = function next(errors) {\n        callback(errors);\n        return errors.length ? reject(new AsyncValidationError(errors, convertFieldsError(errors))) : resolve(source);\n      };\n\n      var flattenArr = flattenObjArr(objArr);\n      asyncSerialArray(flattenArr, func, next);\n    });\n\n    _pending[\"catch\"](function (e) {\n      return e;\n    });\n\n    return _pending;\n  }\n\n  var firstFields = option.firstFields === true ? Object.keys(objArr) : option.firstFields || [];\n  var objArrKeys = Object.keys(objArr);\n  var objArrLength = objArrKeys.length;\n  var total = 0;\n  var results = [];\n  var pending = new Promise(function (resolve, reject) {\n    var next = function next(errors) {\n      results.push.apply(results, errors);\n      total++;\n\n      if (total === objArrLength) {\n        callback(results);\n        return results.length ? reject(new AsyncValidationError(results, convertFieldsError(results))) : resolve(source);\n      }\n    };\n\n    if (!objArrKeys.length) {\n      callback(results);\n      resolve(source);\n    }\n\n    objArrKeys.forEach(function (key) {\n      var arr = objArr[key];\n\n      if (firstFields.indexOf(key) !== -1) {\n        asyncSerialArray(arr, func, next);\n      } else {\n        asyncParallelArray(arr, func, next);\n      }\n    });\n  });\n  pending[\"catch\"](function (e) {\n    return e;\n  });\n  return pending;\n}\n\nfunction isErrorObj(obj) {\n  return !!(obj && obj.message !== undefined);\n}\n\nfunction getValue(value, path) {\n  var v = value;\n\n  for (var i = 0; i < path.length; i++) {\n    if (v == undefined) {\n      return v;\n    }\n\n    v = v[path[i]];\n  }\n\n  return v;\n}\n\nfunction complementError(rule, source) {\n  return function (oe) {\n    var fieldValue;\n\n    if (rule.fullFields) {\n      fieldValue = getValue(source, rule.fullFields);\n    } else {\n      fieldValue = source[oe.field || rule.fullField];\n    }\n\n    if (isErrorObj(oe)) {\n      oe.field = oe.field || rule.fullField;\n      oe.fieldValue = fieldValue;\n      return oe;\n    }\n\n    return {\n      message: typeof oe === 'function' ? oe() : oe,\n      fieldValue: fieldValue,\n      field: oe.field || rule.fullField\n    };\n  };\n}\nfunction deepMerge(target, source) {\n  if (source) {\n    for (var s in source) {\n      if (source.hasOwnProperty(s)) {\n        var value = source[s];\n\n        if (typeof value === 'object' && typeof target[s] === 'object') {\n          target[s] = _extends({}, target[s], value);\n        } else {\n          target[s] = value;\n        }\n      }\n    }\n  }\n\n  return target;\n}\n\nvar required$1 = function required(rule, value, source, errors, options, type) {\n  if (rule.required && (!source.hasOwnProperty(rule.field) || isEmptyValue(value, type || rule.type))) {\n    errors.push(format(options.messages.required, rule.fullField));\n  }\n};\n\n/**\n *  Rule for validating whitespace.\n *\n *  @param rule The validation rule.\n *  @param value The value of the field on the source object.\n *  @param source The source object being validated.\n *  @param errors An array of errors that this rule may add\n *  validation errors to.\n *  @param options The validation options.\n *  @param options.messages The validation messages.\n */\n\nvar whitespace = function whitespace(rule, value, source, errors, options) {\n  if (/^\\s+$/.test(value) || value === '') {\n    errors.push(format(options.messages.whitespace, rule.fullField));\n  }\n};\n\n// https://github.com/kevva/url-regex/blob/master/index.js\nvar urlReg;\nvar getUrlRegex = (function () {\n  if (urlReg) {\n    return urlReg;\n  }\n\n  var word = '[a-fA-F\\\\d:]';\n\n  var b = function b(options) {\n    return options && options.includeBoundaries ? \"(?:(?<=\\\\s|^)(?=\" + word + \")|(?<=\" + word + \")(?=\\\\s|$))\" : '';\n  };\n\n  var v4 = '(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)(?:\\\\.(?:25[0-5]|2[0-4]\\\\d|1\\\\d\\\\d|[1-9]\\\\d|\\\\d)){3}';\n  var v6seg = '[a-fA-F\\\\d]{1,4}';\n  var v6 = (\"\\n(?:\\n(?:\" + v6seg + \":){7}(?:\" + v6seg + \"|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8\\n(?:\" + v6seg + \":){6}(?:\" + v4 + \"|:\" + v6seg + \"|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4\\n(?:\" + v6seg + \":){5}(?::\" + v4 + \"|(?::\" + v6seg + \"){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4\\n(?:\" + v6seg + \":){4}(?:(?::\" + v6seg + \"){0,1}:\" + v4 + \"|(?::\" + v6seg + \"){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4\\n(?:\" + v6seg + \":){3}(?:(?::\" + v6seg + \"){0,2}:\" + v4 + \"|(?::\" + v6seg + \"){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4\\n(?:\" + v6seg + \":){2}(?:(?::\" + v6seg + \"){0,3}:\" + v4 + \"|(?::\" + v6seg + \"){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4\\n(?:\" + v6seg + \":){1}(?:(?::\" + v6seg + \"){0,4}:\" + v4 + \"|(?::\" + v6seg + \"){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4\\n(?::(?:(?::\" + v6seg + \"){0,5}:\" + v4 + \"|(?::\" + v6seg + \"){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4\\n)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1\\n\").replace(/\\s*\\/\\/.*$/gm, '').replace(/\\n/g, '').trim(); // Pre-compile only the exact regexes because adding a global flag make regexes stateful\n\n  var v46Exact = new RegExp(\"(?:^\" + v4 + \"$)|(?:^\" + v6 + \"$)\");\n  var v4exact = new RegExp(\"^\" + v4 + \"$\");\n  var v6exact = new RegExp(\"^\" + v6 + \"$\");\n\n  var ip = function ip(options) {\n    return options && options.exact ? v46Exact : new RegExp(\"(?:\" + b(options) + v4 + b(options) + \")|(?:\" + b(options) + v6 + b(options) + \")\", 'g');\n  };\n\n  ip.v4 = function (options) {\n    return options && options.exact ? v4exact : new RegExp(\"\" + b(options) + v4 + b(options), 'g');\n  };\n\n  ip.v6 = function (options) {\n    return options && options.exact ? v6exact : new RegExp(\"\" + b(options) + v6 + b(options), 'g');\n  };\n\n  var protocol = \"(?:(?:[a-z]+:)?//)\";\n  var auth = '(?:\\\\S+(?::\\\\S*)?@)?';\n  var ipv4 = ip.v4().source;\n  var ipv6 = ip.v6().source;\n  var host = \"(?:(?:[a-z\\\\u00a1-\\\\uffff0-9][-_]*)*[a-z\\\\u00a1-\\\\uffff0-9]+)\";\n  var domain = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*\";\n  var tld = \"(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,}))\";\n  var port = '(?::\\\\d{2,5})?';\n  var path = '(?:[/?#][^\\\\s\"]*)?';\n  var regex = \"(?:\" + protocol + \"|www\\\\.)\" + auth + \"(?:localhost|\" + ipv4 + \"|\" + ipv6 + \"|\" + host + domain + tld + \")\" + port + path;\n  urlReg = new RegExp(\"(?:^\" + regex + \"$)\", 'i');\n  return urlReg;\n});\n\n/* eslint max-len:0 */\n\nvar pattern$2 = {\n  // http://emailregex.com/\n  email: /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+\\.)+[a-zA-Z\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]{2,}))$/,\n  // url: new RegExp(\n  //   '^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\\\S+(?::\\\\S*)?@)?(?:(?:(?:[1-9]\\\\d?|1\\\\d\\\\d|2[01]\\\\d|22[0-3])(?:\\\\.(?:1?\\\\d{1,2}|2[0-4]\\\\d|25[0-5])){2}(?:\\\\.(?:[0-9]\\\\d?|1\\\\d\\\\d|2[0-4]\\\\d|25[0-4]))|(?:(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff0-9]+-*)*[a-z\\\\u00a1-\\\\uffff0-9]+)*(?:\\\\.(?:[a-z\\\\u00a1-\\\\uffff]{2,})))|localhost)(?::\\\\d{2,5})?(?:(/|\\\\?|#)[^\\\\s]*)?$',\n  //   'i',\n  // ),\n  hex: /^#?([a-f0-9]{6}|[a-f0-9]{3})$/i\n};\nvar types = {\n  integer: function integer(value) {\n    return types.number(value) && parseInt(value, 10) === value;\n  },\n  \"float\": function float(value) {\n    return types.number(value) && !types.integer(value);\n  },\n  array: function array(value) {\n    return Array.isArray(value);\n  },\n  regexp: function regexp(value) {\n    if (value instanceof RegExp) {\n      return true;\n    }\n\n    try {\n      return !!new RegExp(value);\n    } catch (e) {\n      return false;\n    }\n  },\n  date: function date(value) {\n    return typeof value.getTime === 'function' && typeof value.getMonth === 'function' && typeof value.getYear === 'function' && !isNaN(value.getTime());\n  },\n  number: function number(value) {\n    if (isNaN(value)) {\n      return false;\n    }\n\n    return typeof value === 'number';\n  },\n  object: function object(value) {\n    return typeof value === 'object' && !types.array(value);\n  },\n  method: function method(value) {\n    return typeof value === 'function';\n  },\n  email: function email(value) {\n    return typeof value === 'string' && value.length <= 320 && !!value.match(pattern$2.email);\n  },\n  url: function url(value) {\n    return typeof value === 'string' && value.length <= 2048 && !!value.match(getUrlRegex());\n  },\n  hex: function hex(value) {\n    return typeof value === 'string' && !!value.match(pattern$2.hex);\n  }\n};\n\nvar type$1 = function type(rule, value, source, errors, options) {\n  if (rule.required && value === undefined) {\n    required$1(rule, value, source, errors, options);\n    return;\n  }\n\n  var custom = ['integer', 'float', 'array', 'regexp', 'object', 'method', 'email', 'number', 'date', 'url', 'hex'];\n  var ruleType = rule.type;\n\n  if (custom.indexOf(ruleType) > -1) {\n    if (!types[ruleType](value)) {\n      errors.push(format(options.messages.types[ruleType], rule.fullField, rule.type));\n    } // straight typeof check\n\n  } else if (ruleType && typeof value !== rule.type) {\n    errors.push(format(options.messages.types[ruleType], rule.fullField, rule.type));\n  }\n};\n\nvar range = function range(rule, value, source, errors, options) {\n  var len = typeof rule.len === 'number';\n  var min = typeof rule.min === 'number';\n  var max = typeof rule.max === 'number'; // 正则匹配码点范围从U+010000一直到U+10FFFF的文字（补充平面Supplementary Plane）\n\n  var spRegexp = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n  var val = value;\n  var key = null;\n  var num = typeof value === 'number';\n  var str = typeof value === 'string';\n  var arr = Array.isArray(value);\n\n  if (num) {\n    key = 'number';\n  } else if (str) {\n    key = 'string';\n  } else if (arr) {\n    key = 'array';\n  } // if the value is not of a supported type for range validation\n  // the validation rule rule should use the\n  // type property to also test for a particular type\n\n\n  if (!key) {\n    return false;\n  }\n\n  if (arr) {\n    val = value.length;\n  }\n\n  if (str) {\n    // 处理码点大于U+010000的文字length属性不准确的bug，如\"𠮷𠮷𠮷\".lenght !== 3\n    val = value.replace(spRegexp, '_').length;\n  }\n\n  if (len) {\n    if (val !== rule.len) {\n      errors.push(format(options.messages[key].len, rule.fullField, rule.len));\n    }\n  } else if (min && !max && val < rule.min) {\n    errors.push(format(options.messages[key].min, rule.fullField, rule.min));\n  } else if (max && !min && val > rule.max) {\n    errors.push(format(options.messages[key].max, rule.fullField, rule.max));\n  } else if (min && max && (val < rule.min || val > rule.max)) {\n    errors.push(format(options.messages[key].range, rule.fullField, rule.min, rule.max));\n  }\n};\n\nvar ENUM$1 = 'enum';\n\nvar enumerable$1 = function enumerable(rule, value, source, errors, options) {\n  rule[ENUM$1] = Array.isArray(rule[ENUM$1]) ? rule[ENUM$1] : [];\n\n  if (rule[ENUM$1].indexOf(value) === -1) {\n    errors.push(format(options.messages[ENUM$1], rule.fullField, rule[ENUM$1].join(', ')));\n  }\n};\n\nvar pattern$1 = function pattern(rule, value, source, errors, options) {\n  if (rule.pattern) {\n    if (rule.pattern instanceof RegExp) {\n      // if a RegExp instance is passed, reset `lastIndex` in case its `global`\n      // flag is accidentally set to `true`, which in a validation scenario\n      // is not necessary and the result might be misleading\n      rule.pattern.lastIndex = 0;\n\n      if (!rule.pattern.test(value)) {\n        errors.push(format(options.messages.pattern.mismatch, rule.fullField, value, rule.pattern));\n      }\n    } else if (typeof rule.pattern === 'string') {\n      var _pattern = new RegExp(rule.pattern);\n\n      if (!_pattern.test(value)) {\n        errors.push(format(options.messages.pattern.mismatch, rule.fullField, value, rule.pattern));\n      }\n    }\n  }\n};\n\nvar rules = {\n  required: required$1,\n  whitespace: whitespace,\n  type: type$1,\n  range: range,\n  \"enum\": enumerable$1,\n  pattern: pattern$1\n};\n\nvar string = function string(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value, 'string') && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options, 'string');\n\n    if (!isEmptyValue(value, 'string')) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n      rules.pattern(rule, value, source, errors, options);\n\n      if (rule.whitespace === true) {\n        rules.whitespace(rule, value, source, errors, options);\n      }\n    }\n  }\n\n  callback(errors);\n};\n\nvar method = function method(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar number = function number(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (value === '') {\n      value = undefined;\n    }\n\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar _boolean = function _boolean(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar regexp = function regexp(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (!isEmptyValue(value)) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar integer = function integer(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar floatFn = function floatFn(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar array = function array(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if ((value === undefined || value === null) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options, 'array');\n\n    if (value !== undefined && value !== null) {\n      rules.type(rule, value, source, errors, options);\n      rules.range(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar object = function object(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar ENUM = 'enum';\n\nvar enumerable = function enumerable(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (value !== undefined) {\n      rules[ENUM](rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar pattern = function pattern(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value, 'string') && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (!isEmptyValue(value, 'string')) {\n      rules.pattern(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar date = function date(rule, value, callback, source, options) {\n  // console.log('integer rule called %j', rule);\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field); // console.log('validate on %s value', value);\n\n  if (validate) {\n    if (isEmptyValue(value, 'date') && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n\n    if (!isEmptyValue(value, 'date')) {\n      var dateObject;\n\n      if (value instanceof Date) {\n        dateObject = value;\n      } else {\n        dateObject = new Date(value);\n      }\n\n      rules.type(rule, dateObject, source, errors, options);\n\n      if (dateObject) {\n        rules.range(rule, dateObject.getTime(), source, errors, options);\n      }\n    }\n  }\n\n  callback(errors);\n};\n\nvar required = function required(rule, value, callback, source, options) {\n  var errors = [];\n  var type = Array.isArray(value) ? 'array' : typeof value;\n  rules.required(rule, value, source, errors, options, type);\n  callback(errors);\n};\n\nvar type = function type(rule, value, callback, source, options) {\n  var ruleType = rule.type;\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value, ruleType) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options, ruleType);\n\n    if (!isEmptyValue(value, ruleType)) {\n      rules.type(rule, value, source, errors, options);\n    }\n  }\n\n  callback(errors);\n};\n\nvar any = function any(rule, value, callback, source, options) {\n  var errors = [];\n  var validate = rule.required || !rule.required && source.hasOwnProperty(rule.field);\n\n  if (validate) {\n    if (isEmptyValue(value) && !rule.required) {\n      return callback();\n    }\n\n    rules.required(rule, value, source, errors, options);\n  }\n\n  callback(errors);\n};\n\nvar validators = {\n  string: string,\n  method: method,\n  number: number,\n  \"boolean\": _boolean,\n  regexp: regexp,\n  integer: integer,\n  \"float\": floatFn,\n  array: array,\n  object: object,\n  \"enum\": enumerable,\n  pattern: pattern,\n  date: date,\n  url: type,\n  hex: type,\n  email: type,\n  required: required,\n  any: any\n};\n\nfunction newMessages() {\n  return {\n    \"default\": 'Validation error on field %s',\n    required: '%s is required',\n    \"enum\": '%s must be one of %s',\n    whitespace: '%s cannot be empty',\n    date: {\n      format: '%s date %s is invalid for format %s',\n      parse: '%s date could not be parsed, %s is invalid ',\n      invalid: '%s date %s is invalid'\n    },\n    types: {\n      string: '%s is not a %s',\n      method: '%s is not a %s (function)',\n      array: '%s is not an %s',\n      object: '%s is not an %s',\n      number: '%s is not a %s',\n      date: '%s is not a %s',\n      \"boolean\": '%s is not a %s',\n      integer: '%s is not an %s',\n      \"float\": '%s is not a %s',\n      regexp: '%s is not a valid %s',\n      email: '%s is not a valid %s',\n      url: '%s is not a valid %s',\n      hex: '%s is not a valid %s'\n    },\n    string: {\n      len: '%s must be exactly %s characters',\n      min: '%s must be at least %s characters',\n      max: '%s cannot be longer than %s characters',\n      range: '%s must be between %s and %s characters'\n    },\n    number: {\n      len: '%s must equal %s',\n      min: '%s cannot be less than %s',\n      max: '%s cannot be greater than %s',\n      range: '%s must be between %s and %s'\n    },\n    array: {\n      len: '%s must be exactly %s in length',\n      min: '%s cannot be less than %s in length',\n      max: '%s cannot be greater than %s in length',\n      range: '%s must be between %s and %s in length'\n    },\n    pattern: {\n      mismatch: '%s value %s does not match pattern %s'\n    },\n    clone: function clone() {\n      var cloned = JSON.parse(JSON.stringify(this));\n      cloned.clone = this.clone;\n      return cloned;\n    }\n  };\n}\nvar messages = newMessages();\n\n/**\n *  Encapsulates a validation schema.\n *\n *  @param descriptor An object declaring validation rules\n *  for this schema.\n */\n\nvar Schema = /*#__PURE__*/function () {\n  // ========================= Static =========================\n  // ======================== Instance ========================\n  function Schema(descriptor) {\n    this.rules = null;\n    this._messages = messages;\n    this.define(descriptor);\n  }\n\n  var _proto = Schema.prototype;\n\n  _proto.define = function define(rules) {\n    var _this = this;\n\n    if (!rules) {\n      throw new Error('Cannot configure a schema with no rules');\n    }\n\n    if (typeof rules !== 'object' || Array.isArray(rules)) {\n      throw new Error('Rules must be an object');\n    }\n\n    this.rules = {};\n    Object.keys(rules).forEach(function (name) {\n      var item = rules[name];\n      _this.rules[name] = Array.isArray(item) ? item : [item];\n    });\n  };\n\n  _proto.messages = function messages(_messages) {\n    if (_messages) {\n      this._messages = deepMerge(newMessages(), _messages);\n    }\n\n    return this._messages;\n  };\n\n  _proto.validate = function validate(source_, o, oc) {\n    var _this2 = this;\n\n    if (o === void 0) {\n      o = {};\n    }\n\n    if (oc === void 0) {\n      oc = function oc() {};\n    }\n\n    var source = source_;\n    var options = o;\n    var callback = oc;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    if (!this.rules || Object.keys(this.rules).length === 0) {\n      if (callback) {\n        callback(null, source);\n      }\n\n      return Promise.resolve(source);\n    }\n\n    function complete(results) {\n      var errors = [];\n      var fields = {};\n\n      function add(e) {\n        if (Array.isArray(e)) {\n          var _errors;\n\n          errors = (_errors = errors).concat.apply(_errors, e);\n        } else {\n          errors.push(e);\n        }\n      }\n\n      for (var i = 0; i < results.length; i++) {\n        add(results[i]);\n      }\n\n      if (!errors.length) {\n        callback(null, source);\n      } else {\n        fields = convertFieldsError(errors);\n        callback(errors, fields);\n      }\n    }\n\n    if (options.messages) {\n      var messages$1 = this.messages();\n\n      if (messages$1 === messages) {\n        messages$1 = newMessages();\n      }\n\n      deepMerge(messages$1, options.messages);\n      options.messages = messages$1;\n    } else {\n      options.messages = this.messages();\n    }\n\n    var series = {};\n    var keys = options.keys || Object.keys(this.rules);\n    keys.forEach(function (z) {\n      var arr = _this2.rules[z];\n      var value = source[z];\n      arr.forEach(function (r) {\n        var rule = r;\n\n        if (typeof rule.transform === 'function') {\n          if (source === source_) {\n            source = _extends({}, source);\n          }\n\n          value = source[z] = rule.transform(value);\n        }\n\n        if (typeof rule === 'function') {\n          rule = {\n            validator: rule\n          };\n        } else {\n          rule = _extends({}, rule);\n        } // Fill validator. Skip if nothing need to validate\n\n\n        rule.validator = _this2.getValidationMethod(rule);\n\n        if (!rule.validator) {\n          return;\n        }\n\n        rule.field = z;\n        rule.fullField = rule.fullField || z;\n        rule.type = _this2.getType(rule);\n        series[z] = series[z] || [];\n        series[z].push({\n          rule: rule,\n          value: value,\n          source: source,\n          field: z\n        });\n      });\n    });\n    var errorFields = {};\n    return asyncMap(series, options, function (data, doIt) {\n      var rule = data.rule;\n      var deep = (rule.type === 'object' || rule.type === 'array') && (typeof rule.fields === 'object' || typeof rule.defaultField === 'object');\n      deep = deep && (rule.required || !rule.required && data.value);\n      rule.field = data.field;\n\n      function addFullField(key, schema) {\n        return _extends({}, schema, {\n          fullField: rule.fullField + \".\" + key,\n          fullFields: rule.fullFields ? [].concat(rule.fullFields, [key]) : [key]\n        });\n      }\n\n      function cb(e) {\n        if (e === void 0) {\n          e = [];\n        }\n\n        var errorList = Array.isArray(e) ? e : [e];\n\n        if (!options.suppressWarning && errorList.length) {\n          Schema.warning('async-validator:', errorList);\n        }\n\n        if (errorList.length && rule.message !== undefined) {\n          errorList = [].concat(rule.message);\n        } // Fill error info\n\n\n        var filledErrors = errorList.map(complementError(rule, source));\n\n        if (options.first && filledErrors.length) {\n          errorFields[rule.field] = 1;\n          return doIt(filledErrors);\n        }\n\n        if (!deep) {\n          doIt(filledErrors);\n        } else {\n          // if rule is required but the target object\n          // does not exist fail at the rule level and don't\n          // go deeper\n          if (rule.required && !data.value) {\n            if (rule.message !== undefined) {\n              filledErrors = [].concat(rule.message).map(complementError(rule, source));\n            } else if (options.error) {\n              filledErrors = [options.error(rule, format(options.messages.required, rule.field))];\n            }\n\n            return doIt(filledErrors);\n          }\n\n          var fieldsSchema = {};\n\n          if (rule.defaultField) {\n            Object.keys(data.value).map(function (key) {\n              fieldsSchema[key] = rule.defaultField;\n            });\n          }\n\n          fieldsSchema = _extends({}, fieldsSchema, data.rule.fields);\n          var paredFieldsSchema = {};\n          Object.keys(fieldsSchema).forEach(function (field) {\n            var fieldSchema = fieldsSchema[field];\n            var fieldSchemaList = Array.isArray(fieldSchema) ? fieldSchema : [fieldSchema];\n            paredFieldsSchema[field] = fieldSchemaList.map(addFullField.bind(null, field));\n          });\n          var schema = new Schema(paredFieldsSchema);\n          schema.messages(options.messages);\n\n          if (data.rule.options) {\n            data.rule.options.messages = options.messages;\n            data.rule.options.error = options.error;\n          }\n\n          schema.validate(data.value, data.rule.options || options, function (errs) {\n            var finalErrors = [];\n\n            if (filledErrors && filledErrors.length) {\n              finalErrors.push.apply(finalErrors, filledErrors);\n            }\n\n            if (errs && errs.length) {\n              finalErrors.push.apply(finalErrors, errs);\n            }\n\n            doIt(finalErrors.length ? finalErrors : null);\n          });\n        }\n      }\n\n      var res;\n\n      if (rule.asyncValidator) {\n        res = rule.asyncValidator(rule, data.value, cb, data.source, options);\n      } else if (rule.validator) {\n        try {\n          res = rule.validator(rule, data.value, cb, data.source, options);\n        } catch (error) {\n          console.error == null ? void 0 : console.error(error); // rethrow to report error\n\n          if (!options.suppressValidatorError) {\n            setTimeout(function () {\n              throw error;\n            }, 0);\n          }\n\n          cb(error.message);\n        }\n\n        if (res === true) {\n          cb();\n        } else if (res === false) {\n          cb(typeof rule.message === 'function' ? rule.message(rule.fullField || rule.field) : rule.message || (rule.fullField || rule.field) + \" fails\");\n        } else if (res instanceof Array) {\n          cb(res);\n        } else if (res instanceof Error) {\n          cb(res.message);\n        }\n      }\n\n      if (res && res.then) {\n        res.then(function () {\n          return cb();\n        }, function (e) {\n          return cb(e);\n        });\n      }\n    }, function (results) {\n      complete(results);\n    }, source);\n  };\n\n  _proto.getType = function getType(rule) {\n    if (rule.type === undefined && rule.pattern instanceof RegExp) {\n      rule.type = 'pattern';\n    }\n\n    if (typeof rule.validator !== 'function' && rule.type && !validators.hasOwnProperty(rule.type)) {\n      throw new Error(format('Unknown rule type %s', rule.type));\n    }\n\n    return rule.type || 'string';\n  };\n\n  _proto.getValidationMethod = function getValidationMethod(rule) {\n    if (typeof rule.validator === 'function') {\n      return rule.validator;\n    }\n\n    var keys = Object.keys(rule);\n    var messageIndex = keys.indexOf('message');\n\n    if (messageIndex !== -1) {\n      keys.splice(messageIndex, 1);\n    }\n\n    if (keys.length === 1 && keys[0] === 'required') {\n      return validators.required;\n    }\n\n    return validators[this.getType(rule)] || undefined;\n  };\n\n  return Schema;\n}();\n\nSchema.register = function register(type, validator) {\n  if (typeof validator !== 'function') {\n    throw new Error('Cannot register a validator by type, validator is not a function');\n  }\n\n  validators[type] = validator;\n};\n\nSchema.warning = warning;\nSchema.messages = messages;\nSchema.validators = validators;\n\nexport { Schema as default };\n//# sourceMappingURL=index.js.map\n", null, null, null, null, null, null, "<template>\n  <div class=\"fs-editable\">\n    <div v-if=\"!editing || disabled\" class=\"fs-editable-inner fs-editable-pointer\" v-bind=\"activeTrigger\">\n      <div class=\"fs-editable-input\">\n        <div v-if=\"dirty\" class=\"fs-editable-dirty\" />\n        <slot></slot>\n      </div>\n      <div v-if=\"trigger && !disabled\" class=\"fs-editable-action fs-editable-icon\">\n        <fs-icon :icon=\"ui.icons.edit\" />\n      </div>\n    </div>\n    <div v-else class=\"fs-editable-inner\" :class=\"{ 'fs-validate-error': hasError() }\">\n      <div class=\"fs-editable-input\">\n        <slot name=\"edit\"></slot>\n      </div>\n      <div class=\"fs-editable-action\">\n        <component :is=\"ui.tooltip.name\">\n          <template #[ui.tooltip.content]>\n            <span class=\"error-icon\">\n              {{ getValidateErrorMessage() }}\n            </span>\n          </template>\n          <template #[ui.tooltip.trigger]>\n            <fs-icon :class=\"{ hidden: !hasError(), 'error-icon': true }\" size=\"mini\" :icon=\"ui.icons.info\" />\n          </template>\n        </component>\n        <template v-if=\"showAction\">\n          <fs-icon v-if=\"loading\" size=\"mini\" :spin=\"true\" :icon=\"ui.icons.refresh\" />\n          <fs-icon v-else size=\"mini\" :icon=\"ui.icons.check\" @click=\"doSubmit\" />\n          <fs-icon :class=\"{ hidden: loading }\" size=\"mini\" :icon=\"ui.icons.close\" @click=\"doCancel\" />\n        </template>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useUi } from \"@fast-crud/ui-interface\";\nimport { computed } from \"vue\";\n\ntype FsEditableProps = {\n  disabled?: boolean;\n  editing: boolean;\n  dirty?: boolean;\n  trigger?: \"onClick\" | \"onDbClick\" | false;\n  loading?: boolean;\n  showAction?: boolean;\n  validateErrors?: any[];\n};\nconst props = withDefaults(defineProps<FsEditableProps>(), {\n  disabled: false,\n  editing: false,\n  dirty: false,\n  loading: false,\n  showAction: true,\n  trigger: \"onClick\",\n  validateErrors: () => {\n    return [];\n  }\n});\n\nconst { ui } = useUi();\nconst emits = defineEmits([\"update:editing\", \"submit\", \"cancel\"]);\nconst activeTrigger = computed(() => {\n  if (!props.trigger) {\n    return {};\n  }\n  return {\n    [props.trigger]: () => {\n      emits(\"update:editing\", true);\n    }\n  };\n});\nfunction doSubmit() {\n  emits(\"submit\");\n}\nfunction doCancel() {\n  emits(\"cancel\");\n}\nfunction hasError() {\n  return props.validateErrors?.length > 0;\n}\nfunction getValidateErrorMessage() {\n  if (props.validateErrors?.length === 0) {\n    return;\n  }\n  return props.validateErrors?.map((item) => item.message).join(\",\");\n}\n</script>\n\n<style lang=\"less\">\n.fs-editable {\n  display: flex;\n  width: 100%;\n  align-items: center;\n  .fs-editable-pointer {\n    cursor: pointer;\n  }\n  .fs-editable-inner {\n    display: flex;\n    width: 100%;\n    align-items: center;\n    min-height: 23px;\n    .fs-editable-dirty {\n      border-radius: 100px;\n      width: 5px;\n      height: 5px;\n      margin-left: -5px;\n      background: red;\n    }\n    .fs-editable-input {\n      flex: 1;\n    }\n    .fs-editable-action {\n      display: flex;\n      justify-content: flex-end;\n      align-items: center;\n      margin-left: 10px;\n      i,\n      .anticon {\n        width: 20px;\n        text-align: center;\n        font-size: 16px;\n        cursor: pointer;\n      }\n      .hidden {\n        visibility: hidden;\n      }\n    }\n\n    .fs-editable-icon {\n      visibility: hidden;\n    }\n    &:hover .fs-editable-icon {\n      visibility: visible;\n    }\n\n    .el-radio {\n      margin-right: 5px;\n      .el-radio__label {\n        padding: 2px;\n      }\n    }\n\n    &.fs-validate-error {\n      .error-icon {\n        color: #ff4d4f;\n      }\n      .ant-input-affix-wrapper {\n        border-color: #ff4d4f;\n        box-shadow: 0 0 0 2px rgb(255 38 5 / 6%);\n      }\n      .el-input__wrapper {\n        border-color: #ff4d4f !important;\n        box-shadow: 0 0 0 1px #ff4d4f inset !important;\n      }\n      .n-input .n-input__state-border {\n        border-color: #ff4d4f !important;\n        box-shadow: 0 0 0 2px rgb(255 38 5 / 6%);\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-actionbar\">\n    <template v-for=\"(value, key) in computedButtons\" :key=\"key\">\n      <fs-button v-if=\"value.show !== false\" v-bind=\"value\" @click=\"onClick(key, value, $event)\" />\n    </template>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, computed, Ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ActionbarClickEvent, ButtonsProps } from \"../../d\";\n\nexport default defineComponent({\n  name: \"FsActionbar\",\n  props: {\n    /**\n     * 按钮配置\n     * {\n     *  add:{\n     *    ...FsButton,\n     *    show:true\n     *  },\n     *  custom:{...}\n     * }\n     */\n    buttons: {}\n  } as any,\n  emits: [\"action\"],\n  setup(props, ctx: any) {\n    function onClick(key: any, btn: any, $event: any) {\n      const e = { key, btn, $event };\n      if (btn.click) {\n        btn.click(e);\n        return;\n      }\n      if (btn.onClick) {\n        btn.onClick(e);\n        return;\n      }\n      ctx.emit(\"action\", e);\n    }\n    const computedButtons: Ref = computed(() => {\n      let sortArr = [];\n      // @ts-ignore\n      for (let key in props.buttons) {\n        sortArr.push({\n          // @ts-ignore\n          ...props.buttons[key],\n          _key: key\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item: any) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<ActionbarClickEvent> = {};\n\n      sortArr.forEach((item: any) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    return {\n      onClick,\n      computedButtons\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-actionbar {\n  .fs-button {\n    margin: 0 2px;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-actionbar\">\n    <template v-for=\"(value, key) in computedButtons\" :key=\"key\">\n      <fs-button v-if=\"value.show !== false\" v-bind=\"value\" @click=\"onClick(key, value, $event)\" />\n    </template>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent, computed, Ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ActionbarClickEvent, ButtonsProps } from \"../../d\";\n\nexport default defineComponent({\n  name: \"FsActionbar\",\n  props: {\n    /**\n     * 按钮配置\n     * {\n     *  add:{\n     *    ...FsButton,\n     *    show:true\n     *  },\n     *  custom:{...}\n     * }\n     */\n    buttons: {}\n  } as any,\n  emits: [\"action\"],\n  setup(props, ctx: any) {\n    function onClick(key: any, btn: any, $event: any) {\n      const e = { key, btn, $event };\n      if (btn.click) {\n        btn.click(e);\n        return;\n      }\n      if (btn.onClick) {\n        btn.onClick(e);\n        return;\n      }\n      ctx.emit(\"action\", e);\n    }\n    const computedButtons: Ref = computed(() => {\n      let sortArr = [];\n      // @ts-ignore\n      for (let key in props.buttons) {\n        sortArr.push({\n          // @ts-ignore\n          ...props.buttons[key],\n          _key: key\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item: any) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<ActionbarClickEvent> = {};\n\n      sortArr.forEach((item: any) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    return {\n      onClick,\n      computedButtons\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-actionbar {\n  .fs-button {\n    margin: 0 2px;\n  }\n}\n</style>\n", null, null, "<template>\n  <!-- 简单模式 -->\n  <template v-if=\"mode === 'simple'\">\n    <component :is=\"ui.row.name\" class=\"fs-table-columns-filter-simple\">\n      <component\n        :is=\"ui.col.name\"\n        v-for=\"(element, key) in currentColumns\"\n        v-show=\"original[element.key]?.__show !== false\"\n        :key=\"key\"\n        :span=\"6\"\n      >\n        <component\n          :is=\"ui.checkbox.name\"\n          v-model:[ui.checkbox.modelValue]=\"element.show\"\n          :disabled=\"original[element.key]?.__disabled === true\"\n          class=\"item-label\"\n          :title=\"buildText(element)\"\n        >\n          {{ buildText(element) }}\n        </component>\n      </component>\n    </component>\n    <component :is=\"ui.divider.name\" />\n    <component :is=\"ui.row.name\">\n      <fs-button\n        style=\"margin-right: 5px\"\n        type=\"primary\"\n        :icon=\"ui.icons.check\"\n        :text=\"_text.confirm\"\n        @click=\"simpleSubmit()\"\n      />\n      <fs-button :icon=\"ui.icons.refresh\" :text=\"_text.reset\" @click=\"simpleReset\" />\n    </component>\n  </template>\n  <!-- 完全模式 -->\n\n  <component :is=\"container?.is || 'fs-columns-filter-layout-default'\" v-else v-bind=\"container\">\n    <template #buttons>\n      <component :is=\"ui.row.name\" class=\"fs-drawer-footer\" :gutter=\"10\">\n        <component :is=\"ui.col.name\" :span=\"12\">\n          <fs-button :icon=\"ui.icons.refresh\" :text=\"_text.reset\" block @click=\"reset\" />\n        </component>\n        <component :is=\"ui.col.name\" :span=\"12\">\n          <fs-button type=\"primary\" :icon=\"ui.icons.check\" :text=\"_text.confirm\" block @click=\"submit(false)\" />\n        </component>\n      </component>\n    </template>\n  </component>\n</template>\n\n<script lang=\"ts\" setup>\n/**\n * FsTableColumnsFilter，列设置组件\n */\nimport _, { cloneDeep } from \"lodash-es\";\nimport TableStore from \"../../../utils/util.store\";\nimport { useI18n } from \"../../../locale\";\nimport { computed, nextTick, provide, Ref, ref, watch } from \"vue\";\nimport { uiContext } from \"../../../ui\";\nimport { useMerge } from \"../../../use/use-merge\";\nimport { useRoute } from \"vue-router\";\nimport {\n  ColumnProps,\n  ColumnsFilterComponentProps,\n  ColumnsFilterItem,\n  ColumnsFilterProvideKey,\n  TableColumnsProps\n} from \"../../../d\";\n\nconst props = withDefaults(defineProps<ColumnsFilterComponentProps>(), {\n  storage: true,\n  mode: \"default\",\n  container: () => {\n    return { is: \"fs-columns-filter-layout-default\" };\n  }\n});\nconst emit = defineEmits([\"update:columns\", \"update:show\", \"reset\", \"submit\"]);\n\nconst { t } = useI18n();\nconst ui = uiContext.get();\nconst active = ref(false);\nconst start = () => {\n  active.value = true;\n};\n\n// 数组形式的原始tree\nconst original: Ref<ColumnsFilterItem[]> = computed(() => {\n  return transformColumnsTree(props.originalColumns);\n});\n//数组形式的tree\nconst currentColumns: Ref<ColumnsFilterItem[]> = ref([]);\n\nconst originalColumnsMap: Ref<Record<string, ColumnsFilterItem>> = computed(() => {\n  const map: Record<string, ColumnsFilterItem> = {};\n  eachTree(original.value, (item: ColumnsFilterItem) => {\n    map[item.__key] = item;\n  });\n  return map;\n});\nconst { merge } = useMerge();\n\nconst _text = computed(() => {\n  const def = {\n    title: t(\"fs.toolbar.columnFilter.title\"),\n    fixed: t(\"fs.toolbar.columnFilter.fixed\"),\n    order: t(\"fs.toolbar.columnFilter.order\"),\n    reset: t(\"fs.toolbar.columnFilter.reset\"),\n    confirm: t(\"fs.toolbar.columnFilter.confirm\"),\n    unnamed: t(\"fs.toolbar.columnFilter.unnamed\")\n  };\n  merge(def, props.text);\n  return def;\n});\n\nfunction eachTree(tree: any, callback: Function) {\n  if (!tree) {\n    return;\n  }\n  if (Array.isArray(tree)) {\n    for (const item of tree) {\n      callback(item);\n      if (item.children) {\n        eachTree(item.children, callback);\n      }\n    }\n  } else {\n    for (const key in tree) {\n      const item = tree[key];\n      callback(item);\n      if (item.children) {\n        eachTree(item.children, callback);\n      }\n    }\n  }\n}\n\nfunction buildColumnFilterItem(item: ColumnProps): ColumnsFilterItem {\n  return {\n    key: item.key,\n    title: item.title,\n    fixed: item.fixed ?? false,\n    show: item.show ?? true,\n    __show: item.columnSetShow !== false,\n    __disabled: item.columnSetDisabled ?? false\n  };\n}\n\nfunction transformToTableColumns(result: ColumnsFilterItem[]) {\n  const columns: TableColumnsProps = {};\n  _.forEach(result, (item) => {\n    const column: ColumnProps = _.omit(item, \"children\", \"__show\", \"__disabled\", \"__parent\", \"__key\");\n    if (item.children && item.children.length > 0) {\n      column.children = transformToTableColumns(item.children);\n    }\n    columns[item.key] = column;\n  });\n  return columns;\n}\n\nfunction transformColumnsTree(value: TableColumnsProps, parent?: ColumnsFilterItem): ColumnsFilterItem[] {\n  const columns: ColumnsFilterItem[] = [];\n  _.forEach(value, (item) => {\n    const column = buildColumnFilterItem(item);\n    column.__parent = parent;\n    column.__key = `${parent?.key || \"\"}.${item.key}`;\n    columns.push(column);\n    if (item.children) {\n      column.children = transformColumnsTree(item.children, column);\n    }\n  });\n  return columns;\n}\n\nfunction setCurrentValue(value: any) {\n  currentColumns.value = transformColumnsTree(value);\n}\n\n// 还原\nasync function reset() {\n  currentColumns.value = transformColumnsTree(props.originalColumns);\n  await do_save(true);\n  await clearThisStorage();\n  emit(\"reset\");\n}\n\n// 确认\nasync function do_save(noSave = false) {\n  if (!noSave) {\n    await saveOptionsToStorage(currentColumns.value);\n  }\n  const result = _.cloneDeep(currentColumns.value);\n\n  //解决naive ui与列设置冲突的问题\n  eachTree(result, (item: any) => {\n    if (item) {\n      delete item.__disabled;\n      delete item.__show;\n      delete item.__parent;\n      delete item.__key;\n    }\n  });\n\n  doEmit(result);\n  active.value = false;\n  return result;\n}\n\nasync function submit(noSave = false) {\n  const columns = await do_save(noSave);\n  emit(\"submit\", { columns });\n}\nconst computedOriginalColumns = computed(() => {\n  return props.originalColumns;\n});\nprovide(ColumnsFilterProvideKey, {\n  originalColumns: computedOriginalColumns,\n  originalColumnsMap: originalColumnsMap,\n  currentColumns,\n  text: _text,\n  active,\n  submit,\n  reset\n});\n\nasync function simpleSubmit() {\n  await submit(false);\n  emit(\"update:show\", false);\n}\nasync function simpleReset() {\n  await reset();\n  emit(\"update:show\", false);\n}\n\nfunction doEmit(result: ColumnsFilterItem[]) {\n  emit(\"update:columns\", transformToTableColumns(result));\n}\n\nconst storageTableStore = ref();\nfunction getStorageTable() {\n  //props.storage是否实现了ColumnFilterStorage 接口\n  const remoteStorage = typeof props.storage === \"object\" ? props.storage : null;\n  const keyType = typeof props.storage === \"string\" ? props.storage : \"\";\n  if (storageTableStore.value == null) {\n    const route = useRoute();\n    storageTableStore.value = new TableStore({\n      $router: route,\n      tableName: \"columnsFilter\",\n      keyType: keyType,\n      remoteStorage\n    });\n  }\n  return storageTableStore.value;\n}\n\nasync function saveOptionsToStorage(value: any) {\n  if (props.storage === false) {\n    return;\n  }\n  const storedOptions: any = cloneDeep(value);\n  //删除parent引用\n  eachTree(storedOptions, (item: any) => {\n    delete item.__parent;\n  });\n\n  await getStorageTable().updateTableValue(storedOptions);\n}\n\nasync function getOptionsFromStorage() {\n  if (props.storage === false) {\n    return;\n  }\n  return await getStorageTable().getTableValue();\n}\nasync function clearThisStorage() {\n  await getStorageTable().clearTableValue();\n}\n\nfunction getColumnsHash(columns: any) {\n  const keys: any = [];\n  eachTree(columns, (item: any) => {\n    const target = _.pick(item, \"key\", \"__show\", \"__disabled\");\n    keys.push(JSON.stringify(target));\n  });\n  keys.sort();\n  let hash = \"\";\n  for (const key of keys) {\n    hash += key;\n  }\n  return hash;\n}\nwatch(\n  () => {\n    return props.columns;\n  },\n  (value) => {\n    setCurrentValue(value);\n  }\n);\n\nconst init = async () => {\n  setCurrentValue(props.columns);\n  const storedOptions = await getOptionsFromStorage();\n  if (storedOptions) {\n    const storeHash = getColumnsHash(storedOptions);\n    const optionHash = getColumnsHash(original.value);\n    if (optionHash !== storeHash) {\n      console.log(\"columns changed, ignore local storage\");\n      // 如果字段列有过修改，则不使用本地设置\n      return;\n    }\n    currentColumns.value = storedOptions;\n    await nextTick();\n    await submit(true);\n  }\n};\n\nasync function update(change: (currentColumns: Ref<ColumnsFilterItem[]>) => Promise<void>) {\n  await change(currentColumns);\n  await do_save();\n}\n\ninit();\ndefineExpose({\n  start,\n  save: do_save,\n  update,\n  original,\n  columns: currentColumns\n});\n\nfunction buildText(element: any) {\n  return element.label || element.title || element.key || _text.value.unnamed;\n}\n</script>\n<style lang=\"less\">\n.fs-table-columns-filter-simple {\n  min-width: 760px;\n  padding-top: 20px;\n}\n\n.fs-table-columns-filter {\n  :focus {\n    outline: 0;\n  }\n\n  [flex~=\"cross:center\"] {\n    -ms-flex-align: center;\n    align-items: center;\n  }\n\n  [flex~=\"main:justify\"] {\n    -ms-flex-pack: justify;\n    justify-content: space-between;\n  }\n\n  [flex] {\n    display: -ms-flexbox;\n    display: flex;\n  }\n\n  [flex-box=\"1\"] {\n    flex-grow: 1;\n    flex-shrink: 1;\n  }\n\n  [flex] > * {\n    display: flex;\n  }\n\n  .el-drawer__body {\n    height: 0;\n  }\n\n  .fs-drawer-wrapper {\n    padding: 10px;\n    height: 100%;\n    overflow-y: auto;\n  }\n\n  .fs-drawer-footer {\n    padding: 20px;\n  }\n\n  .component--list {\n    margin: -20px;\n\n    .item-label {\n      flex: 1;\n      min-width: 0;\n\n      .ant-checkbox + span {\n        white-space: nowrap;\n        overflow: hidden;\n        text-overflow: ellipsis;\n      }\n    }\n    .item-right {\n      flex-shrink: 1;\n      display: flex;\n    }\n\n    .title {\n      font-size: 14px;\n    }\n\n    .component--list-item {\n      padding: 10px;\n      margin-bottom: 1px;\n\n      &.ghost {\n        opacity: 0.5;\n      }\n\n      &:last-child {\n        margin-bottom: 0px;\n      }\n\n      .component--list-item-handle {\n        margin-left: 10px;\n        cursor: move;\n\n        &.disabled {\n          opacity: 0.3;\n          cursor: pointer;\n        }\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-toolbar\">\n    <template v-for=\"(item, key) of computedButtons\" :key=\"key\">\n      <template v-if=\"item.show !== false\">\n        <component\n          :is=\"ui.popover.name\"\n          v-if=\"key === 'columns' && columnsFilter && columnsFilter?.mode === 'simple'\"\n          v-model:[ui.popover.visible]=\"popoverVisible\"\n          display-directive=\"show\"\n          placement=\"bottom\"\n          :width=\"760\"\n          trigger=\"click\"\n        >\n          <template #[ui.popover.triggerSlotName]>\n            <fs-button v-bind=\"item\" @click=\"handleSimpleClick\" />\n          </template>\n          <template #[ui.popover.contentSlotName]>\n            <component\n              :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n              v-if=\"columns\"\n              ref=\"columnsFilterRef\"\n              v-model:show=\"popoverVisible\"\n              mode=\"simple\"\n              v-bind=\"columnsFilter\"\n              :columns=\"columns\"\n              :storage=\"storage\"\n              @update:columns=\"$emit('update:columns', $event)\"\n            />\n          </template>\n        </component>\n        <fs-button v-else v-bind=\"item\" @click=\"item.click()\" />\n      </template>\n    </template>\n    <component\n      :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n      v-if=\"columns && columnsFilter?.mode !== 'simple'\"\n      ref=\"columnsFilterRef\"\n      :storage=\"storage\"\n      v-bind=\"columnsFilter\"\n      :columns=\"columns\"\n      @update:columns=\"$emit('update:columns', $event)\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport FsTableColumnsFilter from \"./fs-table-columns-filter/index.vue\";\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, PropType, ref, Ref } from \"vue\";\nimport { useI18n } from \"../../locale\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ButtonsProps, TableColumnsProps } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * 工具条\n */\nexport default defineComponent({\n  name: \"FsToolbar\",\n  components: { FsTableColumnsFilter },\n  props: {\n    /**\n     * 按钮配置\n     *{\n     *   search:{}, 查询\n     *   refresh:{}, 刷新\n     *   compact:{}, 紧凑模式\n     *   export:{}, 导出\n     *   columns:{} 列设置\n     *}\n     **/\n    buttons: {\n      type: Object\n    },\n    /**\n     * 当前是否紧凑模式\n     */\n    compact: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 列配置\n     */\n    columns: {\n      type: Object as PropType<TableColumnsProps>,\n      default: undefined\n    },\n    /**\n     * 是否保存用户列设置\n     * 传string则表示传入缓存的主key\n     */\n    storage: {\n      type: [String, Boolean],\n      default: true\n    },\n    /**\n     * 插槽\n     */\n    slots: {},\n\n    /**\n     * 列设置配置\n     */\n    columnsFilter: {\n      type: Object as PropType<any>\n    }\n  },\n  emits: [\"update:columns\"],\n  setup(props: any, ctx) {\n    const { t } = useI18n();\n    const columnsFilterRef: Ref = ref();\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const computedButtons = computed(() => {\n      const defaultButtons: ButtonsProps<void> = {\n        columns: {\n          click: () => {\n            columnsFilterRef.value.start();\n          }\n        }\n      };\n\n      merge(defaultButtons, props.buttons);\n      // if (defaultButtons.search) {\n      //   defaultButtons.search.type = props.search ? \"primary\" : \"default\";\n      // }\n      // if (defaultButtons.compact) {\n      //   defaultButtons.compact.type = props.compact ? \"primary\" : \"default\";\n      // }\n\n      let sortArr: ButtonProps[] = [];\n      for (let defaultButtonsKey in defaultButtons) {\n        sortArr.push({\n          ...defaultButtons[defaultButtonsKey],\n          _key: defaultButtonsKey\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<void> = {};\n\n      sortArr.forEach((item) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    const popoverVisible = ref(false);\n    const handleSimpleClick = () => {\n      if (ui.type === \"element\") {\n        return;\n      }\n      popoverVisible.value = !popoverVisible.value;\n    };\n    return {\n      ui,\n      columnsFilterRef,\n      computedButtons,\n      popoverVisible,\n      handleSimpleClick\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-toolbar {\n  display: flex;\n\n  .fs-button {\n    margin-left: 5px;\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-toolbar\">\n    <template v-for=\"(item, key) of computedButtons\" :key=\"key\">\n      <template v-if=\"item.show !== false\">\n        <component\n          :is=\"ui.popover.name\"\n          v-if=\"key === 'columns' && columnsFilter && columnsFilter?.mode === 'simple'\"\n          v-model:[ui.popover.visible]=\"popoverVisible\"\n          display-directive=\"show\"\n          placement=\"bottom\"\n          :width=\"760\"\n          trigger=\"click\"\n        >\n          <template #[ui.popover.triggerSlotName]>\n            <fs-button v-bind=\"item\" @click=\"handleSimpleClick\" />\n          </template>\n          <template #[ui.popover.contentSlotName]>\n            <component\n              :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n              v-if=\"columns\"\n              ref=\"columnsFilterRef\"\n              v-model:show=\"popoverVisible\"\n              mode=\"simple\"\n              v-bind=\"columnsFilter\"\n              :columns=\"columns\"\n              :storage=\"storage\"\n              @update:columns=\"$emit('update:columns', $event)\"\n            />\n          </template>\n        </component>\n        <fs-button v-else v-bind=\"item\" @click=\"item.click()\" />\n      </template>\n    </template>\n    <component\n      :is=\"columnsFilter.is || 'fs-table-columns-filter'\"\n      v-if=\"columns && columnsFilter?.mode !== 'simple'\"\n      ref=\"columnsFilterRef\"\n      :storage=\"storage\"\n      v-bind=\"columnsFilter\"\n      :columns=\"columns\"\n      @update:columns=\"$emit('update:columns', $event)\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\">\nimport FsTableColumnsFilter from \"./fs-table-columns-filter/index.vue\";\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, PropType, ref, Ref } from \"vue\";\nimport { useI18n } from \"../../locale\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonProps, ButtonsProps, TableColumnsProps } from \"../../d\";\nimport { useMerge, useUi } from \"../../use\";\n/**\n * 工具条\n */\nexport default defineComponent({\n  name: \"FsToolbar\",\n  components: { FsTableColumnsFilter },\n  props: {\n    /**\n     * 按钮配置\n     *{\n     *   search:{}, 查询\n     *   refresh:{}, 刷新\n     *   compact:{}, 紧凑模式\n     *   export:{}, 导出\n     *   columns:{} 列设置\n     *}\n     **/\n    buttons: {\n      type: Object\n    },\n    /**\n     * 当前是否紧凑模式\n     */\n    compact: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 列配置\n     */\n    columns: {\n      type: Object as PropType<TableColumnsProps>,\n      default: undefined\n    },\n    /**\n     * 是否保存用户列设置\n     * 传string则表示传入缓存的主key\n     */\n    storage: {\n      type: [String, Boolean],\n      default: true\n    },\n    /**\n     * 插槽\n     */\n    slots: {},\n\n    /**\n     * 列设置配置\n     */\n    columnsFilter: {\n      type: Object as PropType<any>\n    }\n  },\n  emits: [\"update:columns\"],\n  setup(props: any, ctx) {\n    const { t } = useI18n();\n    const columnsFilterRef: Ref = ref();\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const computedButtons = computed(() => {\n      const defaultButtons: ButtonsProps<void> = {\n        columns: {\n          click: () => {\n            columnsFilterRef.value.start();\n          }\n        }\n      };\n\n      merge(defaultButtons, props.buttons);\n      // if (defaultButtons.search) {\n      //   defaultButtons.search.type = props.search ? \"primary\" : \"default\";\n      // }\n      // if (defaultButtons.compact) {\n      //   defaultButtons.compact.type = props.compact ? \"primary\" : \"default\";\n      // }\n\n      let sortArr: ButtonProps[] = [];\n      for (let defaultButtonsKey in defaultButtons) {\n        sortArr.push({\n          ...defaultButtons[defaultButtonsKey],\n          _key: defaultButtonsKey\n        });\n      }\n      sortArr = _.sortBy(sortArr, (item) => {\n        return item.order ?? Constants.orderDefault;\n      });\n\n      const sortedButtons: ButtonsProps<void> = {};\n\n      sortArr.forEach((item) => {\n        let _key = item._key;\n        delete item._key;\n        sortedButtons[_key] = item;\n      });\n      return sortedButtons;\n    });\n    const popoverVisible = ref(false);\n    const handleSimpleClick = () => {\n      if (ui.type === \"element\") {\n        return;\n      }\n      popoverVisible.value = !popoverVisible.value;\n    };\n    return {\n      ui,\n      columnsFilterRef,\n      computedButtons,\n      popoverVisible,\n      handleSimpleClick\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-toolbar {\n  display: flex;\n\n  .fs-button {\n    margin-left: 5px;\n  }\n}\n</style>\n", "/**!\n * Sortable 1.14.0\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\n\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nvar version = \"1.14.0\";\n\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\n\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\n\nvar captureMode = {\n  capture: false,\n  passive: false\n};\n\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\n\nfunction matches(\n/**HTMLElement*/\nel,\n/**String*/\nselector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n\n  return false;\n}\n\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\n\nfunction closest(\n/**HTMLElement*/\nel,\n/**String*/\nselector,\n/**HTMLElement*/\nctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n\n  return null;\n}\n\nvar R_SPACE = /\\s+/g;\n\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\n\nfunction css(el, prop, val) {\n  var style = el && el.style;\n\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\n\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n\n    } while (!selfOnly && (el = el.parentNode));\n  }\n\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n\n  return matrixFn && new matrixFn(appliedTransforms);\n}\n\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n        i = 0,\n        n = list.length;\n\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n\n    return list;\n  }\n\n  return [];\n}\n\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n/**\n * Returns the \"bounding client rect\" of given element\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\n * @param  {[HTMLElement]} container              The parent the element will be placed in\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\n */\n\n\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode; // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect(); // Set relative to edges of padding box of container\n\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n\n      } while (container = container.parentNode);\n    }\n  }\n\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n        scaleX = elMatrix && elMatrix.a,\n        scaleY = elMatrix && elMatrix.d;\n\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n/**\n * Checks if a side of an element is scrolled past a side of its parents\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\n */\n\n\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n      elSideVal = getRect(el)[elSide];\n  /* jshint boss:true */\n\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n        visible = void 0;\n\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n\n  return false;\n}\n/**\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\n * and non-draggable elements\n * @param  {HTMLElement} el       The parent element\n * @param  {Number} childNum      The index of the child\n * @param  {Object} options       Parent Sortable's options\n * @return {HTMLElement}          The child at index childNum, or null if not found\n */\n\n\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n      i = 0,\n      children = el.children;\n\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n\n      currentChild++;\n    }\n\n    i++;\n  }\n\n  return null;\n}\n/**\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\n * @param  {HTMLElement} el       Parent element\n * @param  {selector} selector    Any other elements that should be ignored\n * @return {HTMLElement}          The last child, ignoring ghostEl\n */\n\n\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n\n  return last || null;\n}\n/**\n * Returns the index of an element within its parent for a selected set of\n * elements\n * @param  {HTMLElement} el\n * @param  {selector} selector\n * @return {number}\n */\n\n\nfunction index(el, selector) {\n  var index = 0;\n\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n  /* jshint boss:true */\n\n\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n\n  return index;\n}\n/**\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\n * The value is returned in real pixels.\n * @param  {HTMLElement} el\n * @return {Array}             Offsets in the format of [left, top]\n */\n\n\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n      offsetTop = 0,\n      winScroller = getWindowScrollingElement();\n\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n          scaleX = elMatrix.a,\n          scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n\n  return [offsetLeft, offsetTop];\n}\n/**\n * Returns the index of the object within the given array\n * @param  {Array} arr   Array that may or may not hold the object\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\n * @return {Number}      The index of the object in the array, or -1\n */\n\n\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n\n  return -1;\n}\n\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n\n  } while (elem = elem.parentNode);\n\n  return getWindowScrollingElement();\n}\n\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\n\nvar _throttleTimeout;\n\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n          _this = this;\n\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\n\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\n\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\n\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\n\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\n\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\n\nvar expando = 'Sortable' + new Date().getTime();\n\nfunction AnimationStateManager() {\n  var animationStates = [],\n      animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect); // If animating: compensate for current animation\n\n\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n\n      var animating = false,\n          animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n            target = state.target,\n            fromRect = target.fromRect,\n            toRect = getRect(target),\n            prevFromRect = target.prevFromRect,\n            prevToRect = target.prevToRect,\n            animatingRect = state.rect,\n            targetMatrix = matrix(target, true);\n\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n\n        target.toRect = toRect;\n\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) && // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        } // if fromRect != toRect: animate\n\n\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n\n          if (!time) {\n            time = _this.options.animation;\n          }\n\n          _this.animate(target, animatingRect, toRect, time);\n        }\n\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n            scaleX = elMatrix && elMatrix.a,\n            scaleY = elMatrix && elMatrix.d,\n            translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n            translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\n\nfunction repaint(target) {\n  return target.offsetWidth;\n}\n\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\n\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n\n    this.eventCanceled = false;\n\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return; // Fire global events if it exists in this sortable\n\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      } // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n\n\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized; // Add default options from plugin\n\n      _extends(defaults, initialized.defaults);\n    });\n\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return; // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\n\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n      rootEl = _ref.rootEl,\n      name = _ref.name,\n      targetEl = _ref.targetEl,\n      cloneEl = _ref.cloneEl,\n      toEl = _ref.toEl,\n      fromEl = _ref.fromEl,\n      oldIndex = _ref.oldIndex,\n      newIndex = _ref.newIndex,\n      oldDraggableIndex = _ref.oldDraggableIndex,\n      newDraggableIndex = _ref.newDraggableIndex,\n      originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n      options = sortable.options,\n      onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1); // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\n\nvar _excluded = [\"evt\"];\n\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      originalEvent = _ref.evt,\n      data = _objectWithoutProperties(_ref, _excluded);\n\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\n\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\n\nvar dragEl,\n    parentEl,\n    ghostEl,\n    rootEl,\n    nextEl,\n    lastDownEl,\n    cloneEl,\n    cloneHidden,\n    oldIndex,\n    newIndex,\n    oldDraggableIndex,\n    newDraggableIndex,\n    activeGroup,\n    putSortable,\n    awaitingDragStarted = false,\n    ignoreNextClick = false,\n    sortables = [],\n    tapEvt,\n    touchEvt,\n    lastDx,\n    lastDy,\n    tapDistanceLeft,\n    tapDistanceTop,\n    moved,\n    lastTarget,\n    lastDirection,\n    pastFirstInvertThresh = false,\n    isCircumstantialInvert = false,\n    targetMoveDistance,\n    // For positioning ghost absolutely\nghostRelativeParent,\n    ghostRelativeParentInitialScroll = [],\n    // (left, top)\n_silent = false,\n    savedInputChecked = [];\n/** @const */\n\nvar documentExists = typeof document !== 'undefined',\n    PositionGhostAbsolutely = IOS,\n    CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n    // This will not pass for IE9, because IE9 DnD only works on anchors\nsupportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n    supportCssPointerEvents = function () {\n  if (!documentExists) return; // false when <= IE11\n\n  if (IE11OrLess) {\n    return false;\n  }\n\n  var el = document.createElement('x');\n  el.style.cssText = 'pointer-events:auto';\n  return el.style.pointerEvents === 'auto';\n}(),\n    _detectDirection = function _detectDirection(el, options) {\n  var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n\n  if (elCSS.display === 'flex') {\n    return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n  }\n\n  if (elCSS.display === 'grid') {\n    return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n  }\n\n  if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n    var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n    return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n  }\n\n  return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n},\n    _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n  var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n  return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n},\n\n/**\n * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\n * @param  {Number} x      X position\n * @param  {Number} y      Y position\n * @return {HTMLElement}   Element of the first found nearest Sortable\n */\n_detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n  var ret;\n  sortables.some(function (sortable) {\n    var threshold = sortable[expando].options.emptyInsertThreshold;\n    if (!threshold || lastChild(sortable)) return;\n    var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n\n    if (insideHorizontally && insideVertically) {\n      return ret = sortable;\n    }\n  });\n  return ret;\n},\n    _prepareGroup = function _prepareGroup(options) {\n  function toFn(value, pull) {\n    return function (to, from, dragEl, evt) {\n      var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n\n      if (value == null && (pull || sameGroup)) {\n        // Default pull value\n        // Default pull and put value if same group\n        return true;\n      } else if (value == null || value === false) {\n        return false;\n      } else if (pull && value === 'clone') {\n        return value;\n      } else if (typeof value === 'function') {\n        return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n      } else {\n        var otherGroup = (pull ? to : from).options.group.name;\n        return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n      }\n    };\n  }\n\n  var group = {};\n  var originalGroup = options.group;\n\n  if (!originalGroup || _typeof(originalGroup) != 'object') {\n    originalGroup = {\n      name: originalGroup\n    };\n  }\n\n  group.name = originalGroup.name;\n  group.checkPull = toFn(originalGroup.pull, true);\n  group.checkPut = toFn(originalGroup.put);\n  group.revertClone = originalGroup.revertClone;\n  options.group = group;\n},\n    _hideGhostForTarget = function _hideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', 'none');\n  }\n},\n    _unhideGhostForTarget = function _unhideGhostForTarget() {\n  if (!supportCssPointerEvents && ghostEl) {\n    css(ghostEl, 'display', '');\n  }\n}; // #1184 fix - Prevent click event on fallback if dragged but item not changed position\n\n\nif (documentExists) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\n\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\n\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n/**\n * @class  Sortable\n * @param  {HTMLElement}  el\n * @param  {Object}       [options]\n */\n\n\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n\n  this.el = el; // root element\n\n  this.options = options = _extends({}, options); // Export instance\n\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults); // Set default options\n\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n\n  _prepareGroup(options); // Bind all private methods\n\n\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  } // Setup drag mode\n\n\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  } // Bind events\n\n\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n\n  sortables.push(this.el); // Restore sorting\n\n  options.store && options.store.get && this.sort(options.store.get(this) || []); // Add animation state manager\n\n  _extends(this, AnimationStateManager());\n}\n\nSortable.prototype =\n/** @lends Sortable.prototype */\n{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart(\n  /** Event|TouchEvent */\n  evt) {\n    if (!evt.cancelable) return;\n\n    var _this = this,\n        el = this.el,\n        options = this.options,\n        preventOnFilter = options.preventOnFilter,\n        type = evt.type,\n        touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n        target = (touch || evt).target,\n        originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n        filter = options.filter;\n\n    _saveInputCheckedState(el); // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n\n\n    if (dragEl) {\n      return;\n    }\n\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    } // cancel dnd if original target is content editable\n\n\n    if (originalTarget.isContentEditable) {\n      return;\n    } // Safari ignores further event handling after mousedown\n\n\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n\n    target = closest(target, options.draggable, el, false);\n\n    if (target && target.animated) {\n      return;\n    }\n\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    } // Get the index of the dragged element within its parent\n\n\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable); // Check filter\n\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    } // Prepare `dragstart`\n\n\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch,\n  /** HTMLElement */\n  target) {\n    var _this = this,\n        el = _this.el,\n        options = _this.options,\n        ownerDocument = el.ownerDocument,\n        dragStartFn;\n\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n\n          return;\n        } // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n\n\n        _this._disableDelayedDragEvents();\n\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        } // Bind the events: dragstart/dragend\n\n\n        _this._triggerDragStart(evt, touch); // Drag start event\n\n\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        }); // Chosen item\n\n\n        toggleClass(dragEl, options.chosenClass, true);\n      }; // Disable \"draggable\"\n\n\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop); // Make dragEl draggable (must be before delay for FireFox)\n\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n\n      pluginEvent('delayStart', this, {\n        evt: evt\n      }); // Delay is impossible for native DnD in Edge or IE\n\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n\n          return;\n        } // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n\n\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler(\n  /** TouchEvent|PointerEvent **/\n  e) {\n    var touch = e.touches ? e.touches[0] : e;\n\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart(\n  /** Event */\n  evt,\n  /** Touch */\n  touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n\n    awaitingDragStarted = false;\n\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n\n      var options = this.options; // Apply effect\n\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost(); // Drag start event\n\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n\n      _hideGhostForTarget();\n\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n\n          target = parent; // store last element\n        }\n        /* jshint boss:true */\n        while (parent = parent.parentNode);\n      }\n\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove(\n  /**TouchEvent*/\n  evt) {\n    if (tapEvt) {\n      var options = this.options,\n          fallbackTolerance = options.fallbackTolerance,\n          fallbackOffset = options.fallbackOffset,\n          touch = evt.touches ? evt.touches[0] : evt,\n          ghostMatrix = ghostEl && matrix(ghostEl, true),\n          scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n          scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n          relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n          dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n          dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1); // only set the status to dragging, when we are actually dragging\n\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n\n        this._onDragStart(evt, true);\n      }\n\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n          rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n          options = this.options; // Position absolutely\n\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl); // Set transform-origin\n\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart(\n  /**Event*/\n  evt,\n  /**boolean*/\n  fallback) {\n    var _this = this;\n\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n\n      return;\n    }\n\n    pluginEvent('setupClone', this);\n\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n\n      this._hideClone();\n\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    } // #1143: IFrame support workaround\n\n\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n\n      _this._hideClone();\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true); // Set proper drop events\n\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n\n      on(document, 'drop', _this); // #1276 fix:\n\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        target = evt.target,\n        dragRect,\n        targetRect,\n        revert,\n        options = this.options,\n        group = options.group,\n        activeSortable = Sortable.active,\n        isOwner = activeGroup === group,\n        canSort = options.sort,\n        fromSortable = putSortable || activeSortable,\n        vertical,\n        _this = this,\n        completedFired = false;\n\n    if (_silent) return;\n\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    } // Capture animation state\n\n\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n\n      _this.captureAnimationState();\n\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    } // Return invocation when dragEl is inserted (or completed)\n\n\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        } // Animation\n\n\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      } // Null lastTarget if it is not inside a previously swapped element\n\n\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      } // no bubbling and not fallback\n\n\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target); // Do not detect for empty insert if already inserted\n\n\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    } // Call when dragEl has been inserted\n\n\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n\n    ignoreNextClick = false;\n\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n\n      if (revert) {\n        parentEl = rootEl; // actualization\n\n        capture();\n\n        this._hideClone();\n\n        dragOverEvent('revert');\n\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n\n        return completed(true);\n      }\n\n      var elLastChild = lastChild(el, options.draggable);\n\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        } // if there is a last element, it is the target\n\n\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n\n        if (target) {\n          targetRect = getRect(target);\n        }\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          el.appendChild(dragEl);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n\n        target = firstChild;\n        targetRect = getRect(target);\n\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n            targetBeforeFirstSwap,\n            differentLevel = dragEl.parentNode !== el,\n            differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n            side1 = vertical ? 'top' : 'left',\n            scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n            scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        } // If dragEl is already beside target: Do not insert\n\n\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n            after = false;\n        after = direction === 1;\n\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          } // Undo chrome's scroll adjustment (has no effect on other browsers)\n\n\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n\n          parentEl = dragEl.parentNode; // actualization\n          // must be done before animation\n\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n\n          changed();\n          return completed(true);\n        }\n      }\n\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop(\n  /**Event*/\n  evt) {\n    var el = this.el,\n        options = this.options; // Get the index of the dragged element within its parent\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode; // Get again after plugin event\n\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n\n    if (Sortable.eventCanceled) {\n      this._nulling();\n\n      return;\n    }\n\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n\n    _cancelNextTick(this.cloneId);\n\n    _cancelNextTick(this._dragStartId); // Unbind events\n\n\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n\n    this._offMoveEvents();\n\n    this._offUpEvents();\n\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n\n    css(dragEl, 'transform', '');\n\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n\n        _disableDraggable(dragEl);\n\n        dragEl.style['will-change'] = ''; // Remove classes\n        // ghostClass is added in dragStarted\n\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n\n        toggleClass(dragEl, this.options.chosenClass, false); // Drag stop event\n\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            }); // Remove event\n\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            }); // drag from one list and drop into another\n\n\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          }); // Save sorting\n\n\n          this.save();\n        }\n      }\n    }\n\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent(\n  /**Event*/\n  evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n\n        break;\n\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n\n          _globalDragOver(evt);\n        }\n\n        break;\n\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n\n  /**\n   * Serializes the item into an array of string.\n   * @returns {String[]}\n   */\n  toArray: function toArray() {\n    var order = [],\n        el,\n        children = this.el.children,\n        i = 0,\n        n = children.length,\n        options = this.options;\n\n    for (; i < n; i++) {\n      el = children[i];\n\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n\n    return order;\n  },\n\n  /**\n   * Sorts the elements according to the array.\n   * @param  {String[]}  order  order of the items\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n        rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n\n  /**\n   * Save the current sorting\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n\n  /**\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\n   * @param   {HTMLElement}  el\n   * @param   {String}       [selector]  default: `options.draggable`\n   * @returns {HTMLElement|null}\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n\n  /**\n   * Set/get option\n   * @param   {string} name\n   * @param   {*}      [value]\n   * @returns {*}\n   */\n  option: function option(name, value) {\n    var options = this.options;\n\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n\n  /**\n   * Destroy\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    } // Remove draggable attributes\n\n\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n\n    this._onDrop();\n\n    this._disableDelayedDragEvents();\n\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n\n      return;\n    }\n\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return; // show clone at dragEl or original position\n\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\n\nfunction _globalDragOver(\n/**Event*/\nevt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n\n  evt.cancelable && evt.preventDefault();\n}\n\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n      sortable = fromEl[expando],\n      onMoveFn = sortable.options.onMove,\n      retVal; // Support for new CustomEvent feature\n\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n\n  return retVal;\n}\n\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\n\nfunction _unsilent() {\n  _silent = false;\n}\n\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var rect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var spacer = 10;\n  return vertical ? evt.clientX < rect.left - spacer || evt.clientY < rect.top && evt.clientX < rect.right : evt.clientY < rect.top - spacer || evt.clientY < rect.bottom && evt.clientX < rect.left;\n}\n\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var rect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var spacer = 10;\n  return vertical ? evt.clientX > rect.right + spacer || evt.clientX <= rect.right && evt.clientY > rect.bottom && evt.clientX >= rect.left : evt.clientX > rect.right && evt.clientY > rect.top || evt.clientX <= rect.right && evt.clientY > rect.bottom + spacer;\n}\n\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n      targetLength = vertical ? targetRect.height : targetRect.width,\n      targetS1 = vertical ? targetRect.top : targetRect.left,\n      targetS2 = vertical ? targetRect.bottom : targetRect.right,\n      invert = false;\n\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n\n  invert = invert || invertSwap;\n\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n\n  return 0;\n}\n/**\n * Gets the direction dragEl must be swapped relative to target in order to make it\n * seem that dragEl has been \"inserted\" into that element's position\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\n * @return {Number}                   Direction dragEl must be swapped\n */\n\n\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n/**\n * Generate id\n * @param   {HTMLElement} el\n * @returns {String}\n * @private\n */\n\n\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n      i = str.length,\n      sum = 0;\n\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n\n  return sum.toString(36);\n}\n\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\n\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\n\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n} // Fixed #973:\n\n\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n} // Export utils\n\n\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n/**\n * Get the Sortable instance of an element\n * @param  {HTMLElement} element The element\n * @return {Sortable|undefined}         The instance of Sortable\n */\n\nSortable.get = function (element) {\n  return element[expando];\n};\n/**\n * Mount a plugin to Sortable\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\n */\n\n\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n/**\n * Create sortable instance\n * @param {HTMLElement}  el\n * @param {Object}      [options]\n */\n\n\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n}; // Export\n\n\nSortable.version = version;\n\nvar autoScrolls = [],\n    scrollEl,\n    scrollRootEl,\n    scrolling = false,\n    lastAutoScrollX,\n    lastAutoScrollY,\n    touchEvt$1,\n    pointerElemChangedInterval;\n\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    }; // Bind all private methods\n\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n          y = (evt.touches ? evt.touches[0] : evt).clientY,\n          elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt; // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback); // Listener for pointer element change\n\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval(); // Detect for pointer elem change, emulating native DnD behaviour\n\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\n\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\n\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\n\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n      y = (evt.touches ? evt.touches[0] : evt).clientY,\n      sens = options.scrollSensitivity,\n      speed = options.scrollSpeed,\n      winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n      scrollCustomFn; // New scroll root, set scrollEl\n\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n\n  var layersOut = 0;\n  var currentParent = scrollEl;\n\n  do {\n    var el = currentParent,\n        rect = getRect(el),\n        top = rect.top,\n        bottom = rect.bottom,\n        left = rect.left,\n        right = rect.right,\n        width = rect.width,\n        height = rect.height,\n        canScrollX = void 0,\n        canScrollY = void 0,\n        scrollWidth = el.scrollWidth,\n        scrollHeight = el.scrollHeight,\n        elCSS = css(el),\n        scrollPosX = el.scrollLeft,\n        scrollPosY = el.scrollTop;\n\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n\n          }\n\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\n\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n      putSortable = _ref.putSortable,\n      dragEl = _ref.dragEl,\n      activeSortable = _ref.activeSortable,\n      dispatchSortableEvent = _ref.dispatchSortableEvent,\n      hideGhostForTarget = _ref.hideGhostForTarget,\n      unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\n\nfunction Revert() {}\n\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n        putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n\n    this.sortable.animateAll();\n\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\n\nfunction Remove() {}\n\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n        putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\n\nvar lastSwapEl;\n\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n          target = _ref2.target,\n          onMove = _ref2.onMove,\n          activeSortable = _ref2.activeSortable,\n          changed = _ref2.changed,\n          cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n          options = this.options;\n\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n          putSortable = _ref3.putSortable,\n          dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\n\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n      p2 = n2.parentNode,\n      i1,\n      i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\n\nvar multiDragElements = [],\n    multiDragClones = [],\n    lastMultiDragSelect,\n    // for selection with modifier key down (SHIFT)\nmultiDragSortable,\n    initialFolding = false,\n    // Initial multi-drag fold when drag started\nfolding = false,\n    // Folding any other time\ndragStarted = false,\n    dragEl$1,\n    clonesFromRect,\n    clonesHidden;\n\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n\n    if (sortable.options.supportPointer) {\n      on(document, 'pointerup', this._deselectMultiDrag);\n    } else {\n      on(document, 'mouseup', this._deselectMultiDrag);\n      on(document, 'touchend', this._deselectMultiDrag);\n    }\n\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n          cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n\n      sortable._hideClone();\n\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n          rootEl = _ref3.rootEl,\n          dispatchSortableEvent = _ref3.dispatchSortableEvent,\n          cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n          rootEl = _ref4.rootEl,\n          cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n\n      var sortable = _ref5.sortable,\n          cloneNowHidden = _ref5.cloneNowHidden,\n          cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      }); // Sort multi-drag elements\n\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n        sortable.captureAnimationState();\n\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        } // Remove all auxiliary multidrag items from el, if sorting enabled\n\n\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n          completed = _ref8.completed,\n          cancel = _ref8.cancel;\n\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n          rootEl = _ref9.rootEl,\n          sortable = _ref9.sortable,\n          dragRect = _ref9.dragRect;\n\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n          isOwner = _ref10.isOwner,\n          insertion = _ref10.insertion,\n          activeSortable = _ref10.activeSortable,\n          parentEl = _ref10.parentEl,\n          putSortable = _ref10.putSortable;\n      var options = this.options;\n\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n\n        initialFolding = false; // If leaving sort:false root, or already folding - Fold to new location\n\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute); // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        } // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n\n\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n\n            activeSortable._showClone(sortable); // Unfold animation for clones if showing from hidden\n\n\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n          isOwner = _ref11.isOwner,\n          activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n          rootEl = _ref12.rootEl,\n          parentEl = _ref12.parentEl,\n          sortable = _ref12.sortable,\n          dispatchSortableEvent = _ref12.dispatchSortableEvent,\n          oldIndex = _ref12.oldIndex,\n          putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n          children = parentEl.children; // Multi-drag selection\n\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          }); // Modifier activated, select from last to dragEl\n\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n                currentIndex = index(dragEl$1);\n\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvt: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvt: evt\n          });\n        }\n      } // Multi-drag drop\n\n\n      if (dragStarted && this.isMultiDrag) {\n        folding = false; // Do not \"unfold\" after around dragEl if reverted\n\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n              multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect; // Prepare unfold animation\n\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            } // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n\n\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n\n              multiDragIndex++;\n            }); // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n\n              if (update) {\n                dispatchSortableEvent('update');\n              }\n            }\n          } // Must be done after capturing individual rects (scroll bar)\n\n\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n\n        multiDragSortable = toSortable;\n      } // Remove clones if necessary\n\n\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return; // Only deselect if selection is in this sortable\n\n      if (multiDragSortable !== this.sortable) return; // Only deselect if target is not item in this sortable\n\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return; // Only deselect if left click\n\n      if (evt && evt.button !== 0) return;\n\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvt: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\n       * Selects the provided multi-drag item\n       * @param  {HTMLElement} el    The element to be selected\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n\n          multiDragSortable = sortable;\n        }\n\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n\n      /**\n       * Deselects the provided multi-drag item\n       * @param  {HTMLElement} el    The element to be deselected\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n            index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n\n      var oldIndicies = [],\n          newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        }); // multiDragElements will already be sorted if folding\n\n        var newIndex;\n\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n\n        return key;\n      }\n    }\n  });\n}\n\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n/**\n * Insert multi-drag clones\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\n * @param  {HTMLElement} rootEl\n */\n\n\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\n\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\n\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\n\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };\n", "var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nimport Sortable from \"sortablejs\";\nimport { resolveComponent, TransitionGroup, defineComponent, h, nextTick } from \"vue\";\nfunction removeNode(node) {\n  if (node.parentElement !== null) {\n    node.parentElement.removeChild(node);\n  }\n}\nfunction insertNodeAt(fatherNode, node, position) {\n  const refNode = position === 0 ? fatherNode.children[0] : fatherNode.children[position - 1].nextSibling;\n  fatherNode.insertBefore(node, refNode);\n}\nfunction getConsole() {\n  if (typeof window !== \"undefined\") {\n    return window.console;\n  }\n  return global.console;\n}\nconst console$1 = getConsole();\nfunction cached(fn) {\n  const cache = /* @__PURE__ */ Object.create(null);\n  return function cachedFn(str) {\n    const hit = cache[str];\n    return hit || (cache[str] = fn(str));\n  };\n}\nconst regex = /-(\\w)/g;\nconst camelize = cached((str) => str.replace(regex, (_, c) => c.toUpperCase()));\nconst manageAndEmit$1 = [\"Start\", \"Add\", \"Remove\", \"Update\", \"End\"];\nconst emit$1 = [\"Choose\", \"Unchoose\", \"Sort\", \"Filter\", \"Clone\"];\nconst manage$1 = [\"Move\"];\nconst eventHandlerNames = [manage$1, manageAndEmit$1, emit$1].flatMap((events2) => events2).map((evt) => `on${evt}`);\nconst events = {\n  manage: manage$1,\n  manageAndEmit: manageAndEmit$1,\n  emit: emit$1\n};\nfunction isReadOnly(eventName) {\n  return eventHandlerNames.indexOf(eventName) !== -1;\n}\nconst tags = [\n  \"a\",\n  \"abbr\",\n  \"address\",\n  \"area\",\n  \"article\",\n  \"aside\",\n  \"audio\",\n  \"b\",\n  \"base\",\n  \"bdi\",\n  \"bdo\",\n  \"blockquote\",\n  \"body\",\n  \"br\",\n  \"button\",\n  \"canvas\",\n  \"caption\",\n  \"cite\",\n  \"code\",\n  \"col\",\n  \"colgroup\",\n  \"data\",\n  \"datalist\",\n  \"dd\",\n  \"del\",\n  \"details\",\n  \"dfn\",\n  \"dialog\",\n  \"div\",\n  \"dl\",\n  \"dt\",\n  \"em\",\n  \"embed\",\n  \"fieldset\",\n  \"figcaption\",\n  \"figure\",\n  \"footer\",\n  \"form\",\n  \"h1\",\n  \"h2\",\n  \"h3\",\n  \"h4\",\n  \"h5\",\n  \"h6\",\n  \"head\",\n  \"header\",\n  \"hgroup\",\n  \"hr\",\n  \"html\",\n  \"i\",\n  \"iframe\",\n  \"img\",\n  \"input\",\n  \"ins\",\n  \"kbd\",\n  \"label\",\n  \"legend\",\n  \"li\",\n  \"link\",\n  \"main\",\n  \"map\",\n  \"mark\",\n  \"math\",\n  \"menu\",\n  \"menuitem\",\n  \"meta\",\n  \"meter\",\n  \"nav\",\n  \"noscript\",\n  \"object\",\n  \"ol\",\n  \"optgroup\",\n  \"option\",\n  \"output\",\n  \"p\",\n  \"param\",\n  \"picture\",\n  \"pre\",\n  \"progress\",\n  \"q\",\n  \"rb\",\n  \"rp\",\n  \"rt\",\n  \"rtc\",\n  \"ruby\",\n  \"s\",\n  \"samp\",\n  \"script\",\n  \"section\",\n  \"select\",\n  \"slot\",\n  \"small\",\n  \"source\",\n  \"span\",\n  \"strong\",\n  \"style\",\n  \"sub\",\n  \"summary\",\n  \"sup\",\n  \"svg\",\n  \"table\",\n  \"tbody\",\n  \"td\",\n  \"template\",\n  \"textarea\",\n  \"tfoot\",\n  \"th\",\n  \"thead\",\n  \"time\",\n  \"title\",\n  \"tr\",\n  \"track\",\n  \"u\",\n  \"ul\",\n  \"var\",\n  \"video\",\n  \"wbr\"\n];\nfunction isHtmlTag(name) {\n  return tags.includes(name);\n}\nfunction isTransition(name) {\n  return [\"transition-group\", \"TransitionGroup\"].includes(name);\n}\nfunction isHtmlAttribute(value) {\n  return [\"id\", \"class\", \"role\", \"style\"].includes(value) || value.startsWith(\"data-\") || value.startsWith(\"aria-\") || value.startsWith(\"on\");\n}\nfunction project(entries) {\n  return entries.reduce((res, [key, value]) => {\n    res[key] = value;\n    return res;\n  }, {});\n}\nfunction getComponentAttributes({ $attrs, componentData = {} }) {\n  const attributes = project(Object.entries($attrs).filter(([key, _]) => isHtmlAttribute(key)));\n  return __spreadValues(__spreadValues({}, attributes), componentData);\n}\nfunction createSortableOption({ $attrs, callBackBuilder }) {\n  const options = project(getValidSortableEntries($attrs));\n  Object.entries(callBackBuilder).forEach(([eventType, eventBuilder]) => {\n    events[eventType].forEach((event) => {\n      options[`on${event}`] = eventBuilder(event);\n    });\n  });\n  const draggable = `[data-draggable]${options.draggable || \"\"}`;\n  return __spreadProps(__spreadValues({}, options), {\n    draggable\n  });\n}\nfunction getValidSortableEntries(value) {\n  return Object.entries(value).filter(([key, _]) => !isHtmlAttribute(key)).map(([key, value2]) => [camelize(key), value2]).filter(([key, _]) => !isReadOnly(key));\n}\nconst getHtmlElementFromNode = (node) => {\n  const el = node.el || Array.isArray(node.children) && node.children[0].el.parentNode;\n  if (!el) {\n    console.error(\"\\u4F7F\\u7528 transition-group , \\u9700\\u8981\\u5728slot\\u4E2Dtemplate\\u5185\\u81F3\\u5C112\\u5C42html\\u6807\\u7B7E\");\n  }\n  return el || {};\n};\nconst addContext = (domElement, context) => domElement.__draggable_context = context;\nconst getContext = (domElement) => domElement.__draggable_context;\nclass ComponentStructure {\n  constructor({\n    nodes: { header, default: defaultNodes, footer },\n    root,\n    realList\n  }) {\n    this.defaultNodes = defaultNodes;\n    this.children = [...header, ...defaultNodes, ...footer];\n    this.externalComponent = root.externalComponent;\n    this.rootTransition = root.transition;\n    this.tag = root.tag;\n    this.realList = realList;\n  }\n  get _isRootComponent() {\n    return this.externalComponent || this.rootTransition;\n  }\n  render(h2, attributes) {\n    const { tag, children, _isRootComponent } = this;\n    const option = !_isRootComponent ? children : { default: () => children };\n    return h2(tag, attributes, option);\n  }\n  updated() {\n    const { defaultNodes, realList } = this;\n    defaultNodes.forEach((node, index) => {\n      addContext(getHtmlElementFromNode(node), {\n        element: realList[index],\n        index\n      });\n    });\n  }\n  getUnderlyingVm(domElement) {\n    return getContext(domElement);\n  }\n  getVmIndexFromDomIndex(domIndex, element) {\n    const { defaultNodes } = this;\n    const { length } = defaultNodes;\n    const domChildren = element.children;\n    const domElement = domChildren.item(domIndex);\n    if (domElement === null) {\n      return length;\n    }\n    const context = getContext(domElement);\n    if (context) {\n      return context.index;\n    }\n    if (length === 0) {\n      return 0;\n    }\n    const firstDomListElement = getHtmlElementFromNode(defaultNodes[0]);\n    const indexFirstDomListElement = [...domChildren].findIndex((element2) => element2 === firstDomListElement);\n    return domIndex < indexFirstDomListElement ? 0 : length;\n  }\n}\nfunction getSlot(slots, key) {\n  const slotValue = slots[key];\n  return slotValue ? slotValue() : [];\n}\nfunction computeNodes({ $slots, realList, getKey }) {\n  const normalizedList = realList || [];\n  const [header, footer] = [\"header\", \"footer\"].map((name) => getSlot($slots, name));\n  const { item } = $slots;\n  if (!item) {\n    throw new Error(\"draggable element must have an item slot\");\n  }\n  const defaultNodes = normalizedList.flatMap((element, index) => item({ element, index }).map((node) => {\n    node.key = getKey(element);\n    node.props = __spreadProps(__spreadValues({}, node.props || {}), { \"data-draggable\": true });\n    return node;\n  }));\n  if (defaultNodes.length !== normalizedList.length) {\n    throw new Error(\"Item slot must have only one child\");\n  }\n  return {\n    header,\n    footer,\n    default: defaultNodes\n  };\n}\nfunction getRootInformation(tag) {\n  const transition = isTransition(tag);\n  const externalComponent = !isHtmlTag(tag) && !transition;\n  return {\n    transition,\n    externalComponent,\n    tag: externalComponent ? resolveComponent(tag) : transition ? TransitionGroup : tag\n  };\n}\nfunction computeComponentStructure({ $slots, tag, realList, getKey }) {\n  const nodes = computeNodes({ $slots, realList, getKey });\n  const root = getRootInformation(tag);\n  return new ComponentStructure({ nodes, root, realList });\n}\nfunction emit(evtName, evtData) {\n  nextTick(() => this.$emit(evtName.toLowerCase(), evtData));\n}\nfunction manage(evtName) {\n  return (evtData, originalElement) => {\n    if (this.realList !== null) {\n      return this[`onDrag${evtName}`](evtData, originalElement);\n    }\n  };\n}\nfunction manageAndEmit(evtName) {\n  const delegateCallBack = manage.call(this, evtName);\n  return (evtData, originalElement) => {\n    delegateCallBack.call(this, evtData, originalElement);\n    emit.call(this, evtName, evtData);\n  };\n}\nlet draggingElement = null;\nconst props = {\n  list: {\n    type: Array,\n    required: false,\n    default: null\n  },\n  modelValue: {\n    type: Array,\n    required: false,\n    default: null\n  },\n  itemKey: {\n    type: [String, Function],\n    required: true\n  },\n  clone: {\n    type: Function,\n    default: (original) => {\n      return original;\n    }\n  },\n  tag: {\n    type: String,\n    default: \"div\"\n  },\n  move: {\n    type: Function,\n    default: null\n  },\n  componentData: {\n    type: Object,\n    required: false,\n    default: null\n  }\n};\nconst emits = [\n  \"update:modelValue\",\n  \"change\",\n  ...[...events.manageAndEmit, ...events.emit].map((evt) => evt.toLowerCase())\n];\nconst draggableComponent = defineComponent({\n  name: \"draggable\",\n  inheritAttrs: false,\n  props,\n  emits,\n  data() {\n    return {\n      error: false\n    };\n  },\n  render() {\n    try {\n      this.error = false;\n      const { $slots, $attrs, tag, componentData, realList, getKey } = this;\n      const componentStructure = computeComponentStructure({\n        $slots,\n        tag,\n        realList,\n        getKey\n      });\n      this.componentStructure = componentStructure;\n      const attributes = getComponentAttributes({ $attrs, componentData });\n      return componentStructure.render(h, attributes);\n    } catch (err) {\n      this.error = true;\n      return h(\"pre\", { style: { color: \"red\" } }, err.stack);\n    }\n  },\n  created() {\n    if (this.list !== null && this.modelValue !== null) {\n      console$1.error(\"modelValue and list props are mutually exclusive! Please set one or another.\");\n    }\n  },\n  mounted() {\n    if (this.error) {\n      return;\n    }\n    const { $attrs, $el, componentStructure } = this;\n    componentStructure.updated();\n    const sortableOptions = createSortableOption({\n      $attrs,\n      callBackBuilder: {\n        manageAndEmit: (event) => manageAndEmit.call(this, event),\n        emit: (event) => emit.bind(this, event),\n        manage: (event) => manage.call(this, event)\n      }\n    });\n    const targetDomElement = $el.nodeType === 1 ? $el : $el.parentElement;\n    this._sortable = new Sortable(targetDomElement, sortableOptions);\n    this.targetDomElement = targetDomElement;\n    targetDomElement.__draggable_component__ = this;\n  },\n  updated() {\n    this.componentStructure.updated();\n  },\n  beforeUnmount() {\n    if (this._sortable !== void 0)\n      this._sortable.destroy();\n  },\n  computed: {\n    realList() {\n      const { list } = this;\n      return list ? list : this.modelValue;\n    },\n    getKey() {\n      const { itemKey } = this;\n      if (typeof itemKey === \"function\") {\n        return itemKey;\n      }\n      return (element) => element[itemKey];\n    }\n  },\n  watch: {\n    $attrs: {\n      handler(newOptionValue) {\n        const { _sortable } = this;\n        if (!_sortable)\n          return;\n        getValidSortableEntries(newOptionValue).forEach(([key, value]) => {\n          _sortable.option(key, value);\n        });\n      },\n      deep: true\n    }\n  },\n  methods: {\n    getUnderlyingVm(domElement) {\n      return this.componentStructure.getUnderlyingVm(domElement) || null;\n    },\n    getUnderlyingPotencialDraggableComponent(htmElement) {\n      return htmElement.__draggable_component__;\n    },\n    emitChanges(evt) {\n      nextTick(() => this.$emit(\"change\", evt));\n    },\n    alterList(onList) {\n      if (this.list) {\n        onList(this.list);\n        return;\n      }\n      const newList = [...this.modelValue];\n      onList(newList);\n      this.$emit(\"update:modelValue\", newList);\n    },\n    spliceList() {\n      const spliceList = (list) => list.splice(...arguments);\n      this.alterList(spliceList);\n    },\n    updatePosition(oldIndex, newIndex) {\n      const updatePosition = (list) => list.splice(newIndex, 0, list.splice(oldIndex, 1)[0]);\n      this.alterList(updatePosition);\n    },\n    getRelatedContextFromMoveEvent({ to, related }) {\n      const component = this.getUnderlyingPotencialDraggableComponent(to);\n      if (!component) {\n        return { component };\n      }\n      const list = component.realList;\n      const context = { list, component };\n      if (to !== related && list) {\n        const destination = component.getUnderlyingVm(related) || {};\n        return __spreadValues(__spreadValues({}, destination), context);\n      }\n      return context;\n    },\n    getVmIndexFromDomIndex(domIndex) {\n      return this.componentStructure.getVmIndexFromDomIndex(domIndex, this.targetDomElement);\n    },\n    onDragStart(evt) {\n      this.context = this.getUnderlyingVm(evt.item);\n      evt.item._underlying_vm_ = this.clone(this.context.element);\n      draggingElement = evt.item;\n    },\n    onDragAdd(evt) {\n      const element = evt.item._underlying_vm_;\n      if (element === void 0) {\n        return;\n      }\n      removeNode(evt.item);\n      const newIndex = this.getVmIndexFromDomIndex(evt.newIndex);\n      this.spliceList(newIndex, 0, element);\n      const added = { element, newIndex };\n      this.emitChanges({ added });\n    },\n    onDragRemove(evt) {\n      insertNodeAt(this.$el, evt.item, evt.oldIndex);\n      if (evt.pullMode === \"clone\") {\n        removeNode(evt.clone);\n        return;\n      }\n      const { index: oldIndex, element } = this.context;\n      this.spliceList(oldIndex, 1);\n      const removed = { element, oldIndex };\n      this.emitChanges({ removed });\n    },\n    onDragUpdate(evt) {\n      removeNode(evt.item);\n      insertNodeAt(evt.from, evt.item, evt.oldIndex);\n      const oldIndex = this.context.index;\n      const newIndex = this.getVmIndexFromDomIndex(evt.newIndex);\n      this.updatePosition(oldIndex, newIndex);\n      const moved = { element: this.context.element, oldIndex, newIndex };\n      this.emitChanges({ moved });\n    },\n    computeFutureIndex(relatedContext, evt) {\n      if (!relatedContext.element) {\n        return 0;\n      }\n      const domChildren = [...evt.to.children].filter((el) => el.style[\"display\"] !== \"none\");\n      const currentDomIndex = domChildren.indexOf(evt.related);\n      const currentIndex = relatedContext.component.getVmIndexFromDomIndex(currentDomIndex);\n      const draggedInList = domChildren.indexOf(draggingElement) !== -1;\n      return draggedInList || !evt.willInsertAfter ? currentIndex : currentIndex + 1;\n    },\n    onDragMove(evt, originalEvent) {\n      const { move, realList } = this;\n      if (!move || !realList) {\n        return true;\n      }\n      const relatedContext = this.getRelatedContextFromMoveEvent(evt);\n      const futureIndex = this.computeFutureIndex(relatedContext, evt);\n      const draggedContext = __spreadProps(__spreadValues({}, this.context), {\n        futureIndex\n      });\n      const sendEvent = __spreadProps(__spreadValues({}, evt), {\n        relatedContext,\n        draggedContext\n      });\n      return move(sendEvent, originalEvent);\n    },\n    onDragEnd() {\n      draggingElement = null;\n    }\n  }\n});\nexport { draggableComponent as default };\n", "<template>\n  <component :is=\"ui.buttonGroup.name\" class=\"fs-table-columns-fixed-controller\">\n    <fs-button\n      v-for=\"option of options\"\n      :key=\"option.icon\"\n      :type=\"modelValue === option.value ? 'primary' : 'default'\"\n      :icon=\"option.icon\"\n      size=\"small\"\n      @click=\"submit(option.value)\"\n    />\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref } from \"vue\";\nimport { useUi } from \"../../../../use\";\n\nexport default defineComponent({\n  name: \"FsTableColumnsFixedController\",\n  props: {\n    modelValue: {\n      default: false\n    }\n  },\n  emits: [\"update:modelValue\", \"change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const options = computed(() => {\n      return [\n        {\n          value: \"left\",\n          icon: ui.icons.left // 'el-icon-arrow-left'\n        },\n        {\n          value: false,\n          icon: ui.icons.close // 'el-icon-close'\n        },\n        {\n          value: \"right\",\n          icon: ui.icons.right // 'el-icon-arrow-right'\n        }\n      ];\n    });\n\n    function submit(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n      ctx.emit(\"change\", value);\n    }\n    return {\n      ui,\n      options,\n      submit\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-table-columns-fixed-controller {\n  .fs-button {\n    padding: 2px !important;\n    font-size: 10px;\n    min-height: auto;\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.buttonGroup.name\" class=\"fs-table-columns-fixed-controller\">\n    <fs-button\n      v-for=\"option of options\"\n      :key=\"option.icon\"\n      :type=\"modelValue === option.value ? 'primary' : 'default'\"\n      :icon=\"option.icon\"\n      size=\"small\"\n      @click=\"submit(option.value)\"\n    />\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, ref } from \"vue\";\nimport { useUi } from \"../../../../use\";\n\nexport default defineComponent({\n  name: \"FsTableColumnsFixedController\",\n  props: {\n    modelValue: {\n      default: false\n    }\n  },\n  emits: [\"update:modelValue\", \"change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const options = computed(() => {\n      return [\n        {\n          value: \"left\",\n          icon: ui.icons.left // 'el-icon-arrow-left'\n        },\n        {\n          value: false,\n          icon: ui.icons.close // 'el-icon-close'\n        },\n        {\n          value: \"right\",\n          icon: ui.icons.right // 'el-icon-arrow-right'\n        }\n      ];\n    });\n\n    function submit(value: any) {\n      ctx.emit(\"update:modelValue\", value);\n      ctx.emit(\"change\", value);\n    }\n    return {\n      ui,\n      options,\n      submit\n    };\n  }\n});\n</script>\n\n<style lang=\"less\">\n.fs-table-columns-fixed-controller {\n  .fs-button {\n    padding: 2px !important;\n    font-size: 10px;\n    min-height: auto;\n  }\n}\n</style>\n", "<template>\n  <draggable :list=\"columns\" item-key=\"key\" :move=\"onDraggableMove\">\n    <template #item=\"{ element, index }\">\n      <div>\n        <div\n          v-show=\"originalColumnsMap[element.__key]?.__show !== false\"\n          :title=\"buildText(element)\"\n          class=\"component--list-item\"\n          flex=\"main:justify cross:center\"\n          :i=\"index\"\n        >\n          <component\n            :is=\"ui.checkbox.name\"\n            :[ui.checkbox.modelValue]=\"element.show\"\n            :disabled=\"originalColumnsMap[element.__key]?.__disabled === true\"\n            class=\"item-label\"\n            :title=\"buildText(element)\"\n            @[buildUpdateKey(ui.checkbox.modelValue)]=\"updateChecked(element)\"\n            @change=\"onCheckChanged\"\n          >\n            {{ buildText(element) }}\n          </component>\n          <div class=\"item-right\">\n            <fs-table-columns-fixed-controller\n              v-if=\"isRoot\"\n              v-model=\"element.fixed\"\n              flex-box=\"0\"\n              class=\"d2-mr-10\"\n              @change=\"fixedChange(index, $event)\"\n            />\n            <div flex-box=\"0\" class=\"component--list-item-handle handle\">\n              <fs-icon :icon=\"ui.icons.sort\" />\n            </div>\n          </div>\n        </div>\n        <div style=\"margin-left: 20px; padding-left: 10px; border-left: 1px solid #eee\">\n          <fs-columns-filter-nest-list\n            v-if=\"element.children\"\n            :columns=\"element.children\"\n            @check-changed=\"onCheckChanged\"\n          />\n        </div>\n      </div>\n    </template>\n  </draggable>\n</template>\n<script setup lang=\"ts\">\n//不要删\n//@ts-ignore\nimport draggable from \"vuedraggable-es\";\nimport FsTableColumnsFixedController from \"./fs-table-columns-fixed-controller/index.vue\";\nimport { ColumnsFilterContext, ColumnsFilterItem, ColumnsFilterProvideKey } from \"../../../d\";\nimport { inject } from \"vue\";\nimport { useUi } from \"@fast-crud/ui-interface\";\n\nconst { ui } = useUi();\nconst emits = defineEmits([\"check-changed\", \"fixed-changed\"]);\ntype NestListProps = {\n  columns: ColumnsFilterItem[];\n  isRoot?: boolean;\n};\nconst props = withDefaults(defineProps<NestListProps>(), {\n  isRoot: false\n});\nconst { originalColumns, currentColumns, originalColumnsMap, text, active } =\n  inject<ColumnsFilterContext>(ColumnsFilterProvideKey);\nfunction buildText(element: any) {\n  return element.label || element.title || element.key || text.value.unnamed;\n}\n\nfunction onDraggableMove(e: any) {\n  const draged = e.draggedContext.element;\n  const target = e.relatedContext.element;\n  const sorted: ColumnsFilterItem[] = [];\n  for (const item of currentColumns.value) {\n    if (item.key === draged.key) {\n      sorted.push(target);\n    } else if (item.key === target.key) {\n      sorted.push(draged);\n    } else {\n      sorted.push(item);\n    }\n  }\n  //看key的排列是否正常\n  let leftIndex = 0;\n  let rightIndex = sorted.length - 1;\n  let minNotIndex = sorted.length - 1;\n  let maxNotIndex = 0;\n  for (let i = 0; i < sorted.length; i++) {\n    const item = sorted[i];\n    if (item.fixed === \"left\") {\n      leftIndex = i;\n    } else if (item.fixed === \"right\") {\n      rightIndex = rightIndex > i ? i : rightIndex;\n    } else {\n      minNotIndex = minNotIndex > i ? i : minNotIndex;\n      maxNotIndex = maxNotIndex < i ? i : maxNotIndex;\n    }\n  }\n\n  if (minNotIndex < leftIndex || maxNotIndex > rightIndex) {\n    //ui.message.error(\"非fixed字段不得越过fixed字段的顺序\");\n    return false;\n  }\n}\nfunction buildUpdateKey(key) {\n  return \"update:\" + key;\n}\n\nfunction findFromTree(tree: any[], key: string) {\n  for (const item of tree) {\n    if (item.key === key) {\n      return item;\n    }\n    if (item.children) {\n      const result = findFromTree(item.children, key);\n      if (result) {\n        return result;\n      }\n    }\n  }\n  return null;\n}\nfunction updateChecked(element: any) {\n  element.show = !element.show;\n  //级联选中和取消\n\n  function updateChildren(element: any) {\n    if (element.children) {\n      element.children.forEach((e: any) => {\n        if (!e.__show || e.__disabled) {\n          return;\n        }\n        e.show = element.show;\n        updateChildren(e);\n      });\n    }\n  }\n  updateChildren(element);\n\n  function updateParent(element) {\n    if (element.__parent) {\n      const parent = element.__parent;\n      if (parent) {\n        parent.show = parent.children.filter((e: any) => e.__show && e.show === true).length > 0;\n        updateParent(parent);\n      }\n    }\n  }\n  updateParent(element);\n}\nfunction onCheckChanged() {\n  emits(\"check-changed\");\n}\nfunction fixedChange(index: number, value: any) {\n  emits(\"fixed-changed\", index, value);\n}\n</script>\n", "<template>\n  <component\n    :is=\"ui.drawer.name\"\n    class=\"fs-columns-filter-layout-default\"\n    :title=\"text.title\"\n    v-bind=\"drawerBind\"\n    append-to-body\n  >\n    <component\n      :is=\"ui.drawer.hasContentWrap || 'div'\"\n      class=\"fs-drawer-wrapper fs-table-columns-filter\"\n      :title=\"text.title\"\n    >\n      <component :is=\"ui.card.name\" shadow=\"never\">\n        <div class=\"component--list\">\n          <div key=\"__first__\" class=\"component--list-item\" flex=\"main:justify cross:center\">\n            <span :span=\"12\">\n              <!-- 全选 反选 -->\n              <component :is=\"ui.checkbox.name\" :indeterminate=\"isIndeterminate\" v-bind=\"checkAllBind\">\n                {{ showLength }} / {{ allLength }}\n              </component>\n            </span>\n            <span class=\"title\">{{ text.fixed }} / {{ text.order }}</span>\n          </div>\n\n          <fs-columns-filter-nest-list\n            :columns=\"currentColumns\"\n            :is-root=\"true\"\n            @check-changed=\"allCheckedUpdate\"\n            @fixed-changed=\"fixedChange\"\n          ></fs-columns-filter-nest-list>\n        </div>\n      </component>\n      <slot name=\"buttons\"></slot>\n    </component>\n  </component>\n</template>\n\n<script lang=\"ts\" setup>\nimport _ from \"lodash-es\";\n//不要删\n//@ts-ignore\nimport draggable from \"vuedraggable-es\";\nimport { useUi } from \"../../../use\";\nimport { computed, inject, ref, watch } from \"vue\";\nimport { ColumnsFilterProvideKey, ColumnsFilterContext, ColumnsFilterContainerProps } from \"../../../d/\";\nimport FsColumnsFilterNestList from \"./fs-columns-filter-nest-list.vue\";\n\nconst { ui } = useUi();\n\nconst { originalColumns, currentColumns, text, active } = inject<ColumnsFilterContext>(ColumnsFilterProvideKey);\nconst props = defineProps<ColumnsFilterContainerProps>();\nconst drawerBind = computed(() => {\n  return _.merge(\n    {\n      [ui.drawer.visible]: active.value,\n      [\"onUpdate:\" + ui.drawer.visible]: (e: any) => {\n        active.value = e;\n      },\n      [ui.drawer.width]: props.width || \"400px\"\n    },\n    props.drawer\n  );\n});\n\nconst checkAll = ref(false);\n// 全选和反选发生变化时触发\nfunction onCheckAllChange(value: any) {\n  checkAll.value = value;\n  currentColumns.value = currentColumns.value.map((e: any) => {\n    if (!e.__show || e.__disabled) {\n      return e;\n    }\n    e.show = value;\n    return e;\n  });\n}\n\nconst checkAllBind = computed(() => {\n  return {\n    [ui.checkbox.modelValue]: checkAll.value,\n    [\"onUpdate:\" + ui.checkbox.modelValue]: (v: any) => {\n      onCheckAllChange(v);\n    }\n  };\n});\n\nconst showLength = computed(() => {\n  return currentColumns.value.filter((e: any) => e.__show && e.show === true).length;\n});\nconst allLength = computed(() => {\n  return currentColumns.value.filter((e: any) => e.__show).length;\n});\nconst isIndeterminate = computed(() => {\n  return showLength.value > 0 && showLength.value < allLength.value;\n});\n\nwatch(\n  () => {\n    currentColumns.value;\n  },\n  () => {\n    allCheckedUpdate();\n  },\n  { immediate: true }\n);\n\n// fixed 变化时触发\nfunction fixedChange(index: number, value: any) {\n  if (value) {\n    currentColumns.value[index].show = true;\n  }\n  if (value === \"left\") {\n    currentColumns.value.unshift(currentColumns.value.splice(index, 1)[0]);\n  }\n  if (value === \"right\") {\n    currentColumns.value.push(currentColumns.value.splice(index, 1)[0]);\n  }\n  allCheckedUpdate();\n}\nfunction allCheckedUpdate() {\n  checkAll.value = showLength.value === allLength.value;\n}\n</script>\n\n<style lang=\"less\"></style>\n", "<template>\n  <div class=\"fs-search-col fs-search-btns\">\n    <component :is=\"ui.formItem.name\">\n      <template v-for=\"(item, index) in buttons\" :key=\"index\">\n        <fs-button v-if=\"item.show\" v-bind=\"item\" @click=\"item._click()\" />\n      </template>\n    </component>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\nexport default defineComponent({\n  name: \"FsSearchButtons\",\n  inheritAttrs: false,\n  props: {\n    buttons: {\n      type: Object\n    }\n  },\n  setup() {\n    const { ui } = useUi();\n    return { ui };\n  }\n});\n</script>\n", "<template>\n  <div class=\"fs-search-col fs-search-btns\">\n    <component :is=\"ui.formItem.name\">\n      <template v-for=\"(item, index) in buttons\" :key=\"index\">\n        <fs-button v-if=\"item.show\" v-bind=\"item\" @click=\"item._click()\" />\n      </template>\n    </component>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\nexport default defineComponent({\n  name: \"FsSearchButtons\",\n  inheritAttrs: false,\n  props: {\n    buttons: {\n      type: Object\n    }\n  },\n  setup() {\n    const { ui } = useUi();\n    return { ui };\n  }\n});\n</script>\n", "<template>\n  <div class=\"fs-search fs-search-v2\">\n    <component :is=\"ui.collapseTransition.name\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"formData\"\n        onsubmit=\"event.preventDefault();\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <component\n          :is=\"container?.is || 'fs-search-layout-default'\"\n          v-if=\"show !== false\"\n          v-bind=\"container\"\n          :columns=\"computedColumns\"\n          :get-context-fn=\"getContextFn\"\n        >\n          <template #search-buttons>\n            <div class=\"fs-search-buttons\">\n              <template v-for=\"(item, index) in computedButtons\" :key=\"index\">\n                <fs-button v-if=\"item.show !== false\" v-bind=\"item\" @click=\"item._click()\" />\n              </template>\n            </div>\n          </template>\n\n          <template v-if=\"slots['search-left']\" #search-left>\n            <fs-slot-render :slots=\"slots['search-left']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-middle']\" #search-middle>\n            <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-right']\" #search-right>\n            <fs-slot-render :slots=\"slots['search-right']\" :scope=\"getContextFn()\" />\n          </template>\n        </component>\n      </component>\n    </component>\n  </div>\n</template>\n\n<script lang=\"tsx\">\nimport { computed, defineComponent, nextTick, reactive, ref, Ref, unref, watch } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport {\n  ButtonsProps,\n  SearchEventContext,\n  SearchItemProps,\n  TypeMap,\n  ValueChangeContext,\n  ValueChangeHandle\n} from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearch\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 布局容器\n     */\n    container: {\n      type: Object\n    },\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 校验后的查询表单数据\n     */\n    validatedForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * `{search:{...FsButton},reset:{...FsButton}}`\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n\n    /**\n     * 是否任意值变化就触发校验\n     */\n    validateOnChange: {\n      default: true,\n      type: Boolean\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 统一字段的formItem属性\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 查询事件，此事件供系统调用\n     */\n    \"_search\",\n    /**\n     * 重置事件，供用户使用\n     **/\n    \"reset\",\n    /**\n     * 重置事件，此事件供系统调用\n     */\n    \"_reset\",\n    /**\n     * 校验失败事件\n     */\n    \"validate-error\",\n    /**\n     * 校验后的表单数据变化\n     */\n    \"update:validatedForm\"\n  ],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const { doComputed, AsyncComputeValue, ComputeValue } = useCompute();\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"search.value配置不支持ComputeValue/AsyncCompute类型的动态计算\");\n      }\n    });\n\n    function createInitialForm(): any {\n      //默认值\n      const form: any = {};\n\n      _.forEach(props.columns, (column, key) => {\n        if (column.value === undefined) {\n          return;\n        }\n        const defValue = unref(column.value);\n        if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n          //默认值\n          form[key] = defValue;\n        }\n      });\n\n      return _.cloneDeep(merge({}, props.initialForm, form));\n    }\n\n    const formData = reactive(createInitialForm());\n\n    let autoSearch: any = null;\n\n    const computedColumns: Ref<TypeMap<SearchItemProps>> = doComputed(\n      () => {\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (columns: any) => {\n        const formItem = _.cloneDeep(props.formItem || {});\n        _.forEach(columns, (item) => {\n          merge(item, formItem, item);\n        });\n        // columns = merge(formItem, columns);\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(columns, (item) => {\n            delete item.rules;\n            delete item.rule;\n          });\n        }\n        // 合并col\n        if (props.col) {\n          _.forEach(columns, (v) => {\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //cellRender\n        _.forEach(columns, (item) => {\n          item._cellRender = () => {\n            return cellRender(item);\n          };\n        });\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(columns, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    function onFormValidated() {\n      const validatedForm = _.cloneDeep(formData);\n      ctx.emit(\"update:validatedForm\", validatedForm);\n    }\n\n    watch(\n      () => {\n        return props.validatedForm;\n      },\n      (value: any) => {\n        for (const key in formData) {\n          delete formData[key];\n        }\n        merge(formData, value || {});\n      },\n      {\n        deep: true\n      }\n    );\n\n    const get = (form: any, key: any) => {\n      return _.get(form, key);\n    };\n\n    function splitKey(key: string) {\n      if (key == null) {\n        return;\n      }\n      if (key.indexOf(\".\") >= 0) {\n        return key.split(\".\");\n      }\n      return key;\n    }\n\n    // const debounceValidate = _.debounce(async () => {\n    //   if (await doValidate()) {\n    //     onFormValidated();\n    //   }\n    // }, 500);\n\n    function cellRender(item: any) {\n      const key = item.key;\n\n      async function _onUpdateModelValue($event: any) {\n        // await debounceValidate();\n        onValueChanged($event, item);\n      }\n\n      function _onInput() {\n        onInput(item);\n      }\n\n      function onKeyup(item: any, key: any) {\n        if (key.code === \"Enter\") {\n          if (item.autoSearchTrigger === \"enter\") {\n            doSearch();\n          }\n        }\n      }\n\n      let defaultSlot: any = null;\n      if (props.slots[\"search_\" + key]) {\n        defaultSlot = <fs-slot-render slots={props.slots[\"search_\" + key]} scope={buildFieldContext(key)} />;\n      } else if (item.render) {\n        defaultSlot = <fs-render render-func={item.render} scope={buildFieldContext(key)} />;\n      } else if (item.component && item.component.show !== false) {\n        defaultSlot = (\n          <fs-component-render\n            ref={(value: any) => {\n              componentRenderRefs.value[key] = value;\n            }}\n            model-value={get(formData, key)}\n            onKeyup={($event: any) => {\n              onKeyup(item, $event);\n            }}\n            {...item.component}\n            scope={buildFieldContext(key)}\n            onUpdate:modelValue={_onUpdateModelValue}\n            onInput={_onInput}\n          />\n        );\n      }\n\n      const splitedKey = splitKey(key);\n\n      return ui.formItem.render({\n        props: {\n          ...item,\n          label: item.title,\n          [ui.formItem.prop]: splitedKey,\n          path: key,\n          rulePath: key\n        },\n        slots: {\n          default() {\n            return defaultSlot;\n          }\n        }\n      });\n    }\n\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.getTargetRef();\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form: formData, validatedForm: props.validatedForm, getComponentRef, doSearch, doReset, doValidate };\n    }\n\n    function buildFieldContext(key: string) {\n      return { ...getContextFn(), key, value: _.get(formData, key) };\n    }\n\n    async function doValidate(silent: boolean = false, trigger: string = \"search\"): Promise<boolean> {\n      try {\n        if (props.validate) {\n          await ui.form.validateWrap(searchFormRef.value);\n        }\n        return true;\n      } catch (e: any) {\n        if (!silent) {\n          ctx.emit(\"validate-error\", { ...getContextFn(), error: e, trigger });\n        }\n\n        return false;\n      }\n    }\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        ctx.emit(\"_search\", getContextFn());\n        ctx.emit(\"search\", getContextFn());\n      }\n    }\n\n    async function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(formData);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(formData, entry[0]);\n        } else {\n          _.set(formData, entry[0], initialValue);\n        }\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        if (props.reset) {\n          props.reset(getContextFn());\n        }\n        // 表单重置事件\n        ctx.emit(\"_reset\", getContextFn());\n        ctx.emit(\"reset\", getContextFn());\n        if (props.searchAfterReset) {\n          doSearch();\n        }\n      }\n    }\n\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      if (props.debounce !== false) {\n        let wait = props.debounce?.wait || 500;\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return formData;\n    }\n\n    function getValidatedForm() {\n      return props.validatedForm;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(formData), (item) => {\n          delete formData[item];\n        });\n      }\n      doMerge(formData, newForm);\n      onFormValidated();\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    async function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(formData, key, value);\n\n      const silent = props.validateOnChangeSilent;\n      // if (props.validateOnChange && (await doValidate(silent, \"change\"))) {\n      //   onFormValidated();\n      // }\n\n      if (item.valueChange) {\n        const key = item.key;\n        const value = formData[key];\n        const componentRef = getComponentRef(key);\n        const valueChange: ValueChangeHandle =\n          item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        const scope = getContextFn();\n        const valueChangeContext: ValueChangeContext = {\n          index: 0,\n          row: scope.form,\n          form: scope.form,\n          ...scope,\n          key,\n          value,\n          componentRef,\n          immediate: false,\n          getComponentRef,\n          mode: \"search\"\n        };\n        valueChange(valueChangeContext);\n      }\n      // TODO 由于validatedForm 发射出去后，会更新formData的数据，所以要放在valueChange后面,不然会死循环\n      if (props.validateOnChange && (await doValidate(silent, \"change\"))) {\n        onFormValidated();\n      }\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      if (!props.validate) {\n        return [];\n      }\n      return props.options.rules;\n    });\n\n    onFormValidated();\n    return {\n      get,\n      ui,\n      onValueChanged,\n      doValidate,\n      doSearch,\n      doReset,\n      formData,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      getValidatedForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      buildFieldContext,\n      getContextFn\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  &.fs-search-v2 {\n    //display: flex;\n    //flex-wrap: nowrap;\n    .fs-search-buttons {\n      display: flex;\n    }\n    .search-left {\n    }\n\n    .search-right {\n      flex: 1;\n    }\n\n    .ant-form-inline {\n      flex-wrap: wrap;\n    }\n\n    .fs-search-form {\n      display: flex;\n      align-items: center;\n      flex-wrap: wrap;\n\n      .ant-picker,\n      .ant-select,\n      .n-date-picker,\n      .el-select,\n      .el-date-editor {\n        width: 100%;\n      }\n\n      .el-range-editor.el-input__wrapper {\n        padding: 0;\n      }\n\n      .ant-btn-loading-icon {\n        display: flex;\n        margin-left: 2px;\n        margin-right: 2px;\n      }\n\n      &.el-form--label-top {\n        .el-form-item {\n          display: block;\n        }\n      }\n\n      .el-form-item {\n        margin-bottom: 4px;\n        margin-top: 4px;\n        display: flex;\n        align-items: center;\n      }\n\n      &.el-form--inline {\n        .el-input {\n          width: 100%;\n        }\n      }\n\n      .el-form-item__content {\n        display: flex;\n        align-items: center;\n      }\n    }\n\n    .fs-search-col {\n      position: relative;\n      // antdv\n      .ant-form-item-explain,\n      .el-form-item__error {\n        float: left;\n        position: absolute;\n        bottom: 3px;\n        right: 8px;\n        pointer-events: none;\n        top: auto;\n        left: auto;\n        visibility: hidden;\n      }\n\n      .el-form-item__error {\n        bottom: 10px;\n      }\n\n      &:hover {\n        .ant-form-item-explain,\n        .el-form-item__error {\n          visibility: visible;\n        }\n      }\n    }\n  }\n\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-search fs-search-v2\">\n    <component :is=\"ui.collapseTransition.name\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"formData\"\n        onsubmit=\"event.preventDefault();\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <component\n          :is=\"container?.is || 'fs-search-layout-default'\"\n          v-if=\"show !== false\"\n          v-bind=\"container\"\n          :columns=\"computedColumns\"\n          :get-context-fn=\"getContextFn\"\n        >\n          <template #search-buttons>\n            <div class=\"fs-search-buttons\">\n              <template v-for=\"(item, index) in computedButtons\" :key=\"index\">\n                <fs-button v-if=\"item.show !== false\" v-bind=\"item\" @click=\"item._click()\" />\n              </template>\n            </div>\n          </template>\n\n          <template v-if=\"slots['search-left']\" #search-left>\n            <fs-slot-render :slots=\"slots['search-left']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-middle']\" #search-middle>\n            <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"getContextFn()\" />\n          </template>\n          <template v-if=\"slots['search-right']\" #search-right>\n            <fs-slot-render :slots=\"slots['search-right']\" :scope=\"getContextFn()\" />\n          </template>\n        </component>\n      </component>\n    </component>\n  </div>\n</template>\n\n<script lang=\"tsx\">\nimport { computed, defineComponent, nextTick, reactive, ref, Ref, unref, watch } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport {\n  ButtonsProps,\n  SearchEventContext,\n  SearchItemProps,\n  TypeMap,\n  ValueChangeContext,\n  ValueChangeHandle\n} from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearch\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 布局容器\n     */\n    container: {\n      type: Object\n    },\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 校验后的查询表单数据\n     */\n    validatedForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * `{search:{...FsButton},reset:{...FsButton}}`\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n\n    /**\n     * 是否任意值变化就触发校验\n     */\n    validateOnChange: {\n      default: true,\n      type: Boolean\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 统一字段的formItem属性\n     */\n    formItem: {\n      type: Object,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 查询事件，此事件供系统调用\n     */\n    \"_search\",\n    /**\n     * 重置事件，供用户使用\n     **/\n    \"reset\",\n    /**\n     * 重置事件，此事件供系统调用\n     */\n    \"_reset\",\n    /**\n     * 校验失败事件\n     */\n    \"validate-error\",\n    /**\n     * 校验后的表单数据变化\n     */\n    \"update:validatedForm\"\n  ],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const { doComputed, AsyncComputeValue, ComputeValue } = useCompute();\n    // eslint-disable-next-line vue/no-setup-props-destructure\n    _.each(props.columns, (item) => {\n      if (item.value != null && (item.value instanceof AsyncComputeValue || item.value instanceof ComputeValue)) {\n        logger.warn(\"search.value配置不支持ComputeValue/AsyncCompute类型的动态计算\");\n      }\n    });\n\n    function createInitialForm(): any {\n      //默认值\n      const form: any = {};\n\n      _.forEach(props.columns, (column, key) => {\n        if (column.value === undefined) {\n          return;\n        }\n        const defValue = unref(column.value);\n        if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n          //默认值\n          form[key] = defValue;\n        }\n      });\n\n      return _.cloneDeep(merge({}, props.initialForm, form));\n    }\n\n    const formData = reactive(createInitialForm());\n\n    let autoSearch: any = null;\n\n    const computedColumns: Ref<TypeMap<SearchItemProps>> = doComputed(\n      () => {\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (columns: any) => {\n        const formItem = _.cloneDeep(props.formItem || {});\n        _.forEach(columns, (item) => {\n          merge(item, formItem, item);\n        });\n        // columns = merge(formItem, columns);\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(columns, (item) => {\n            delete item.rules;\n            delete item.rule;\n          });\n        }\n        // 合并col\n        if (props.col) {\n          _.forEach(columns, (v) => {\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //cellRender\n        _.forEach(columns, (item) => {\n          item._cellRender = () => {\n            return cellRender(item);\n          };\n        });\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(columns, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    function onFormValidated() {\n      const validatedForm = _.cloneDeep(formData);\n      ctx.emit(\"update:validatedForm\", validatedForm);\n    }\n\n    watch(\n      () => {\n        return props.validatedForm;\n      },\n      (value: any) => {\n        for (const key in formData) {\n          delete formData[key];\n        }\n        merge(formData, value || {});\n      },\n      {\n        deep: true\n      }\n    );\n\n    const get = (form: any, key: any) => {\n      return _.get(form, key);\n    };\n\n    function splitKey(key: string) {\n      if (key == null) {\n        return;\n      }\n      if (key.indexOf(\".\") >= 0) {\n        return key.split(\".\");\n      }\n      return key;\n    }\n\n    // const debounceValidate = _.debounce(async () => {\n    //   if (await doValidate()) {\n    //     onFormValidated();\n    //   }\n    // }, 500);\n\n    function cellRender(item: any) {\n      const key = item.key;\n\n      async function _onUpdateModelValue($event: any) {\n        // await debounceValidate();\n        onValueChanged($event, item);\n      }\n\n      function _onInput() {\n        onInput(item);\n      }\n\n      function onKeyup(item: any, key: any) {\n        if (key.code === \"Enter\") {\n          if (item.autoSearchTrigger === \"enter\") {\n            doSearch();\n          }\n        }\n      }\n\n      let defaultSlot: any = null;\n      if (props.slots[\"search_\" + key]) {\n        defaultSlot = <fs-slot-render slots={props.slots[\"search_\" + key]} scope={buildFieldContext(key)} />;\n      } else if (item.render) {\n        defaultSlot = <fs-render render-func={item.render} scope={buildFieldContext(key)} />;\n      } else if (item.component && item.component.show !== false) {\n        defaultSlot = (\n          <fs-component-render\n            ref={(value: any) => {\n              componentRenderRefs.value[key] = value;\n            }}\n            model-value={get(formData, key)}\n            onKeyup={($event: any) => {\n              onKeyup(item, $event);\n            }}\n            {...item.component}\n            scope={buildFieldContext(key)}\n            onUpdate:modelValue={_onUpdateModelValue}\n            onInput={_onInput}\n          />\n        );\n      }\n\n      const splitedKey = splitKey(key);\n\n      return ui.formItem.render({\n        props: {\n          ...item,\n          label: item.title,\n          [ui.formItem.prop]: splitedKey,\n          path: key,\n          rulePath: key\n        },\n        slots: {\n          default() {\n            return defaultSlot;\n          }\n        }\n      });\n    }\n\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.getTargetRef();\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form: formData, validatedForm: props.validatedForm, getComponentRef, doSearch, doReset, doValidate };\n    }\n\n    function buildFieldContext(key: string) {\n      return { ...getContextFn(), key, value: _.get(formData, key) };\n    }\n\n    async function doValidate(silent: boolean = false, trigger: string = \"search\"): Promise<boolean> {\n      try {\n        if (props.validate) {\n          await ui.form.validateWrap(searchFormRef.value);\n        }\n        return true;\n      } catch (e: any) {\n        if (!silent) {\n          ctx.emit(\"validate-error\", { ...getContextFn(), error: e, trigger });\n        }\n\n        return false;\n      }\n    }\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        ctx.emit(\"_search\", getContextFn());\n        ctx.emit(\"search\", getContextFn());\n      }\n    }\n\n    async function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(formData);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(formData, entry[0]);\n        } else {\n          _.set(formData, entry[0], initialValue);\n        }\n      }\n\n      if (await doValidate()) {\n        onFormValidated();\n        await nextTick();\n        if (props.reset) {\n          props.reset(getContextFn());\n        }\n        // 表单重置事件\n        ctx.emit(\"_reset\", getContextFn());\n        ctx.emit(\"reset\", getContextFn());\n        if (props.searchAfterReset) {\n          doSearch();\n        }\n      }\n    }\n\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          // eslint-disable-next-line @typescript-eslint/no-unused-vars\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      if (props.debounce !== false) {\n        let wait = props.debounce?.wait || 500;\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return formData;\n    }\n\n    function getValidatedForm() {\n      return props.validatedForm;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(formData), (item) => {\n          delete formData[item];\n        });\n      }\n      doMerge(formData, newForm);\n      onFormValidated();\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    async function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(formData, key, value);\n\n      const silent = props.validateOnChangeSilent;\n      // if (props.validateOnChange && (await doValidate(silent, \"change\"))) {\n      //   onFormValidated();\n      // }\n\n      if (item.valueChange) {\n        const key = item.key;\n        const value = formData[key];\n        const componentRef = getComponentRef(key);\n        const valueChange: ValueChangeHandle =\n          item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        const scope = getContextFn();\n        const valueChangeContext: ValueChangeContext = {\n          index: 0,\n          row: scope.form,\n          form: scope.form,\n          ...scope,\n          key,\n          value,\n          componentRef,\n          immediate: false,\n          getComponentRef,\n          mode: \"search\"\n        };\n        valueChange(valueChangeContext);\n      }\n      // TODO 由于validatedForm 发射出去后，会更新formData的数据，所以要放在valueChange后面,不然会死循环\n      if (props.validateOnChange && (await doValidate(silent, \"change\"))) {\n        onFormValidated();\n      }\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      if (!props.validate) {\n        return [];\n      }\n      return props.options.rules;\n    });\n\n    onFormValidated();\n    return {\n      get,\n      ui,\n      onValueChanged,\n      doValidate,\n      doSearch,\n      doReset,\n      formData,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      getValidatedForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      buildFieldContext,\n      getContextFn\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  &.fs-search-v2 {\n    //display: flex;\n    //flex-wrap: nowrap;\n    .fs-search-buttons {\n      display: flex;\n    }\n    .search-left {\n    }\n\n    .search-right {\n      flex: 1;\n    }\n\n    .ant-form-inline {\n      flex-wrap: wrap;\n    }\n\n    .fs-search-form {\n      display: flex;\n      align-items: center;\n      flex-wrap: wrap;\n\n      .ant-picker,\n      .ant-select,\n      .n-date-picker,\n      .el-select,\n      .el-date-editor {\n        width: 100%;\n      }\n\n      .el-range-editor.el-input__wrapper {\n        padding: 0;\n      }\n\n      .ant-btn-loading-icon {\n        display: flex;\n        margin-left: 2px;\n        margin-right: 2px;\n      }\n\n      &.el-form--label-top {\n        .el-form-item {\n          display: block;\n        }\n      }\n\n      .el-form-item {\n        margin-bottom: 4px;\n        margin-top: 4px;\n        display: flex;\n        align-items: center;\n      }\n\n      &.el-form--inline {\n        .el-input {\n          width: 100%;\n        }\n      }\n\n      .el-form-item__content {\n        display: flex;\n        align-items: center;\n      }\n    }\n\n    .fs-search-col {\n      position: relative;\n      // antdv\n      .ant-form-item-explain,\n      .el-form-item__error {\n        float: left;\n        position: absolute;\n        bottom: 3px;\n        right: 8px;\n        pointer-events: none;\n        top: auto;\n        left: auto;\n        visibility: hidden;\n      }\n\n      .el-form-item__error {\n        bottom: 10px;\n      }\n\n      &:hover {\n        .ant-form-item-explain,\n        .el-form-item__error {\n          visibility: visible;\n        }\n      }\n    }\n  }\n\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.collapseTransition.name\">\n    <div v-if=\"show !== false\" class=\"fs-search\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"form\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <div class=\"fs-search-box\">\n          <div class=\"fs-search-main\">\n            <div\n              class=\"fs-search-columns\"\n              :class=\"{ 'fs-search-collapse': collapse }\"\n              :style=\"{ height: computedColumnBoxHeight }\"\n            >\n              <component :is=\"ui.row.name\" ref=\"columnsRowRef\">\n                <div v-if=\"slots['search-left']\" class=\"fs-search-col\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-left']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <template v-for=\"(item, key) in computedColumns\" :key=\"key\">\n                  <component :is=\"computedColName\" v-if=\"item.show === true\" class=\"fs-search-col\" v-bind=\"item.col\">\n                    <component :is=\"ui.formItem.name\" v-bind=\"item\" :[ui.formItem.prop]=\"key\" :label=\"item.title\">\n                      <template v-if=\"slots['search_' + key]\">\n                        <fs-slot-render :slots=\"slots['search_' + key]\" :scope=\"{ ...searchEventContextRef, key }\" />\n                      </template>\n                      <template v-else>\n                        <fs-component-render\n                          v-if=\"item.component && item.component.show !== false\"\n                          :ref=\"\n                            (el: any) => {\n                              if (el) {\n                                componentRenderRefs[item.key] = el;\n                              }\n                            }\n                          \"\n                          :model-value=\"get(form, key)\"\n                          v-bind=\"item.component\"\n                          :scope=\"searchEventContextRef\"\n                          @update:model-value=\"onValueChanged($event, item)\"\n                          @input=\"onInput(item)\"\n                        />\n                      </template>\n                    </component>\n                  </component>\n                </template>\n\n                <div v-if=\"slots['search-middle']\" class=\"fs-search-col fs-search-middle\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <fs-search-buttons v-if=\"!computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n                <div v-if=\"slots['search-right']\" class=\"fs-search-col fs-search-right\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-right']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n              </component>\n            </div>\n            <fs-search-buttons v-if=\"computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n          </div>\n\n          <div v-if=\"computedIsMultiLine\" class=\"fs-search-action\">\n            <component :is=\"ui.formItem.name\">\n              <fs-button :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\" @click=\"toggleCollapse\" />\n            </component>\n          </div>\n        </div>\n      </component>\n    </div>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, reactive, ref, Ref, unref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonsProps, SearchEventContext, SearchItemProps } from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearchV1\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * tabs\n     * { show , options,key, default}\n     */\n    tabs: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * {search:{...FsButton},reset:{...FsButton}}\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n    /**\n     * 布局, single-line 单行， multi-line 多行（支持展开收起）\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 是否折叠\n     */\n    collapse: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 重置事件\n     **/\n    \"reset\",\n    \"collapse\",\n    \"update:collapse\"\n  ],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    // 异步setup需要放在第一个await之前\n    // onMounted is called when there is no active component instance to be associated with.\n    //为啥会有这个警告\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n        const columnsList = columnsRowRef.value.$el.children;\n        if (columnsList && columnsList.length > 1) {\n          columnsLineHeightRef.value = columnsList[1].offsetHeight + 2;\n        }\n      }\n    });\n\n    let autoSearch: any = null;\n    function createInitialForm() {\n      //@ts-ignore\n      return _.cloneDeep(props.initialForm || {});\n    }\n    const form = reactive(createInitialForm());\n    const { doComputed, AsyncComputeValue } = useCompute();\n    //@ts-ignore\n    _.each(props.columns, (item) => {\n      if (item.value != null && item.value instanceof AsyncComputeValue) {\n        logger.warn(\"search.value配置不支持AsyncCompute类型的动态计算\");\n      }\n    });\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const computedColumns = doComputed(\n      () => {\n        //@ts-ignore\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (value) => {\n        //@ts-ignore\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(value, (item) => {\n            delete item.rules;\n          });\n        }\n        // 合并col\n        //@ts-ignore\n        if (props.col) {\n          _.forEach(value, (v) => {\n            //@ts-ignore\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(value, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    //默认值\n    _.forEach(computedColumns.value, (column, key) => {\n      if (column.value === undefined) {\n        return;\n      }\n      const defValue = unref(column.value);\n      if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n        //默认值\n        form[key] = defValue;\n      }\n    });\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.$refs?.targetRef;\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form, validatedForm: form, getComponentRef, doValidate: null };\n    }\n\n    const searchEventContextRef: Ref<SearchEventContext> = ref(getContextFn());\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      const valid = await ui.form.validateWrap(searchFormRef.value);\n      if (valid) {\n        ctx.emit(\"search\", searchEventContextRef.value);\n      } else {\n        ui.message.error({\n          message: t(\"fs.search.error.message\")\n        });\n        return false;\n      }\n    }\n\n    function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n      //@ts-ignore\n      if (props.reset) {\n        //@ts-ignore\n        props.reset(searchEventContextRef.value);\n      }\n      // 表单重置事件\n      ctx.emit(\"reset\", getContextFn());\n      //@ts-ignore\n      if (props.searchAfterReset) {\n        nextTick(() => {\n          doSearch();\n        });\n      }\n    }\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      //@ts-ignore\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      //@ts-ignore\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      //@ts-ignore\n      if (props.debounce !== false) {\n        //@ts-ignore\n        let wait = props.debounce?.wait || 500;\n        //@ts-ignore\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return form;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(form), (item) => {\n          delete form[item];\n        });\n      }\n      doMerge(form, newForm);\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(form, key, value);\n      if (item.valueChange) {\n        const key = item.key;\n        const value = form[key];\n        const componentRef = getComponentRef(key);\n        const valueChange = item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        //@ts-ignore\n        valueChange({ key, value, componentRef, ...getContextFn(), immidiate: false });\n      }\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      //@ts-ignore\n      if (!props.validate) {\n        return [];\n      }\n      //@ts-ignore\n      return props.options.rules;\n    });\n\n    //-----多行模式折叠\n\n    const columnsRowRef = ref();\n    const columnsBoxHeightRef = ref(0);\n    const columnsLineHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      //@ts-ignore\n      ctx.emit(\"update:collapse\", !props.collapse);\n      //@ts-ignore\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    const computedColName = computed(() => {\n      //@ts-ignore\n      if (props.layout === \"multi-line\") {\n        return ui.col.name;\n      }\n      return \"div\";\n    });\n    const computedIsMultiLine = computed(() => {\n      //@ts-ignore\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value) {\n        return \"auto\";\n      }\n      //@ts-ignore\n      if (props.collapse) {\n        return columnsLineHeightRef.value ? columnsLineHeightRef.value + \"px\" : \"\";\n      } else {\n        return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n      }\n    });\n\n    return {\n      get: (form: any, key: any) => {\n        return _.get(form, key);\n      },\n      ui,\n      onValueChanged,\n      doSearch,\n      doReset,\n      form,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedColName,\n      computedIsMultiLine,\n      toggleCollapse,\n      searchEventContextRef\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  //display: flex;\n  //flex-wrap: nowrap;\n  .search-left {\n  }\n  .search-right {\n    flex: 1;\n  }\n  .ant-form-inline {\n    flex-wrap: wrap;\n  }\n  .fs-search-form {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    //& > * {\n    //  margin-bottom: 4px;\n    //  margin-top: 4px;\n    //  margin-right: 10px;\n    //}\n\n    .fs-search-box {\n      display: flex;\n      .fs-search-main {\n        display: flex;\n        flex-direction: row;\n      }\n    }\n    .fs-search-col {\n      & > * {\n        margin: 0px 5px;\n      }\n      margin: 1px 0;\n      &:first-child {\n        // margin-left: 0;\n      }\n    }\n\n    .el-form-item {\n      margin-bottom: 4px;\n      margin-top: 4px;\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form--inline {\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form-item__content {\n      display: flex;\n      align-items: center;\n    }\n  }\n\n  .fs-search-btns {\n    .fs-button {\n      margin-right: 5px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        .fs-search-columns {\n          height: auto;\n          overflow-y: hidden;\n          // transition: all 0.3s linear;\n          // will-change: height;\n        }\n        .fs-search-btns {\n          width: 100%;\n          text-align: center;\n          margin-top: 4px;\n          .el-form-item__content {\n            justify-content: center;\n          }\n\n          .n-form-item-blank {\n            display: flex;\n            justify-content: center;\n          }\n        }\n      }\n    }\n    .fs-search-action {\n      .ant-form-item {\n        margin-right: 2px;\n      }\n    }\n  }\n}\n\n.fs-search {\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.collapseTransition.name\">\n    <div v-if=\"show !== false\" class=\"fs-search\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n      <component\n        :is=\"ui.form.name\"\n        ref=\"searchFormRef\"\n        :model=\"form\"\n        v-bind=\"options\"\n        :rules=\"computedRules\"\n        class=\"fs-search-form\"\n        @compositionstart=\"changeInputEventDisabled(true)\"\n        @compositionend=\"changeInputEventDisabled(false)\"\n      >\n        <div class=\"fs-search-box\">\n          <div class=\"fs-search-main\">\n            <div\n              class=\"fs-search-columns\"\n              :class=\"{ 'fs-search-collapse': collapse }\"\n              :style=\"{ height: computedColumnBoxHeight }\"\n            >\n              <component :is=\"ui.row.name\" ref=\"columnsRowRef\">\n                <div v-if=\"slots['search-left']\" class=\"fs-search-col\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-left']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <template v-for=\"(item, key) in computedColumns\" :key=\"key\">\n                  <component :is=\"computedColName\" v-if=\"item.show === true\" class=\"fs-search-col\" v-bind=\"item.col\">\n                    <component :is=\"ui.formItem.name\" v-bind=\"item\" :[ui.formItem.prop]=\"key\" :label=\"item.title\">\n                      <template v-if=\"slots['search_' + key]\">\n                        <fs-slot-render :slots=\"slots['search_' + key]\" :scope=\"{ ...searchEventContextRef, key }\" />\n                      </template>\n                      <template v-else>\n                        <fs-component-render\n                          v-if=\"item.component && item.component.show !== false\"\n                          :ref=\"\n                            (el: any) => {\n                              if (el) {\n                                componentRenderRefs[item.key] = el;\n                              }\n                            }\n                          \"\n                          :model-value=\"get(form, key)\"\n                          v-bind=\"item.component\"\n                          :scope=\"searchEventContextRef\"\n                          @update:model-value=\"onValueChanged($event, item)\"\n                          @input=\"onInput(item)\"\n                        />\n                      </template>\n                    </component>\n                  </component>\n                </template>\n\n                <div v-if=\"slots['search-middle']\" class=\"fs-search-col fs-search-middle\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-middle']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n                <fs-search-buttons v-if=\"!computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n                <div v-if=\"slots['search-right']\" class=\"fs-search-col fs-search-right\">\n                  <component :is=\"ui.formItem.name\">\n                    <fs-slot-render :slots=\"slots['search-right']\" :scope=\"searchEventContextRef\" />\n                  </component>\n                </div>\n              </component>\n            </div>\n            <fs-search-buttons v-if=\"computedIsMultiLine\" :buttons=\"computedButtons\"></fs-search-buttons>\n          </div>\n\n          <div v-if=\"computedIsMultiLine\" class=\"fs-search-action\">\n            <component :is=\"ui.formItem.name\">\n              <fs-button :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\" @click=\"toggleCollapse\" />\n            </component>\n          </div>\n        </div>\n      </component>\n    </div>\n  </component>\n</template>\n\n<script lang=\"ts\">\nimport { computed, defineComponent, nextTick, onMounted, reactive, ref, Ref, unref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useCompute } from \"../../use/use-compute\";\nimport { useI18n } from \"../../locale\";\nimport logger from \"../../utils/util.log\";\nimport FsSearchButtons from \"./buttons.vue\";\nimport { Constants } from \"../../utils/util.constants\";\nimport { ButtonsProps, SearchEventContext, SearchItemProps } from \"../../d\";\nimport { useUi } from \"../../use/use-ui\";\nimport { useMerge } from \"../../use/use-merge\";\n\n/**\n * 查询框组件\n */\nexport default defineComponent({\n  name: \"FsSearchV1\",\n  components: { FsSearchButtons },\n  inheritAttrs: false,\n  props: {\n    /**\n     * 初始查询条件\n     * 点击重置，会重置成该条件\n     */\n    initialForm: {\n      type: Object\n    },\n    /**\n     * 表单参数\n     * 支持el-form | a-form的属性\n     */\n    options: {\n      type: Object\n    },\n    /**\n     * 查询字段配置\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * tabs\n     * { show , options,key, default}\n     */\n    tabs: {\n      type: Object\n    },\n    /**\n     * 按钮配置,可以根据order排序\n     * {search:{...FsButton},reset:{...FsButton}}\n     */\n    buttons: {\n      type: Object\n    },\n    /**\n     * 点击重置后是否立即触发查询\n     */\n    searchAfterReset: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否开启自动查询\n     */\n    autoSearch: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 自动查询，防抖设置\n     * 传false则关闭自动查询\n     */\n    debounce: {\n      type: [Boolean, Object],\n      default: undefined\n    },\n    /**\n     * 插槽\n     */\n    slots: {\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 是否显示查询框\n     */\n    show: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 是否启用校验\n     */\n    validate: {\n      default: false\n    },\n    /**\n     * 布局, single-line 单行， multi-line 多行（支持展开收起）\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 列的宽度设置，span=xx\n     */\n    col: {},\n\n    /**\n     * 是否折叠\n     */\n    collapse: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\n    /**\n     * 查询事件\n     **/\n    \"search\",\n    /**\n     * 重置事件\n     **/\n    \"reset\",\n    \"collapse\",\n    \"update:collapse\"\n  ],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    // 异步setup需要放在第一个await之前\n    // onMounted is called when there is no active component instance to be associated with.\n    //为啥会有这个警告\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n        const columnsList = columnsRowRef.value.$el.children;\n        if (columnsList && columnsList.length > 1) {\n          columnsLineHeightRef.value = columnsList[1].offsetHeight + 2;\n        }\n      }\n    });\n\n    let autoSearch: any = null;\n    function createInitialForm() {\n      //@ts-ignore\n      return _.cloneDeep(props.initialForm || {});\n    }\n    const form = reactive(createInitialForm());\n    const { doComputed, AsyncComputeValue } = useCompute();\n    //@ts-ignore\n    _.each(props.columns, (item) => {\n      if (item.value != null && item.value instanceof AsyncComputeValue) {\n        logger.warn(\"search.value配置不支持AsyncCompute类型的动态计算\");\n      }\n    });\n    const { merge } = useMerge();\n    const doMerge = merge;\n    const computedColumns = doComputed(\n      () => {\n        //@ts-ignore\n        return props.columns;\n      },\n      getContextFn,\n      null,\n      (value) => {\n        //@ts-ignore\n        if (!props.validate) {\n          //如果关闭validate则去掉rules\n          _.forEach(value, (item) => {\n            delete item.rules;\n          });\n        }\n        // 合并col\n        //@ts-ignore\n        if (props.col) {\n          _.forEach(value, (v) => {\n            //@ts-ignore\n            v.col = merge({}, props.col, v.col);\n          });\n        }\n\n        //字段排序\n        let sortArr: SearchItemProps[] = [];\n        _.forEach(value, (v, key) => {\n          v._key = key;\n          sortArr.push(v);\n        });\n        sortArr = _.sortBy(sortArr, (item) => {\n          return item.order ?? Constants.orderDefault;\n        });\n\n        const sortedColumns: {\n          [key: string]: SearchItemProps;\n        } = {};\n\n        sortArr.forEach((item) => {\n          let _key = item._key;\n          delete item._key;\n          sortedColumns[_key] = item;\n        });\n        return sortedColumns;\n      }\n    );\n\n    //默认值\n    _.forEach(computedColumns.value, (column, key) => {\n      if (column.value === undefined) {\n        return;\n      }\n      const defValue = unref(column.value);\n      if (defValue !== undefined && column.show !== false && column.component?.show !== false) {\n        //默认值\n        form[key] = defValue;\n      }\n    });\n    const searchFormRef = ref();\n    const { t } = useI18n();\n    const componentRenderRefs: Ref = ref({});\n    function getComponentRenderRef(key: string) {\n      return componentRenderRefs.value[key];\n    }\n\n    function getComponentRef(key: string): any {\n      return getComponentRenderRef(key)?.$refs?.targetRef;\n    }\n\n    function getContextFn(): SearchEventContext {\n      return { form, validatedForm: form, getComponentRef, doValidate: null };\n    }\n\n    const searchEventContextRef: Ref<SearchEventContext> = ref(getContextFn());\n\n    async function doSearch() {\n      if (autoSearch) {\n        // 防抖查询取消\n        autoSearch.cancel();\n      }\n\n      const valid = await ui.form.validateWrap(searchFormRef.value);\n      if (valid) {\n        ctx.emit(\"search\", searchEventContextRef.value);\n      } else {\n        ui.message.error({\n          message: t(\"fs.search.error.message\")\n        });\n        return false;\n      }\n    }\n\n    function doReset() {\n      // debugger;\n      // ui.form.resetWrap(searchFormRef.value, { form, initialForm: createInitialForm() });\n      const initialForm = createInitialForm();\n      const entries = _.entries(form);\n      for (const entry of entries) {\n        const initialValue = _.get(initialForm, entry[0]);\n        if (initialValue == null) {\n          _.unset(form, entry[0]);\n        } else {\n          _.set(form, entry[0], initialValue);\n        }\n      }\n      //@ts-ignore\n      if (props.reset) {\n        //@ts-ignore\n        props.reset(searchEventContextRef.value);\n      }\n      // 表单重置事件\n      ctx.emit(\"reset\", getContextFn());\n      //@ts-ignore\n      if (props.searchAfterReset) {\n        nextTick(() => {\n          doSearch();\n        });\n      }\n    }\n    const computedButtons = computed(() => {\n      const btns: any = [];\n      const defBtnOptions: ButtonsProps<SearchEventContext> = {\n        search: {\n          show: true,\n          type: \"primary\",\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doSearch();\n          },\n          order: 1,\n          text: t(\"fs.search.search.text\") // '查询',\n        },\n        reset: {\n          show: true,\n          disabled: false,\n          click: (context: SearchEventContext) => {\n            doReset();\n          },\n          text: t(\"fs.search.reset.text\"), // '重置',\n          order: 2\n        }\n      };\n      //@ts-ignore\n      merge(defBtnOptions, props.buttons);\n      for (let key in defBtnOptions) {\n        const btn = defBtnOptions[key];\n        btn._click = () => {\n          btn.click(getContextFn());\n        };\n        btns.push(btn);\n      }\n\n      btns.sort((a: any, b: any) => {\n        return a.order - b.order;\n      });\n      return btns;\n    });\n\n    function initAutoSearch() {\n      //@ts-ignore\n      if (props.autoSearch === false) {\n        return;\n      }\n      // 构建防抖查询函数\n      //@ts-ignore\n      if (props.debounce !== false) {\n        //@ts-ignore\n        let wait = props.debounce?.wait || 500;\n        //@ts-ignore\n        autoSearch = _.debounce(doSearch, wait, props.debounce);\n      }\n    }\n\n    initAutoSearch();\n\n    function getForm() {\n      return form;\n    }\n\n    /**\n     * 设置form值\n     */\n    function setForm(newForm: any, merge = true) {\n      if (!merge) {\n        _.each(_.keys(form), (item) => {\n          delete form[item];\n        });\n      }\n      doMerge(form, newForm);\n    }\n\n    const inputEventDisabled = ref(false);\n\n    const doAutoSearch = () => {\n      logger.debug(\"do auto search,inputEventDisabled:\", inputEventDisabled.value);\n      if (inputEventDisabled.value !== true && autoSearch) {\n        // 防抖查询\n        autoSearch();\n      }\n    };\n\n    const onInput = (item: any) => {\n      if (item.autoSearchTrigger === \"input\") {\n        doAutoSearch();\n      }\n    };\n    // 输入法监听\n    const changeInputEventDisabled = (disabled: boolean) => {\n      inputEventDisabled.value = disabled;\n      doAutoSearch();\n    };\n\n    function onValueChanged(value: any, item: SearchItemProps) {\n      const key = item.key;\n      _.set(form, key, value);\n      if (item.valueChange) {\n        const key = item.key;\n        const value = form[key];\n        const componentRef = getComponentRef(key);\n        const valueChange = item.valueChange instanceof Function ? item.valueChange : item.valueChange.handle;\n        //@ts-ignore\n        valueChange({ key, value, componentRef, ...getContextFn(), immidiate: false });\n      }\n      if (item.autoSearchTrigger == null || item.autoSearchTrigger === true || item.autoSearchTrigger === \"change\") {\n        doAutoSearch();\n      }\n    }\n\n    const computedRules = computed(() => {\n      //@ts-ignore\n      if (!props.validate) {\n        return [];\n      }\n      //@ts-ignore\n      return props.options.rules;\n    });\n\n    //-----多行模式折叠\n\n    const columnsRowRef = ref();\n    const columnsBoxHeightRef = ref(0);\n    const columnsLineHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      //@ts-ignore\n      ctx.emit(\"update:collapse\", !props.collapse);\n      //@ts-ignore\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    const computedColName = computed(() => {\n      //@ts-ignore\n      if (props.layout === \"multi-line\") {\n        return ui.col.name;\n      }\n      return \"div\";\n    });\n    const computedIsMultiLine = computed(() => {\n      //@ts-ignore\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value) {\n        return \"auto\";\n      }\n      //@ts-ignore\n      if (props.collapse) {\n        return columnsLineHeightRef.value ? columnsLineHeightRef.value + \"px\" : \"\";\n      } else {\n        return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n      }\n    });\n\n    return {\n      get: (form: any, key: any) => {\n        return _.get(form, key);\n      },\n      ui,\n      onValueChanged,\n      doSearch,\n      doReset,\n      form,\n      componentRenderRefs,\n      getComponentRenderRef,\n      getComponentRef,\n      getForm,\n      setForm,\n      searchFormRef,\n      onInput,\n      inputEventDisabled,\n      changeInputEventDisabled,\n      computedColumns,\n      computedButtons,\n      computedRules,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedColName,\n      computedIsMultiLine,\n      toggleCollapse,\n      searchEventContextRef\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search {\n  //display: flex;\n  //flex-wrap: nowrap;\n  .search-left {\n  }\n  .search-right {\n    flex: 1;\n  }\n  .ant-form-inline {\n    flex-wrap: wrap;\n  }\n  .fs-search-form {\n    display: flex;\n    align-items: center;\n    flex-wrap: wrap;\n    //& > * {\n    //  margin-bottom: 4px;\n    //  margin-top: 4px;\n    //  margin-right: 10px;\n    //}\n\n    .fs-search-box {\n      display: flex;\n      .fs-search-main {\n        display: flex;\n        flex-direction: row;\n      }\n    }\n    .fs-search-col {\n      & > * {\n        margin: 0px 5px;\n      }\n      margin: 1px 0;\n      &:first-child {\n        // margin-left: 0;\n      }\n    }\n\n    .el-form-item {\n      margin-bottom: 4px;\n      margin-top: 4px;\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form--inline {\n      display: flex;\n      align-items: center;\n    }\n\n    .el-form-item__content {\n      display: flex;\n      align-items: center;\n    }\n  }\n\n  .fs-search-btns {\n    .fs-button {\n      margin-right: 5px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        .fs-search-columns {\n          height: auto;\n          overflow-y: hidden;\n          // transition: all 0.3s linear;\n          // will-change: height;\n        }\n        .fs-search-btns {\n          width: 100%;\n          text-align: center;\n          margin-top: 4px;\n          .el-form-item__content {\n            justify-content: center;\n          }\n\n          .n-form-item-blank {\n            display: flex;\n            justify-content: center;\n          }\n        }\n      }\n    }\n    .fs-search-action {\n      .ant-form-item {\n        margin-right: 2px;\n      }\n    }\n  }\n}\n\n.fs-search {\n  .n-form-item-blank {\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-search-layout-default\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n    <div class=\"fs-search-box\">\n      <div\n        class=\"fs-search-main\"\n        :class=\"{ 'fs-search-collapse': collapse }\"\n        :style=\"{ maxHeight: computedColumnBoxHeight }\"\n      >\n        <component :is=\"ui.row.name\" ref=\"columnsRowRef\" class=\"fs-search-columns\">\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-left\"></slot>\n          </span>\n          <!-- 查询字段render，需要定义props.columns -->\n          <template v-for=\"(item, key) of columns\" :key=\"key\">\n            <component :is=\"ui.col.name\" v-if=\"item.show\" class=\"fs-search-col\" v-bind=\"mergeCol(item.col)\">\n              <fs-render :render-func=\"item._cellRender\" :scope=\"getContextFn()\" />\n            </component>\n          </template>\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-middle\"></slot>\n          </span>\n          <component\n            :is=\"ui.col.name\"\n            v-if=\"!computedIsMultiLine\"\n            class=\"fs-search-col fs-search-buttons-group\"\n            v-bind=\"mergeCol(action?.col)\"\n          >\n            <component :is=\"ui.formItem.name\" :[ui.formItem.label]=\"action?.label\">\n              <!-- 查询按钮插槽-->\n              <slot name=\"search-buttons\" v-bind=\"getContextFn()\"></slot>\n            </component>\n          </component>\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-right\" v-bind=\"getContextFn()\"></slot>\n          </span>\n        </component>\n      </div>\n      <div v-if=\"computedIsMultiLine\" class=\"fs-search-buttons-group fs-search-multi-line-buttons\">\n        <!-- 多行模式时的查询按钮-->\n        <slot name=\"search-buttons\"></slot>\n        <fs-button\n          v-if=\"collapseButton?.show !== false\"\n          :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\"\n          :text=\"\n            collapse\n              ? t('fs.search.container.collapseButton.text.expand')\n              : t('fs.search.container.collapseButton.text.collapse')\n          \"\n          v-bind=\"collapseButton\"\n          @click=\"toggleCollapse\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { useUi } from \"../../use\";\nimport { computed, defineComponent, onMounted, ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useI18n } from \"../../locale\";\n\nexport default defineComponent({\n  name: \"FsSearchLayoutDefault\",\n  props: {\n    /**\n     * 是否收缩\n     */\n    collapse: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 展开按钮\n     */\n    collapseButton: {\n      type: Object\n    },\n\n    action: {\n      type: Object\n    },\n    /**\n     * 布局模式\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 查询字段列表，可以精细化自定义查询字段布局\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 默认的col配置\n     */\n    col: {\n      type: Object\n    },\n\n    /**\n     * 获取查询上下文\n     */\n    getContextFn: {\n      type: Function\n    }\n  },\n  emits: [\"update:collapse\", \"collapse\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { t } = useI18n();\n    const columnsRowRef = ref();\n    const computedIsMultiLine = computed(() => {\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n      }\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value || !props.collapse) {\n        return \"auto\";\n      }\n      return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n    });\n\n    const columnsBoxHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      ctx.emit(\"update:collapse\", !props.collapse);\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    function mergeCol(col: any) {\n      return _.merge({}, props.col, col);\n    }\n\n    return {\n      ui,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedIsMultiLine,\n      toggleCollapse,\n      mergeCol,\n      t\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search-layout-default {\n  width: 100%;\n\n  .fs-search-box {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    position: relative;\n\n    .fs-search-main {\n      width: 100%;\n      display: flex;\n      height: auto;\n\n      .fs-search-columns {\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        height: auto;\n        padding: 4px 0 4px 0;\n\n        .fs-search-col {\n          min-width: 180px;\n          &.fs-search-slot {\n            min-width: 0;\n          }\n          & > * {\n            margin: 0px 4px;\n          }\n\n          margin: 4px 0;\n\n          &:first-child {\n            // margin-left: 0;\n          }\n\n          .ant-input-number,\n          .ant-picker,\n          .el-input-number,\n          .el-cascader,\n          .el-date-editor,\n          .n-select,\n          .n-date-picker,\n          .n-input-number {\n            width: 100%;\n          }\n          .el-date-editor .el-range__icon {\n            margin-left: 10px;\n          }\n          .el-date-editor .el-range__close-icon {\n            margin-right: 10px;\n          }\n        }\n      }\n    }\n  }\n\n  .fs-search-buttons-group {\n    display: flex;\n    align-items: center;\n\n    .fs-button {\n      margin: 0 2px 0 2px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        overflow: hidden;\n        height: auto;\n        transition: max-height 0.2s ease;\n\n        &.fs-search-collapse {\n          max-height: 42px !important;\n        }\n      }\n    }\n\n    .ant-form-item {\n      display: flex;\n      .ant-form-row {\n        width: 100%;\n      }\n      .ant-form-item-control {\n        flex: 1;\n        overflow: hidden;\n      }\n    }\n  }\n}\n</style>\n", "<template>\n  <div class=\"fs-search-layout-default\" :class=\"{ 'fs-search-multi-line': computedIsMultiLine }\">\n    <div class=\"fs-search-box\">\n      <div\n        class=\"fs-search-main\"\n        :class=\"{ 'fs-search-collapse': collapse }\"\n        :style=\"{ maxHeight: computedColumnBoxHeight }\"\n      >\n        <component :is=\"ui.row.name\" ref=\"columnsRowRef\" class=\"fs-search-columns\">\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-left\"></slot>\n          </span>\n          <!-- 查询字段render，需要定义props.columns -->\n          <template v-for=\"(item, key) of columns\" :key=\"key\">\n            <component :is=\"ui.col.name\" v-if=\"item.show\" class=\"fs-search-col\" v-bind=\"mergeCol(item.col)\">\n              <fs-render :render-func=\"item._cellRender\" :scope=\"getContextFn()\" />\n            </component>\n          </template>\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-middle\"></slot>\n          </span>\n          <component\n            :is=\"ui.col.name\"\n            v-if=\"!computedIsMultiLine\"\n            class=\"fs-search-col fs-search-buttons-group\"\n            v-bind=\"mergeCol(action?.col)\"\n          >\n            <component :is=\"ui.formItem.name\" :[ui.formItem.label]=\"action?.label\">\n              <!-- 查询按钮插槽-->\n              <slot name=\"search-buttons\" v-bind=\"getContextFn()\"></slot>\n            </component>\n          </component>\n          <span class=\"fs-search-col fs-search-slot\">\n            <slot name=\"search-right\" v-bind=\"getContextFn()\"></slot>\n          </span>\n        </component>\n      </div>\n      <div v-if=\"computedIsMultiLine\" class=\"fs-search-buttons-group fs-search-multi-line-buttons\">\n        <!-- 多行模式时的查询按钮-->\n        <slot name=\"search-buttons\"></slot>\n        <fs-button\n          v-if=\"collapseButton?.show !== false\"\n          :icon=\"collapse ? ui.icons.caretUp : ui.icons.caretDown\"\n          :text=\"\n            collapse\n              ? t('fs.search.container.collapseButton.text.expand')\n              : t('fs.search.container.collapseButton.text.collapse')\n          \"\n          v-bind=\"collapseButton\"\n          @click=\"toggleCollapse\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { useUi } from \"../../use\";\nimport { computed, defineComponent, onMounted, ref } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useI18n } from \"../../locale\";\n\nexport default defineComponent({\n  name: \"FsSearchLayoutDefault\",\n  props: {\n    /**\n     * 是否收缩\n     */\n    collapse: {\n      type: Boolean,\n      default: true\n    },\n    /**\n     * 展开按钮\n     */\n    collapseButton: {\n      type: Object\n    },\n\n    action: {\n      type: Object\n    },\n    /**\n     * 布局模式\n     */\n    layout: {\n      type: String,\n      default: \"single-line\"\n    },\n    /**\n     * 查询字段列表，可以精细化自定义查询字段布局\n     */\n    columns: {\n      type: Object\n    },\n    /**\n     * 默认的col配置\n     */\n    col: {\n      type: Object\n    },\n\n    /**\n     * 获取查询上下文\n     */\n    getContextFn: {\n      type: Function\n    }\n  },\n  emits: [\"update:collapse\", \"collapse\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    const { t } = useI18n();\n    const columnsRowRef = ref();\n    const computedIsMultiLine = computed(() => {\n      return props.layout === \"multi-line\";\n      //不要这个，会死循环， && columnsBoxHeightRef.value > columnsLineHeightRef.value;\n    });\n    onMounted(() => {\n      if (computedIsMultiLine.value && columnsRowRef.value) {\n        columnsBoxHeightRef.value = columnsRowRef.value.$el.offsetHeight;\n      }\n    });\n\n    const computedColumnBoxHeight = computed(() => {\n      if (!computedIsMultiLine.value || !props.collapse) {\n        return \"auto\";\n      }\n      return columnsBoxHeightRef.value ? columnsBoxHeightRef.value + \"px\" : \"\";\n    });\n\n    const columnsBoxHeightRef = ref(0);\n\n    const toggleCollapse = () => {\n      ctx.emit(\"update:collapse\", !props.collapse);\n      ctx.emit(\"collapse\", !props.collapse);\n    };\n\n    function mergeCol(col: any) {\n      return _.merge({}, props.col, col);\n    }\n\n    return {\n      ui,\n      columnsRowRef,\n      computedColumnBoxHeight,\n      computedIsMultiLine,\n      toggleCollapse,\n      mergeCol,\n      t\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-search-layout-default {\n  width: 100%;\n\n  .fs-search-box {\n    width: 100%;\n    display: flex;\n    flex-direction: column;\n    position: relative;\n\n    .fs-search-main {\n      width: 100%;\n      display: flex;\n      height: auto;\n\n      .fs-search-columns {\n        width: 100%;\n        display: flex;\n        flex-wrap: wrap;\n        height: auto;\n        padding: 4px 0 4px 0;\n\n        .fs-search-col {\n          min-width: 180px;\n          &.fs-search-slot {\n            min-width: 0;\n          }\n          & > * {\n            margin: 0px 4px;\n          }\n\n          margin: 4px 0;\n\n          &:first-child {\n            // margin-left: 0;\n          }\n\n          .ant-input-number,\n          .ant-picker,\n          .el-input-number,\n          .el-cascader,\n          .el-date-editor,\n          .n-select,\n          .n-date-picker,\n          .n-input-number {\n            width: 100%;\n          }\n          .el-date-editor .el-range__icon {\n            margin-left: 10px;\n          }\n          .el-date-editor .el-range__close-icon {\n            margin-right: 10px;\n          }\n        }\n      }\n    }\n  }\n\n  .fs-search-buttons-group {\n    display: flex;\n    align-items: center;\n\n    .fs-button {\n      margin: 0 2px 0 2px;\n    }\n  }\n\n  &.fs-search-multi-line {\n    .fs-search-box {\n      .fs-search-main {\n        flex-direction: column;\n        overflow: hidden;\n        height: auto;\n        transition: max-height 0.2s ease;\n\n        &.fs-search-collapse {\n          max-height: 42px !important;\n        }\n      }\n    }\n\n    .ant-form-item {\n      display: flex;\n      .ant-form-row {\n        width: 100%;\n      }\n      .ant-form-item-control {\n        flex: 1;\n        overflow: hidden;\n      }\n    }\n  }\n}\n</style>\n", "<script lang=\"ts\">\nimport { defineComponent as __MACROS_defineComponent } from \"vue\";\nexport default /*#__PURE__*/ __MACROS_defineComponent({\n  name: \"FsTabsFilter\",\n  inheritAttrs: false\n});\n</script>\n<template>\n  <div class=\"fs-tabs-filter\">\n    <component :is=\"ui.tabs.name\" v-bind=\"binding\">\n      <component\n        :is=\"ui.tabPane.name\"\n        v-if=\"defaultOption.show\"\n        :[ui.tabPane.key]=\"__DEFAULT__\"\n        :[ui.tabPane.tab]=\"defaultOption.label\"\n      />\n      <component\n        :is=\"ui.tabPane.name\"\n        v-for=\"(item, index) of options\"\n        :key=\"index\"\n        :[ui.tabPane.key]=\"getValue(item)\"\n        :[ui.tabPane.tab]=\"getLabel(item)\"\n      />\n    </component>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { computed, useAttrs } from \"vue\";\nimport _ from \"lodash-es\";\nimport { useMerge, useUi } from \"../../use\";\n;\n\ntype TabsFilterDefaultOption = { show?: boolean; value?: any; label?: string };\ntype TabsFilterOption = { value: any; label: string; [key: string]: any };\ninterface TabsFilterProps {\n  name: string; //查询字段的key,search参数key\n  show?: boolean;\n  defaultOption?: TabsFilterDefaultOption;\n  options: TabsFilterOption[];\n  modelValue: any;\n  value?: string;\n  label?: string;\n}\n\nconst attrs = useAttrs();\nconst { merge } = useMerge();\nconst props = withDefaults(defineProps<TabsFilterProps>(), {\n  show: false,\n  value: \"value\",\n  label: \"label\",\n  defaultOption: undefined,\n  options: () => {\n    return [];\n  }\n});\n\nconst defaultOption = computed(() => {\n  const def = {\n    show: true,\n    value: null,\n    label: \"全部\"\n  } as TabsFilterDefaultOption;\n  return merge(def, props.defaultOption || {});\n});\n\nconst __DEFAULT__ = \"_default_key_\";\nconst binding = computed(() => {\n  const value =\n    props.modelValue == null || props.modelValue === defaultOption.value.value ? __DEFAULT__ : props.modelValue;\n  return {\n    type: \"card\",\n    ...attrs,\n    [ui.tabs.modelValue]: value,\n    [\"onUpdate:\" + ui.tabs.modelValue]: onUpdateActiveKey\n  };\n});\n\nconst emit = defineEmits([\"update:modelValue\", \"change\"]);\n\nfunction onUpdateActiveKey(value: any) {\n  if (__DEFAULT__ === value) {\n    value = defaultOption.value.value;\n  }\n  const oldValue = props.modelValue;\n  emit(\"update:modelValue\", value);\n  if (oldValue !== value) {\n    emit(\"change\", value);\n  }\n}\n\nfunction getValue(option: TabsFilterOption) {\n  return option[props.value];\n}\nfunction getLabel(option: TabsFilterOption) {\n  return option[props.label];\n}\n\nconst { ui } = useUi();\n</script>\n\n<style lang=\"less\">\n.fs-tabs-filter {\n  margin: 0;\n  width: 100%;\n  //width: 100%;\n  .ant-tabs > .ant-tabs-nav,\n  .ant-tabs > div > .ant-tabs-nav {\n    margin-bottom: 0;\n  }\n\n  .el-tabs--card > .el-tabs__header {\n    margin-bottom: 0;\n  }\n\n  .n-tab-pane {\n    padding: 0 !important;\n  }\n}\n</style>\n", "<template>\n  <component :is=\"ui.radioGroup.name\" @change=\"onSelectedChange\">\n    <component\n      :is=\"computedRadioName\"\n      v-for=\"item of computedOptions\"\n      ref=\"radioRef\"\n      :key=\"getValue(item)\"\n      :[ui.radio.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n    >\n      {{ getLabel(item) }}\n    </component>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { uiContext } from \"../../ui\";\nimport { ref, computed, defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n/**\n * 字典单选框\n * 支持el-radio-group|a-radio-group的参数\n *\n */\nexport default defineComponent({\n  name: \"FsDictRadio\",\n  props: {\n    /**\n     * 数据字典配置\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n\n    /**\n     * radio组件名称\n     * antdv使用button样式的时候有用\n     * 即将废弃,请使用optionName\n     */\n    radioName: {},\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n\n    if (props.radioName) {\n      console.warn(\"参数radioName即将废弃，请改成optionName\");\n    }\n    const computedRadioName = computed(() => {\n      return props.optionName ?? props.radioName ?? ui.radio.name;\n    });\n\n    let usedDict = useDict(props, ctx, ui.radioGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n\n    const onSelectedChange = (value: any) => {\n      ctx.emit(\"change\", value);\n      if (value && value.target) {\n        value = value.target.value;\n      }\n      const dict = usedDict.getDict();\n      if (dict && dict.dataMap && dict.dataMap[value]) {\n        const opt = dict.dataMap[value];\n        ctx.emit(\"selected-change\", opt);\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    };\n\n    return {\n      ui,\n      computedRadioName,\n      ...usedDict,\n      computedOptions,\n      onSelectedChange\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.radioGroup.name\" @change=\"onSelectedChange\">\n    <component\n      :is=\"computedRadioName\"\n      v-for=\"item of computedOptions\"\n      ref=\"radioRef\"\n      :key=\"getValue(item)\"\n      :[ui.radio.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n    >\n      {{ getLabel(item) }}\n    </component>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { uiContext } from \"../../ui\";\nimport { ref, computed, defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n/**\n * 字典单选框\n * 支持el-radio-group|a-radio-group的参数\n *\n */\nexport default defineComponent({\n  name: \"FsDictRadio\",\n  props: {\n    /**\n     * 数据字典配置\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n\n    /**\n     * radio组件名称\n     * antdv使用button样式的时候有用\n     * 即将废弃,请使用optionName\n     */\n    radioName: {},\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  setup(props: any, ctx: any) {\n    const { ui } = useUi();\n\n    if (props.radioName) {\n      console.warn(\"参数radioName即将废弃，请改成optionName\");\n    }\n    const computedRadioName = computed(() => {\n      return props.optionName ?? props.radioName ?? ui.radio.name;\n    });\n\n    let usedDict = useDict(props, ctx, ui.radioGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n\n    const onSelectedChange = (value: any) => {\n      ctx.emit(\"change\", value);\n      if (value && value.target) {\n        value = value.target.value;\n      }\n      const dict = usedDict.getDict();\n      if (dict && dict.dataMap && dict.dataMap[value]) {\n        const opt = dict.dataMap[value];\n        ctx.emit(\"selected-change\", opt);\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    };\n\n    return {\n      ui,\n      computedRadioName,\n      ...usedDict,\n      computedOptions,\n      onSelectedChange\n    };\n  }\n});\n</script>\n", null, "<template>\n  <span class=\"fs-values-format\">\n    <template v-if=\"itemRender\">\n      <fs-render v-for=\"item in computedValueItems\" :key=\"getValue(item)\" :render-func=\"itemRender\" :scope=\"item\" />\n    </template>\n    <template v-else-if=\"type === 'text'\">\n      <span v-for=\"item in computedValueItems\" :key=\"getValue(item)\" @click=\"doClick(item)\">{{ getLabel(item) }}</span>\n    </template>\n    <template v-else>\n      <template v-for=\"(item, index) in computedValueItems\" :key=\"getValue(item)\">\n        <component\n          :is=\"ui.tag.name\"\n          class=\"fs-tag\"\n          size=\"small\"\n          :closable=\"closable\"\n          v-bind=\"item\"\n          :icon=\"null\"\n          :name=\"null\"\n          @close=\"doClose(index, item)\"\n          @click=\"doClick(item)\"\n        >\n          <template v-if=\"item.icon\">\n            <fs-icon :icon=\"item.icon\" :spin=\"item.iconSpin\" class=\"fs-tag-icon\" />\n          </template>\n          {{ getLabel(item) }}\n        </component>\n      </template>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, Ref } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useUi } from \"../../use\";\nfunction getHashCode(str: string) {\n  if (str == null) {\n    return 0;\n  }\n  if (typeof str !== \"string\") {\n    str = JSON.stringify(str);\n  }\n  let hash = 0;\n  let i;\n  let chr;\n  let len;\n  if (str.length === 0) return hash;\n  for (i = 0, len = str.length; i < len; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nfunction buildArrayValue(props: any) {\n  let valueArr = [];\n  if (typeof props.modelValue === \"string\" && props.multiple && props.separator != null && props.separator !== \"\") {\n    valueArr = props.modelValue.split(props.separator);\n  } else if (props.modelValue instanceof Array) {\n    // 本来就是数组的\n    valueArr = props.modelValue;\n  } else {\n    valueArr = [props.modelValue];\n  }\n  return valueArr;\n}\n\n/**\n * value格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsValuesFormat\",\n  props: {\n    /**\n     * 值\n     */\n    modelValue: {},\n    /**\n     * 字典配置\n     */\n    dict: {},\n    /**\n     * 是否多选\n     */\n    multiple: { default: true },\n    /**\n     * 分隔符<br/>\n     * 多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     * 传入空字符串，表示不分割<br/>\n     */\n    separator: { default: \",\" },\n\n    /**\n     * 颜色\n     * element=【auto, primary, success, warning, danger ,info】\n     * antdv=【auto, primary, success, blue,red,...】\n     * 配置auto，则自动根据value值hashcode分配颜色值\n     */\n    color: {},\n    /**\n     * 效果（仅element）\n     **/\n    effect: {},\n    /**\n     * 自动染色颜色值列表\n     */\n    autoColors: {\n      type: Array\n    },\n    /**\n     * 自动主题列表（仅element）\n     * 【 light, plain 】\n     */\n    autoEffects: {\n      type: Array\n    },\n    /**\n     * 显示类型：【text, tag】\n     */\n    type: {\n      default: \"tag\"\n    },\n    /**\n     * 值的类型，【 value | object】\n     */\n    valueType: {\n      type: String\n    },\n    /**\n     * 当value值不在字典中时默认显示的文本\n     */\n    defaultLabel: {},\n\n    /**\n     * label自定义render\n     */\n    labelFormatter: {\n      type: Function\n    },\n    /**\n     * 自定义选项render\n     */\n    itemRender: {\n      type: Function\n    },\n\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"click\", \"dict-change\", \"close\", \"update:modelValue\"],\n  setup(props: any, ctx: any) {\n    // trace.trace(\"values-format\");\n    // console.log(\"values-format init\", props.modelValue);\n    //const dict = useDict(props, ctx);\n    const { ui } = useUi();\n    const COLOR_LIST = ui.tag.colors;\n    const EFFECT_LIST = [\"plain\", \"light\"];\n\n    const usedDict = useDict(props, ctx);\n    const { getColor, getValue, removePropValue } = usedDict;\n    usedDict.watchValue();\n    function setColor(props: any, item: any) {\n      if (!item.effect && props.effect) {\n        item.effect = props.effect;\n      }\n      const typeKey = ui.tag.type;\n      const color = getColor(item);\n      if (color != null) {\n        //如果已经配置了color\n        if (typeof color != \"string\") {\n          return;\n        }\n        //将原有的color字段删掉，避免naive color报错\n        removePropValue(item, \"color\");\n        item[typeKey] = color;\n        return;\n      }\n      if (props.color === \"auto\") {\n        const hashcode = getHashCode(getValue(item));\n        const colors = props.autoColors ? props.autoColors : COLOR_LIST;\n        item[typeKey] = colors[hashcode % colors.length];\n        const effects = props.autoEffects ? props.autoEffects : EFFECT_LIST;\n        item.effect = effects[Math.floor(hashcode / colors.length) % effects.length];\n      } else {\n        item[typeKey] = props.color;\n      }\n    }\n\n    const computedValueItems: Ref<any[]> = computed(() => {\n      if (props.valueType === \"object\") {\n        if (props.modelValue && !Array.isArray(props.modelValue)) {\n          return [props.modelValue];\n        }\n        return props.modelValue;\n      }\n\n      const dict = usedDict.getDict();\n      if (props.modelValue == null || props.modelValue === \"\") {\n        return [];\n      }\n      const valueArr = buildArrayValue(props);\n\n      let options = [];\n\n      const valueProp = props.dict?.value || \"value\";\n      const labelProp = props.dict?.label || \"label\";\n\n      if (dict) {\n        options = dict.getNodesFromDataMap(valueArr);\n        //设置默认label\n        _.forEach(options, (item) => {\n          if (item[labelProp] == null) {\n            item[labelProp] = props.defaultLabel || item[valueProp];\n          }\n        });\n      } else {\n        options = [];\n        _.forEach(valueArr, (item) => {\n          if (item instanceof Object) {\n            options.push(item);\n          } else {\n            options.push({\n              [valueProp]: item,\n              [labelProp]: item\n            });\n          }\n        });\n      }\n\n      const colorfulOptions: any = [];\n      _.forEach(options, (item) => {\n        colorfulOptions.push(_.omit(item, \"children\"));\n      });\n      _.forEach(colorfulOptions, (item) => {\n        setColor(props, item);\n      });\n      return colorfulOptions;\n    });\n\n    function doClick(item: any) {\n      ctx.emit(\"click\", { item: item });\n    }\n    function doClose(index: number, item: any) {\n      ctx.emit(\"close\", { item, index });\n      const newValues: any[] = [];\n      for (let i = 0; i < computedValueItems.value.length; i++) {\n        if (i !== index) {\n          newValues.push(getValue(computedValueItems.value[i]));\n        }\n      }\n      ctx.emit(\"update:modelValue\", newValues);\n    }\n\n    return {\n      ui,\n      ...usedDict,\n      doClick,\n      computedValueItems,\n      doClose\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-values-format .fs-tag {\n  margin: 2px;\n  cursor: pointer;\n  .fs-tag-icon {\n  }\n}\n</style>\n", "<template>\n  <span class=\"fs-values-format\">\n    <template v-if=\"itemRender\">\n      <fs-render v-for=\"item in computedValueItems\" :key=\"getValue(item)\" :render-func=\"itemRender\" :scope=\"item\" />\n    </template>\n    <template v-else-if=\"type === 'text'\">\n      <span v-for=\"item in computedValueItems\" :key=\"getValue(item)\" @click=\"doClick(item)\">{{ getLabel(item) }}</span>\n    </template>\n    <template v-else>\n      <template v-for=\"(item, index) in computedValueItems\" :key=\"getValue(item)\">\n        <component\n          :is=\"ui.tag.name\"\n          class=\"fs-tag\"\n          size=\"small\"\n          :closable=\"closable\"\n          v-bind=\"item\"\n          :icon=\"null\"\n          :name=\"null\"\n          @close=\"doClose(index, item)\"\n          @click=\"doClick(item)\"\n        >\n          <template v-if=\"item.icon\">\n            <fs-icon :icon=\"item.icon\" :spin=\"item.iconSpin\" class=\"fs-tag-icon\" />\n          </template>\n          {{ getLabel(item) }}\n        </component>\n      </template>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport _ from \"lodash-es\";\nimport { computed, defineComponent, Ref } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useUi } from \"../../use\";\nfunction getHashCode(str: string) {\n  if (str == null) {\n    return 0;\n  }\n  if (typeof str !== \"string\") {\n    str = JSON.stringify(str);\n  }\n  let hash = 0;\n  let i;\n  let chr;\n  let len;\n  if (str.length === 0) return hash;\n  for (i = 0, len = str.length; i < len; i++) {\n    chr = str.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return hash;\n}\n\nfunction buildArrayValue(props: any) {\n  let valueArr = [];\n  if (typeof props.modelValue === \"string\" && props.multiple && props.separator != null && props.separator !== \"\") {\n    valueArr = props.modelValue.split(props.separator);\n  } else if (props.modelValue instanceof Array) {\n    // 本来就是数组的\n    valueArr = props.modelValue;\n  } else {\n    valueArr = [props.modelValue];\n  }\n  return valueArr;\n}\n\n/**\n * value格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsValuesFormat\",\n  props: {\n    /**\n     * 值\n     */\n    modelValue: {},\n    /**\n     * 字典配置\n     */\n    dict: {},\n    /**\n     * 是否多选\n     */\n    multiple: { default: true },\n    /**\n     * 分隔符<br/>\n     * 多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     * 传入空字符串，表示不分割<br/>\n     */\n    separator: { default: \",\" },\n\n    /**\n     * 颜色\n     * element=【auto, primary, success, warning, danger ,info】\n     * antdv=【auto, primary, success, blue,red,...】\n     * 配置auto，则自动根据value值hashcode分配颜色值\n     */\n    color: {},\n    /**\n     * 效果（仅element）\n     **/\n    effect: {},\n    /**\n     * 自动染色颜色值列表\n     */\n    autoColors: {\n      type: Array\n    },\n    /**\n     * 自动主题列表（仅element）\n     * 【 light, plain 】\n     */\n    autoEffects: {\n      type: Array\n    },\n    /**\n     * 显示类型：【text, tag】\n     */\n    type: {\n      default: \"tag\"\n    },\n    /**\n     * 值的类型，【 value | object】\n     */\n    valueType: {\n      type: String\n    },\n    /**\n     * 当value值不在字典中时默认显示的文本\n     */\n    defaultLabel: {},\n\n    /**\n     * label自定义render\n     */\n    labelFormatter: {\n      type: Function\n    },\n    /**\n     * 自定义选项render\n     */\n    itemRender: {\n      type: Function\n    },\n\n    closable: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\"click\", \"dict-change\", \"close\", \"update:modelValue\"],\n  setup(props: any, ctx: any) {\n    // trace.trace(\"values-format\");\n    // console.log(\"values-format init\", props.modelValue);\n    //const dict = useDict(props, ctx);\n    const { ui } = useUi();\n    const COLOR_LIST = ui.tag.colors;\n    const EFFECT_LIST = [\"plain\", \"light\"];\n\n    const usedDict = useDict(props, ctx);\n    const { getColor, getValue, removePropValue } = usedDict;\n    usedDict.watchValue();\n    function setColor(props: any, item: any) {\n      if (!item.effect && props.effect) {\n        item.effect = props.effect;\n      }\n      const typeKey = ui.tag.type;\n      const color = getColor(item);\n      if (color != null) {\n        //如果已经配置了color\n        if (typeof color != \"string\") {\n          return;\n        }\n        //将原有的color字段删掉，避免naive color报错\n        removePropValue(item, \"color\");\n        item[typeKey] = color;\n        return;\n      }\n      if (props.color === \"auto\") {\n        const hashcode = getHashCode(getValue(item));\n        const colors = props.autoColors ? props.autoColors : COLOR_LIST;\n        item[typeKey] = colors[hashcode % colors.length];\n        const effects = props.autoEffects ? props.autoEffects : EFFECT_LIST;\n        item.effect = effects[Math.floor(hashcode / colors.length) % effects.length];\n      } else {\n        item[typeKey] = props.color;\n      }\n    }\n\n    const computedValueItems: Ref<any[]> = computed(() => {\n      if (props.valueType === \"object\") {\n        if (props.modelValue && !Array.isArray(props.modelValue)) {\n          return [props.modelValue];\n        }\n        return props.modelValue;\n      }\n\n      const dict = usedDict.getDict();\n      if (props.modelValue == null || props.modelValue === \"\") {\n        return [];\n      }\n      const valueArr = buildArrayValue(props);\n\n      let options = [];\n\n      const valueProp = props.dict?.value || \"value\";\n      const labelProp = props.dict?.label || \"label\";\n\n      if (dict) {\n        options = dict.getNodesFromDataMap(valueArr);\n        //设置默认label\n        _.forEach(options, (item) => {\n          if (item[labelProp] == null) {\n            item[labelProp] = props.defaultLabel || item[valueProp];\n          }\n        });\n      } else {\n        options = [];\n        _.forEach(valueArr, (item) => {\n          if (item instanceof Object) {\n            options.push(item);\n          } else {\n            options.push({\n              [valueProp]: item,\n              [labelProp]: item\n            });\n          }\n        });\n      }\n\n      const colorfulOptions: any = [];\n      _.forEach(options, (item) => {\n        colorfulOptions.push(_.omit(item, \"children\"));\n      });\n      _.forEach(colorfulOptions, (item) => {\n        setColor(props, item);\n      });\n      return colorfulOptions;\n    });\n\n    function doClick(item: any) {\n      ctx.emit(\"click\", { item: item });\n    }\n    function doClose(index: number, item: any) {\n      ctx.emit(\"close\", { item, index });\n      const newValues: any[] = [];\n      for (let i = 0; i < computedValueItems.value.length; i++) {\n        if (i !== index) {\n          newValues.push(getValue(computedValueItems.value[i]));\n        }\n      }\n      ctx.emit(\"update:modelValue\", newValues);\n    }\n\n    return {\n      ui,\n      ...usedDict,\n      doClick,\n      computedValueItems,\n      doClose\n    };\n  }\n});\n</script>\n<style lang=\"less\">\n.fs-values-format .fs-tag {\n  margin: 2px;\n  cursor: pointer;\n  .fs-tag-icon {\n  }\n}\n</style>\n", "<template>\n  <span>\n    <template v-if=\"computedMultiple\">\n      <div v-for=\"(Labels, Index) in multipleLabels\" :key=\"Index\">\n        <span v-for=\"(item, index) in Labels\" :key=\"index\">\n          <span v-if=\"index !== 0\"> / </span>\n          <span>{{ getLabel(item) }}</span>\n        </span>\n      </div>\n    </template>\n    <template v-else>\n      <span v-for=\"(item, index) in labels\" :key=\"index\">\n        <span v-if=\"index !== 0\"> / </span>\n        <span>{{ getLabel(item) }}</span>\n      </span>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { computed, defineComponent } from \"vue\";\n/**\n * 级联数据格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsDictCascaderFormat\",\n  props: {\n    /**\n     *   值<br/>\n     *   单选时 '1,2,3' 或 [1,2,3]<br/>\n     *   多选[[1,2,3],[4,5,6]]<br/>\n     */\n    // @ts-ignore\n    modelValue: {\n      type: [String, Array],\n      default: undefined,\n      require: true\n    },\n    /**\n     *  value的分隔符<br/>\n     *  多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     *  传入空字符串，表示不分割<br/>\n     */\n    // @ts-ignore\n    separator: { type: String, default: \",\", require: false },\n    /**\n     * 是否多选\n     */\n    // @ts-ignore\n    multiple: { type: Boolean, default: false },\n    /**\n     * 数据字典\n     */\n    dict: {\n      type: Object,\n      default: undefined,\n      require: false\n    }\n  } as any,\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const dict = useDict(props, ctx);\n    // @ts-ignore\n    if (props.dict?.getNodesByValues) {\n      dict.watchValue();\n    }\n\n    const computedMultiple = computed(() => {\n      // @ts-ignore\n      return props.multiple;\n    });\n\n    return {\n      ...dict,\n      computedMultiple\n    };\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    labels() {\n      // @ts-ignore\n      if (this.modelValue == null) {\n        return [];\n      }\n      // @ts-ignore\n      return this.buildValueItem(this.modelValue);\n    },\n    multipleLabels() {\n      // @ts-ignore\n      if (this.modelValue == null) {\n        return [];\n      }\n      const arr = [];\n      // @ts-ignore\n      for (const item of this.modelValue) {\n        // @ts-ignore\n        arr.push(this.buildValueItem(item));\n      }\n      return arr;\n    }\n  },\n  methods: {\n    getValueArr(values: any) {\n      if (values == null) {\n        // @ts-ignore\n        if (this.multiple) {\n          values = [];\n          // @ts-ignore\n          for (const item of this.modelValue) {\n            for (const sub of item) {\n              values.push(sub);\n            }\n          }\n        } else {\n          // @ts-ignore\n          values = this.modelValue;\n        }\n      }\n      if (values == null) {\n        return [];\n      }\n      let arr = null;\n      // @ts-ignore\n      if (typeof values === \"string\" && !this.multiple && this.separator != null && this.separator !== \"\") {\n        // @ts-ignore\n        arr = values.split(this.separator);\n      } else if (values instanceof Array) {\n        arr = values;\n      } else {\n        arr = [values];\n      }\n      return arr;\n    },\n    buildValueItem(values: any) {\n      // @ts-ignore\n      const arr = this.getValueArr(values);\n\n      // @ts-ignore\n      const dict = this.getDict();\n      if (dict) {\n        return dict.getNodesFromDataMap(arr);\n      }\n    }\n  }\n});\n</script>\n", "<template>\n  <span>\n    <template v-if=\"computedMultiple\">\n      <div v-for=\"(Labels, Index) in multipleLabels\" :key=\"Index\">\n        <span v-for=\"(item, index) in Labels\" :key=\"index\">\n          <span v-if=\"index !== 0\"> / </span>\n          <span>{{ getLabel(item) }}</span>\n        </span>\n      </div>\n    </template>\n    <template v-else>\n      <span v-for=\"(item, index) in labels\" :key=\"index\">\n        <span v-if=\"index !== 0\"> / </span>\n        <span>{{ getLabel(item) }}</span>\n      </span>\n    </template>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { computed, defineComponent } from \"vue\";\n/**\n * 级联数据格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsDictCascaderFormat\",\n  props: {\n    /**\n     *   值<br/>\n     *   单选时 '1,2,3' 或 [1,2,3]<br/>\n     *   多选[[1,2,3],[4,5,6]]<br/>\n     */\n    // @ts-ignore\n    modelValue: {\n      type: [String, Array],\n      default: undefined,\n      require: true\n    },\n    /**\n     *  value的分隔符<br/>\n     *  多选时，如果value为string，则以该分隔符分割成多个展示<br/>\n     *  传入空字符串，表示不分割<br/>\n     */\n    // @ts-ignore\n    separator: { type: String, default: \",\", require: false },\n    /**\n     * 是否多选\n     */\n    // @ts-ignore\n    multiple: { type: Boolean, default: false },\n    /**\n     * 数据字典\n     */\n    dict: {\n      type: Object,\n      default: undefined,\n      require: false\n    }\n  } as any,\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const dict = useDict(props, ctx);\n    // @ts-ignore\n    if (props.dict?.getNodesByValues) {\n      dict.watchValue();\n    }\n\n    const computedMultiple = computed(() => {\n      // @ts-ignore\n      return props.multiple;\n    });\n\n    return {\n      ...dict,\n      computedMultiple\n    };\n  },\n  data() {\n    return {};\n  },\n  computed: {\n    labels() {\n      // @ts-ignore\n      if (this.modelValue == null) {\n        return [];\n      }\n      // @ts-ignore\n      return this.buildValueItem(this.modelValue);\n    },\n    multipleLabels() {\n      // @ts-ignore\n      if (this.modelValue == null) {\n        return [];\n      }\n      const arr = [];\n      // @ts-ignore\n      for (const item of this.modelValue) {\n        // @ts-ignore\n        arr.push(this.buildValueItem(item));\n      }\n      return arr;\n    }\n  },\n  methods: {\n    getValueArr(values: any) {\n      if (values == null) {\n        // @ts-ignore\n        if (this.multiple) {\n          values = [];\n          // @ts-ignore\n          for (const item of this.modelValue) {\n            for (const sub of item) {\n              values.push(sub);\n            }\n          }\n        } else {\n          // @ts-ignore\n          values = this.modelValue;\n        }\n      }\n      if (values == null) {\n        return [];\n      }\n      let arr = null;\n      // @ts-ignore\n      if (typeof values === \"string\" && !this.multiple && this.separator != null && this.separator !== \"\") {\n        // @ts-ignore\n        arr = values.split(this.separator);\n      } else if (values instanceof Array) {\n        arr = values;\n      } else {\n        arr = [values];\n      }\n      return arr;\n    },\n    buildValueItem(values: any) {\n      // @ts-ignore\n      const arr = this.getValueArr(values);\n\n      // @ts-ignore\n      const dict = this.getDict();\n      if (dict) {\n        return dict.getNodesFromDataMap(arr);\n      }\n    }\n  }\n});\n</script>\n", "<template>\n  <component\n    :is=\"ui.cascader.name\"\n    ref=\"cascaderRef\"\n    :options=\"computedOptions\"\n    v-bind=\"fieldNamesBinder\"\n    @change=\"onSelectChange\"\n  />\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { useUi } from \"../../use\";\nimport { defineComponent, ref } from \"vue\";\n/**\n * 字典级联组件\n * 支持el-cascader|a-cascader组件的参数\n */\nexport default defineComponent({\n  name: \"FsDictCascader\",\n  props: {\n    /**\n     * 字典配置\n     */\n    dict: {},\n    /**\n     * 选项，比dict.data优先级高\n     */\n    options: { type: Array },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  setup(props, ctx) {\n    const dictUseRet = useDict(props, ctx);\n    const { ui } = useUi();\n    const fieldNamesBinder = ref();\n    // @ts-ignore\n    if (props.dict) {\n      fieldNamesBinder.value = ui.cascader.fieldNames({\n        // @ts-ignore\n        value: props.dict.value,\n        // @ts-ignore\n        label: props.dict.label,\n        // @ts-ignore\n        children: props.dict.children\n      });\n    }\n    const computedOptions = dictUseRet.createComputedOptions();\n\n    function onSelectChange(value: any) {\n      ctx.emit(\"change\", value);\n      if (value) {\n        let selectedOptions = [];\n        const dict = dictUseRet.getDict();\n        if (dict && dict.dataMap) {\n          for (let item of value) {\n            const opt = dict.dataMap[item];\n            if (opt) {\n              selectedOptions.push(opt);\n            }\n          }\n          ctx.emit(\"selected-change\", selectedOptions);\n        }\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    }\n    return {\n      ui,\n      ...dictUseRet,\n      fieldNamesBinder,\n      computedOptions,\n      onSelectChange\n    };\n  }\n});\n</script>\n", "<template>\n  <component\n    :is=\"ui.cascader.name\"\n    ref=\"cascaderRef\"\n    :options=\"computedOptions\"\n    v-bind=\"fieldNamesBinder\"\n    @change=\"onSelectChange\"\n  />\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { useUi } from \"../../use\";\nimport { defineComponent, ref } from \"vue\";\n/**\n * 字典级联组件\n * 支持el-cascader|a-cascader组件的参数\n */\nexport default defineComponent({\n  name: \"FsDictCascader\",\n  props: {\n    /**\n     * 字典配置\n     */\n    dict: {},\n    /**\n     * 选项，比dict.data优先级高\n     */\n    options: { type: Array },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  setup(props, ctx) {\n    const dictUseRet = useDict(props, ctx);\n    const { ui } = useUi();\n    const fieldNamesBinder = ref();\n    // @ts-ignore\n    if (props.dict) {\n      fieldNamesBinder.value = ui.cascader.fieldNames({\n        // @ts-ignore\n        value: props.dict.value,\n        // @ts-ignore\n        label: props.dict.label,\n        // @ts-ignore\n        children: props.dict.children\n      });\n    }\n    const computedOptions = dictUseRet.createComputedOptions();\n\n    function onSelectChange(value: any) {\n      ctx.emit(\"change\", value);\n      if (value) {\n        let selectedOptions = [];\n        const dict = dictUseRet.getDict();\n        if (dict && dict.dataMap) {\n          for (let item of value) {\n            const opt = dict.dataMap[item];\n            if (opt) {\n              selectedOptions.push(opt);\n            }\n          }\n          ctx.emit(\"selected-change\", selectedOptions);\n        }\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    }\n    return {\n      ui,\n      ...dictUseRet,\n      fieldNamesBinder,\n      computedOptions,\n      onSelectChange\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.checkboxGroup.name\" @change=\"onSelectedChange\">\n    <component\n      :is=\"optionName || ui.checkbox.name\"\n      v-for=\"item of computedOptions\"\n      ref=\"checkboxRef\"\n      :key=\"getValue(item)\"\n      :[ui.checkbox.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n      >{{ getLabel(item) }}</component\n    >\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典checkbox\n * 支持el-checkbox|a-checkbox参数\n */\nexport default defineComponent({\n  name: \"FsDictCheckbox\",\n  props: {\n    /**\n     * 字典\n     */\n    dict: {},\n    /**\n     * 选项，比dict.data优先级高\n     */\n    options: { type: Array, default: undefined, require: false },\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    let usedDict = useDict(props, ctx, ui.checkboxGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    const onSelectedChange = (value: any) => {\n      ctx.emit(\"change\", value);\n      if (value) {\n        let selectedOptions = [];\n        const dict = usedDict.getDict();\n        if (dict && dict.dataMap) {\n          for (let item of value) {\n            const opt = dict.dataMap[item];\n            if (opt) {\n              selectedOptions.push(opt);\n            }\n          }\n          ctx.emit(\"selected-change\", selectedOptions);\n        }\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    };\n\n    return {\n      ui,\n      ...usedDict,\n      computedOptions,\n      onSelectedChange\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.checkboxGroup.name\" @change=\"onSelectedChange\">\n    <component\n      :is=\"optionName || ui.checkbox.name\"\n      v-for=\"item of computedOptions\"\n      ref=\"checkboxRef\"\n      :key=\"getValue(item)\"\n      :[ui.checkbox.value]=\"getValue(item)\"\n      v-bind=\"optionProps\"\n      >{{ getLabel(item) }}</component\n    >\n  </component>\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { defineComponent } from \"vue\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典checkbox\n * 支持el-checkbox|a-checkbox参数\n */\nexport default defineComponent({\n  name: \"FsDictCheckbox\",\n  props: {\n    /**\n     * 字典\n     */\n    dict: {},\n    /**\n     * 选项，比dict.data优先级高\n     */\n    options: { type: Array, default: undefined, require: false },\n\n    /**\n     * 选项的组件名称\n     */\n    optionName: {\n      type: String\n    },\n\n    /**\n     * 选项的属性\n     */\n    optionProps: {\n      type: Object,\n      default() {\n        return {};\n      }\n    },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    let usedDict = useDict(props, ctx, ui.checkboxGroup.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    const onSelectedChange = (value: any) => {\n      ctx.emit(\"change\", value);\n      if (value) {\n        let selectedOptions = [];\n        const dict = usedDict.getDict();\n        if (dict && dict.dataMap) {\n          for (let item of value) {\n            const opt = dict.dataMap[item];\n            if (opt) {\n              selectedOptions.push(opt);\n            }\n          }\n          ctx.emit(\"selected-change\", selectedOptions);\n        }\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    };\n\n    return {\n      ui,\n      ...usedDict,\n      computedOptions,\n      onSelectedChange\n    };\n  }\n});\n</script>\n", "<template>\n  <component :is=\"ui.switch.name\" ref=\"switchRef\" v-bind=\"binding\" />\n</template>\n<script lang=\"ts\">\nimport { useDict } from \"../../use/use-dict\";\nimport { uiContext } from \"../../ui\";\nimport { defineComponent, PropType } from \"vue\";\nimport { DictOptions, useUi } from \"../../use\";\n\n/**\n * 字典开关\n * 支持el-switch|a-switch的属性\n */\nexport default defineComponent({\n  name: \"FsDictSwitch\",\n  props: {\n    /**\n     * 字典第一个为开启\n     * 第二个为关闭\n     */\n    dict: {\n      type: Object as PropType<DictOptions<any>>\n    },\n    options: {},\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  } as any,\n  emits: [\"dict-change\"],\n  setup(props, ctx) {\n    const { ui } = useUi();\n    let usedDict = useDict(props, ctx, ui.switch.modelValue);\n    const computedOptions = usedDict.createComputedOptions();\n    return {\n      ui,\n      ...usedDict,\n      computedOptions\n    };\n  },\n  computed: {\n    _active() {\n      if (this.computedOptions.length > 0) {\n        return this.computedOptions[0];\n      }\n      return {};\n    },\n    _inActive() {\n      if (this.computedOptions.length > 1) {\n        return this.computedOptions[1];\n      }\n      return {};\n    },\n    binding() {\n      const ui = uiContext.get();\n      return {\n        // @ts-ignore\n        [ui.switch.activeText]: this._active[this.dict?.label || \"label\"],\n        // @ts-ignore\n        [ui.switch.inactiveText]: this._inActive[this.dict?.label || \"label\"],\n        // @ts-ignore\n        [ui.switch.activeColor]: this._active[this.dict?.color || \"color\"],\n        // @ts-ignore\n        [ui.switch.inactiveColor]: this._inActive[this.dict?.color || \"color\"],\n        // @ts-ignore\n        [ui.switch.activeValue]: this._active[this.dict?.value || \"value\"],\n        // @ts-ignore\n        [ui.switch.inactiveValue]: this._inActive[this.dict?.value || \"value\"]\n      };\n    }\n  }\n});\n</script>\n", "<template>\n  <span>{{ doFormat }}</span>\n</template>\n\n<script lang=\"ts\">\nimport dayjs from \"dayjs\";\nimport { defineComponent } from \"vue\";\n/**\n * 日期格式化展示组件\n */\nexport default defineComponent({\n  name: \"FsDateFormat\",\n  props: {\n    /**\n     * 日期时间值，支持long,string,date等，由dayjs转化\n     */\n    modelValue: { required: false },\n    /**\n     *  输入格式化，不传则由dayjs自动转化\n     */\n    valueFormat: { type: String, default: undefined, required: false },\n    /**\n     *  输出格式化\n     */\n    format: { type: String, default: \"YYYY-MM-DD HH:mm:ss\", required: false }\n  },\n  data() {\n    return {\n      item: {}\n    };\n  },\n  computed: {\n    doFormat() {\n      if (this.modelValue == null || this.modelValue === \"\") {\n        return \"\";\n      }\n      let date = null;\n      if (this.valueFormat != null) {\n        date = dayjs(this.modelValue, this.valueFormat);\n      } else {\n        date = dayjs(this.modelValue);\n      }\n      return date.format(this.format);\n    }\n  } as any,\n  created() {},\n  methods: {}\n});\n</script>\n", "<template>\n  <component\n    :is=\"ui.treeSelect.name\"\n    ref=\"treeRef\"\n    :[ui.treeSelect.options]=\"computedOptions\"\n    :placeholder=\"computedPlaceholder\"\n    v-bind=\"computedBinding\"\n    @change=\"onSelectedChange\"\n  >\n    <template v-for=\"(value, key) of slots\" :key=\"key\" #[key]=\"scope\">\n      <fs-slot-render :slots=\"value\" :scope=\"scope\"></fs-slot-render>\n    </template>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, ref } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典树选择组件\n * 支持 a-tree-select 参数\n */\nexport default defineComponent({\n  name: \"FsDictTree\",\n  components: {},\n  props: {\n    /**\n     * 数据字典\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n    /**\n     * placeholder\n     */\n    placeholder: { type: String },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  // render () {\n  //   return this.renderFunc({ data: this.data, dataMap: this.dataMap, scope: this.scope, attrs: this.$attrs })\n  // },\n  setup(props, ctx) {\n    const { t } = useI18n();\n    const { ui } = useUi();\n    const computedPlaceholder = computed(() => {\n      return props.placeholder || t(\"fs.component.select.placeholder\");\n    });\n\n    let usedDict = useDict(props, ctx);\n\n    const slots = ctx.slots;\n\n    const computedOptions = usedDict.createComputedOptions();\n\n    const computedBinding = computed(() => {\n      const dict = usedDict.getDict();\n      return ui.treeSelect.buildOptionKeysNameBinding({\n        label: dict.label,\n        value: dict.value,\n        children: dict.children\n      });\n    });\n\n    const onSelectedChange = (value: any) => {\n      ctx.emit(\"change\", value);\n      if (value) {\n        const dict = usedDict.getDict();\n        if (dict && dict.dataMap) {\n          if (value instanceof Array) {\n            let selectedOptions = [];\n            for (let item of value) {\n              const opt = dict.dataMap[item];\n              if (opt) {\n                selectedOptions.push(opt);\n              }\n            }\n            ctx.emit(\"selected-change\", selectedOptions);\n          } else {\n            ctx.emit(\"selected-change\", dict.dataMap[value]);\n          }\n        }\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    };\n\n    const treeRef = ref();\n    return {\n      ui,\n      computedBinding,\n      computedPlaceholder,\n      ...usedDict,\n      computedOptions,\n      onSelectedChange,\n      slots,\n      treeRef\n    };\n  }\n});\n</script>\n", "<template>\n  <component\n    :is=\"ui.treeSelect.name\"\n    ref=\"treeRef\"\n    :[ui.treeSelect.options]=\"computedOptions\"\n    :placeholder=\"computedPlaceholder\"\n    v-bind=\"computedBinding\"\n    @change=\"onSelectedChange\"\n  >\n    <template v-for=\"(value, key) of slots\" :key=\"key\" #[key]=\"scope\">\n      <fs-slot-render :slots=\"value\" :scope=\"scope\"></fs-slot-render>\n    </template>\n  </component>\n</template>\n<script lang=\"ts\">\nimport { computed, defineComponent, ref } from \"vue\";\nimport { useDict } from \"../../use/use-dict\";\nimport { useI18n } from \"../../locale\";\nimport { useUi } from \"../../use\";\n\n/**\n * 字典树选择组件\n * 支持 a-tree-select 参数\n */\nexport default defineComponent({\n  name: \"FsDictTree\",\n  components: {},\n  props: {\n    /**\n     * 数据字典\n     */\n    dict: {},\n    /**\n     * 可选项，比dict.data优先级高\n     */\n    options: { type: Array },\n    /**\n     * placeholder\n     */\n    placeholder: { type: String },\n    /**\n     * 转换DictData\n     */\n    transformDictData: {\n      type: Function,\n      default: undefined\n    }\n  },\n  emits: [\n    /**\n     * 字典数据变化事件\n     */\n    \"dict-change\",\n\n    /**\n     * 选中值变化事件，可以获取到当前选中的option对象\n     */\n    \"selected-change\",\n    /**\n     * 值变化事件\n     */\n    \"change\"\n  ],\n  // render () {\n  //   return this.renderFunc({ data: this.data, dataMap: this.dataMap, scope: this.scope, attrs: this.$attrs })\n  // },\n  setup(props, ctx) {\n    const { t } = useI18n();\n    const { ui } = useUi();\n    const computedPlaceholder = computed(() => {\n      return props.placeholder || t(\"fs.component.select.placeholder\");\n    });\n\n    let usedDict = useDict(props, ctx);\n\n    const slots = ctx.slots;\n\n    const computedOptions = usedDict.createComputedOptions();\n\n    const computedBinding = computed(() => {\n      const dict = usedDict.getDict();\n      return ui.treeSelect.buildOptionKeysNameBinding({\n        label: dict.label,\n        value: dict.value,\n        children: dict.children\n      });\n    });\n\n    const onSelectedChange = (value: any) => {\n      ctx.emit(\"change\", value);\n      if (value) {\n        const dict = usedDict.getDict();\n        if (dict && dict.dataMap) {\n          if (value instanceof Array) {\n            let selectedOptions = [];\n            for (let item of value) {\n              const opt = dict.dataMap[item];\n              if (opt) {\n                selectedOptions.push(opt);\n              }\n            }\n            ctx.emit(\"selected-change\", selectedOptions);\n          } else {\n            ctx.emit(\"selected-change\", dict.dataMap[value]);\n          }\n        }\n      } else {\n        ctx.emit(\"selected-change\", null);\n      }\n    };\n\n    const treeRef = ref();\n    return {\n      ui,\n      computedBinding,\n      computedPlaceholder,\n      ...usedDict,\n      computedOptions,\n      onSelectedChange,\n      slots,\n      treeRef\n    };\n  }\n});\n</script>\n", "<template>\n  <div class=\"fs-table-select\">\n    <template v-if=\"!slots?.default && !viewMode\">\n      <fs-dict-select\n        v-bind=\"computedSelect\"\n        ref=\"dictSelectRef\"\n        :disabled=\"disabled\"\n        :readonly=\"readonly\"\n        :open=\"false\"\n        :dict=\"dict\"\n        @click=\"openTableSelect\"\n      />\n    </template>\n    <slot v-bind=\"scopeRef\"></slot>\n    <component :is=\"ui.formItem.skipValidationWrapper\">\n      <component :is=\"ui.dialog.name\" v-model:[ui.dialog.visible]=\"dialogOpen\" v-bind=\"computedDialogBinding\">\n        <div v-if=\"dialogOpen\" :style=\"{ width: '100%', height: height || '60vh' }\">\n          <fs-crud ref=\"crudRef\" v-bind=\"crudBinding\">\n            <template #header-top>\n              <div v-if=\"showCurrent !== false && !viewMode\" class=\"fs-table-select-current\">\n                当前选中：\n                <fs-values-format\n                  ref=\"valuesFormatRef\"\n                  v-model=\"selectedRowKeys\"\n                  :dict=\"dict\"\n                  :closable=\"true\"\n                  v-bind=\"computedValuesFormat\"\n                ></fs-values-format>\n              </div>\n            </template>\n          </fs-crud>\n        </div>\n        <template #[ui.dialog.footerSlotName]>\n          <component :is=\"ui.button.name\" v-if=\"!viewMode\" @click=\"dialogOpen = false\">取消</component>\n          <component :is=\"ui.button.name\" type=\"primary\" @click=\"onOk\">确认</component>\n        </template>\n      </component>\n    </component>\n  </div>\n</template>\n<script lang=\"tsx\" setup>\nimport { Dict, useCompute, useExpose, useFs, useFsAsync, useFsRef, useMerge, useUi } from \"../../use\";\nimport { computed, nextTick, ref, Ref, watch } from \"vue\";\nimport { CreateCrudOptions, DynamicallyCrudOptions } from \"../../d\";\nimport { useI18n } from \"../../locale\";\n\ntype FsTableSelectProps = {\n  /**\n   * modelValue\n   */\n  modelValue: any;\n  /**\n   * crudOptions创建方法\n   */\n  createCrudOptions: CreateCrudOptions;\n  /**\n   * crudOptions 覆盖配置\n   */\n  crudOptionsOverride?: DynamicallyCrudOptions;\n\n  /**\n   * 打开对话框前，可以修改配置\n   * @param options\n   */\n  beforeOpen?: (options: {\n    crudOptions: DynamicallyCrudOptions;\n    selectedRowKeys: any;\n    open: any;\n    opened: any;\n    [key: string]: any;\n  }) => Promise<void>;\n  /**\n   * 数据字典\n   * 必須配置`getNodesByValues`参数,你需要实现：根据id列表向后台请求多行数据并返回\n   * `dict.value必须与table.rowKey一致`\n   */\n  dict: Dict;\n  /**\n   * 选择框 fs-dict-select配置\n   */\n  select?: any;\n\n  /**\n   * 是否显示选择框\n   * 有时候你只是想要那个选择的Dialog，那么你可以隐藏select，然后自定义激活方式\n   */\n  showSelect?: boolean;\n  /**\n   * 对话框配置\n   */\n  dialog?: any;\n\n  /**\n   * 对话框中是否显示当前选中值\n   */\n  showCurrent?: boolean;\n  /**\n   * 当前选中值 fs-values-format组件 配置\n   */\n  valuesFormat?: any;\n\n  /**\n   * crud高度\n   */\n  height?: string;\n  /**\n   * 是否多选\n   */\n  multiple?: boolean; //单选还是多选\n  /**\n   * 跨页选中\n   */\n  crossPage?: boolean; //跨页选中\n\n  /**\n   * 可选,element-plus必传\n   */\n  rowKey?: string;\n\n  disabled?: boolean;\n\n  readonly?: boolean;\n\n  /**\n   * 值类型\n   */\n  valueType?: \"value\" | \"object\";\n\n  /**\n   * 是否查看模式\n   */\n  viewMode?: boolean;\n\n  /**\n   * table是否跟随窗口关闭而销毁\n   */\n  destroyOnClose?: boolean;\n};\nconst props = withDefaults(defineProps<FsTableSelectProps>(), {\n  crossPage: true,\n  rowKey: undefined,\n  disabled: false,\n  readonly: false,\n  height: undefined,\n  valuesFormat: undefined,\n  dialog: undefined,\n  select: undefined,\n  crudOptionsOverride: undefined,\n  valueType: \"value\",\n  showSelect: true,\n  showCurrent: true,\n  viewMode: false,\n  destroyOnClose: true\n});\n\nconst slots = defineSlots<{\n  /**`\n   * 默认插槽\n   * ```js\n   * scope = {\n   *  //是否已打开\n   *  opened:boolean,\n   *  //打开方法\n   *  open:()=>void\n   * }\n   * ```\n   */\n  default: any;\n}>();\n\nconst emits = defineEmits([\n  \"change\",\n  \"update:modelValue\",\n  /* 选中行变化事件 */\n  \"selected-change\",\n  /*对话框即将关闭*/\n  \"dialog-close\",\n  /*对话框已关闭*/\n  \"dialog-closed\"\n]);\nconst { ui } = useUi();\nconst { t } = useI18n();\nconst dictSelectRef = ref();\nconst valuesFormatRef = ref();\nconst dialogOpen = ref(false);\n\nconst { crudRef, crudBinding, context } = useFsRef();\n\nfunction initSelectedKeys(modelValue: any) {\n  if (modelValue == null || (Array.isArray(modelValue) && modelValue.length == 0)) {\n    selectedRowKeys.value = [];\n  } else {\n    if (props.multiple) {\n      selectedRowKeys.value = modelValue || [];\n    } else {\n      selectedRowKeys.value = [modelValue];\n    }\n    if (props.valueType === \"object\") {\n      selectedRowKeys.value = selectedRowKeys.value.map((item) => {\n        return props.dict.getValue(item);\n      });\n    }\n  }\n}\n\nconst { crudExpose } = useExpose({ crudRef, crudBinding });\nconst openTableSelect = async (openOptions: { crudOptions: DynamicallyCrudOptions }) => {\n  if (props.disabled || props.readonly || props.select?.disabled || props.select?.readonly) {\n    return;\n  }\n  if (props.dict == null) {\n    throw new Error(\"必须配置dict，且必须配置dict.getNodesByValues\");\n  }\n\n  const ret = await useFsAsync({\n    crudBinding,\n    crudRef,\n    createCrudOptions: props.createCrudOptions,\n    crudOptionsOverride: buildMergedCrudOptions(),\n    context,\n    crudExpose\n  });\n  dialogOpen.value = true;\n  initSelectedKeys(props.modelValue);\n  if (props.beforeOpen) {\n    await props.beforeOpen({\n      crudOptions: openOptions.crudOptions,\n      ...getScopeContext()\n    });\n  }\n  if (openOptions) {\n    ret.appendCrudOptions(openOptions.crudOptions);\n  }\n\n  await nextTick();\n  await crudExpose.doRefresh();\n  return ret;\n};\n\nconst computedValuesFormat = computed(() => {\n  return {\n    ...props.valuesFormat\n  };\n});\n\nconst computedSelect = computed(() => {\n  const updateKey = `onUpdate:${ui.select.modelValue}`;\n\n  let value = props.modelValue;\n  if (props.valueType === \"object\" && props.modelValue) {\n    if (props.multiple) {\n      value = props.modelValue.map((item: any) => {\n        return props.dict.getValue(item);\n      });\n    } else {\n      value = props.dict.getValue(props.modelValue);\n    }\n  }\n  return {\n    [ui.select.modelValue]: value,\n    [updateKey]: (value: any) => {\n      emits(\"update:modelValue\", value);\n    },\n    [ui.select.clearable]: true,\n    ...ui.select.buildMultiBinding(props.multiple),\n    show: false,\n    ...props.select\n  };\n});\n\nconst computedDialogBinding = computed(() => {\n  const base = ui.dialog.buildProps({\n    title: props.viewMode ? t(\"fs.extends.tableSelect.view\") : t(\"fs.extends.tableSelect.select\"),\n    width: \"80%\"\n  });\n  return merge(base, props.dialog);\n});\n\nwatch(\n  () => {\n    return props.modelValue;\n  },\n  async (value) => {\n    if (value === selectedRowKeys.value) {\n      return;\n    }\n    initSelectedKeys(value);\n    await nextTick();\n    await props.dict.appendByValues(selectedRowKeys.value);\n    // dictSelectRef.value.reloadDict();\n  }\n);\nconst selectedRowKeys: Ref<any[]> = ref([]);\n\nfunction getRowKey() {\n  return props.rowKey || crudBinding.value.table.rowKey || \"id\";\n}\nconst refreshing = ref(false);\n\nfunction buildMergedCrudOptions() {\n  let selectionOptions = ui.table.buildSelectionCrudOptions({\n    crossPage: props.crossPage,\n    selectOnClickRow: true,\n    getRowKey,\n    getPageData() {\n      return crudBinding.value.data;\n    },\n    useCompute: useCompute,\n    multiple: props.multiple,\n    selectedRowKeys,\n    onSelectedKeysChanged: async (changed) => {\n      selectedRowKeys.value = [...changed];\n      await nextTick();\n      await props.dict.appendByValues(selectedRowKeys.value);\n      // if (valuesFormatRef.value) {\n      //   valuesFormatRef.value.reloadDict();\n      // }\n    }\n  });\n  const crudOptions = {\n    table: {\n      async onRefreshed() {\n        if (ui.table.setSelectedRows) {\n          refreshing.value = true;\n          await nextTick();\n          await nextTick();\n          const baseTableRef = crudExpose.getBaseTableRef();\n          ui.table.setSelectedRows({\n            getRowKey,\n            multiple: props.multiple,\n            tableRef: baseTableRef,\n            selectedRowKeys\n          });\n          refreshing.value = false;\n        }\n      }\n    }\n  };\n  return merge(crudOptions, selectionOptions, props.crudOptionsOverride);\n}\n\nconst { merge } = useMerge();\n\n// watch(\n//   () => {\n//     return props.crudOptionsOverride;\n//   },\n//   async (value, oldValue) => {\n//     if (JSON.stringify(value) === JSON.stringify(oldValue)) {\n//       return;\n//     }\n//     const cur = crudBinding.value?.pagination[ui.pagination.currentPage];\n//     appendCrudOptions(value);\n//     if (crudRef.value) {\n//       crudBinding.value.pagination[ui.pagination.currentPage] = cur;\n//       await crudExpose.doRefresh({ goFirstPage: false });\n//     }\n//   }\n// );\n\nasync function onOk() {\n  if (props.dict.loading) {\n    return;\n  }\n  let value = null;\n  let rows = null;\n  if (selectedRowKeys.value?.length > 0) {\n    value = [...selectedRowKeys.value];\n\n    rows = value.map((item) => {\n      return props.dict.getDictMap()[item];\n    });\n    if (props.valueType === \"object\") {\n      value = rows;\n    }\n\n    if (props.multiple !== true && value.length > 0) {\n      value = value[0];\n    }\n  }\n\n  if (!props.viewMode) {\n    //非view模式下，需要更新value\n    emits(\"update:modelValue\", value);\n    emits(\"change\", value);\n    emits(\"selected-change\", rows);\n  }\n  dialogOpen.value = false;\n\n  let scope = {\n    value,\n    rows,\n    selectedRowKeys: selectedRowKeys.value\n  };\n  emits(\"dialog-close\", scope);\n  await nextTick();\n  emits(\"dialog-closed\", scope);\n}\n\nconst getScopeContext = () => {\n  return {\n    opened: dialogOpen,\n    open: openTableSelect,\n    selectedRowKeys,\n    dictSelectRef,\n    valuesFormatRef,\n    crudRef,\n    crudBinding,\n    crudExpose\n  };\n};\n\nconst scopeRef = ref(getScopeContext());\ndefineExpose(scopeRef.value);\n</script>\n<style lang=\"less\">\n.fs-table-select {\n  width: 100%;\n  .el-dialog__body {\n    padding-top: 0;\n    padding-bottom: 0;\n  }\n}\n.fs-table-select-current {\n  //border: 1px solid #eee;\n  //border-radius: 3px;\n  padding: 10px 0;\n}\n</style>\n", null],
  "mappings": "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M;AAJxB,IAKMC,KAAoB,CAACD,IAAUF,IAAiBC,EAAM,EAAE,QAAQ,CAACG,MAAYA,CAAO,EAAE,IAAI,CAACxO,MAAQ,KAAKA,CAAG,EAAE;AALnH,IAMM3rB,KAAS;EACb,QAAQi6B;EACR,eAAeF;EACf,MAAMC;AACR;AACA,SAASI,GAAWr6B,GAAW;AAC7B,SAAOm6B,GAAkB,QAAQn6B,CAAS,MAAM;AAClD;AACA,IAAMs6B,KAAO;EACX;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACF;AACA,SAASC,GAAUnqD,GAAM;AACvB,SAAOkqD,GAAK,SAASlqD,CAAI;AAC3B;AACA,SAASoqD,GAAapqD,GAAM;AAC1B,SAAO,CAAC,oBAAoB,iBAAiB,EAAE,SAASA,CAAI;AAC9D;AACA,SAASqqD,GAAgB1oD,GAAO;AAC9B,SAAO,CAAC,MAAM,SAAS,QAAQ,OAAO,EAAE,SAASA,CAAK,KAAKA,EAAM,WAAW,OAAO,KAAKA,EAAM,WAAW,OAAO,KAAKA,EAAM,WAAW,IAAI;AAC5I;AACA,SAAS2oD,GAAQx2B,GAAS;AACxB,SAAOA,EAAQ,OAAO,CAACvtB,GAAK,CAACnD,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",
  "names": ["item", "storage", "storage", "id", "item", "config", "config", "item", "storage", "localStorage", "id", "simpleNames", "send", "item", "render", "id", "_window", "item", "render", "defaultCrudOptions", "ctx", "opts", "ct", "name", "computed", "ui", "uiContext", "trigger", "doClose", "reset", "submit", "total", "getCallerInfo", "_a", "blank", "args", "logInfo", "logWarn", "logError", "error", "warn", "info", "debug", "callerInfo", "log", "caller", "logger", "setLogger", "level", "isEmpty", "value", "isAllEmpty", "values", "hasEmpty", "StringUtils", "trace", "createAsyncComponent", "es", "defineAsyncComponent", "retry", "fail", "attempts", "installAsyncComponent", "app", "options", "asyncComponent", "installAsyncComponents", "modules", "excludes", "pickNameExp", "transform", "imports", "transformFromGlob", "_", "item", "key", "installSyncComponents", "components", "result", "loadAsyncComponentFromGlob", "map", "loadComponentFromGlob", "vite", "TableStore", "__publicField", "$router", "tableName", "keyType", "prefix", "saved", "table", "$route", "rxArrIndex", "rxVarName", "rxQuot", "joinPaths", "paths", "acc", "p", "getPathToString", "pathToString", "path", "prefixes", "type", "has", "isObject", "getIterate", "iterate", "obj", "callback", "broken", "breakIt", "describeValue", "parent", "cp", "i", "children", "contextReader", "ContextReader", "err", "scp", "getElements", "getOwnChildren", "childrenPath", "strChildrenPath", "strChildPathPrefix", "res", "val", "strChildPath", "pathFormatString", "childKey", "afterIterate", "curParent", "isObjectEmpty", "ownPropertiesOnly", "getEachDeep", "eachDeep", "forEachDeep", "deepdash", "dash", "ref", "skips", "keys", "pAttrs", "utils", "strings", "store", "antdvColspan", "labelSpan", "assist", "useUi", "button", "cascader", "zhCN", "en", "t", "arg", "index", "I18n", "instance", "locales", "message", "fsClone", "i18n", "useI18n", "e", "module", "this", "n", "r", "s", "a", "dayjs", "advancedFormat", "doFormat", "date", "format", "dateFormatter", "daterangeFormatter", "datetimerangeFormatter", "f", "o", "u", "d", "weekday", "localeData", "weekOfYear", "date$1", "buildDateValue", "scope", "row", "el", "number$1", "phone", "column", "ret", "select", "text", "tree", "typeList", "defaultTypeCreators", "defaultTypes", "getTypes", "getType", "addTypes", "newTypes", "types$1", "creator", "_sfc_main$y", "defineComponent", "pageRef", "onMounted", "_hoisted_1", "_hoisted_2", "_hoisted_3", "_hoisted_4", "$slots", "_ctx", "_cache", "$props", "$setup", "$data", "$options", "_openBlock", "_createElementBlock", "_renderSlot", "_createCommentVNode", "_createElementVNode", "isUnMergeable", "srcValue", "UnMergeable", "isRef", "isUnCloneable", "merge", "target", "sources", "customizer", "objValue", "found", "cloneDeep", "UnMergeable$1", "cloneable", "useMerge", "isAsyncCompute", "AsyncComputeValue", "isSyncCompute", "ComputeValue", "findComputeValues", "isAsync", "foundMap", "checkFunc", "context", "exclude", "isShallow", "doAsyncCompute", "dependAsyncValues", "getContextFn", "asyncValueMap", "setAsyncComputeValue", "asyncValuesMap", "valueRef", "doComputed", "getTargetFunc", "userComputedFn", "dependValues", "asyncCount", "syncCount", "computeFn", "compute", "asyncFn", "defaultValue", "asyncRef", "computedValue", "watch", "asyncCompute", "useCompute", "Constants", "mergeColumnPlugins", "registerMergeColumnPlugin", "plugin", "remove", "push", "sort", "b", "order", "mergeColumnDict", "dict", "component", "form", "mergeColumnType", "typeChain", "Array", "base", "typeOptions", "types", "mergeColumnPlugin", "handle", "dictPlugin", "viewFormUseCellComponentPlugin", "columnProps", "crudOptions", "settings", "viewFormUseCellComponent", "viewFormColumn", "includes", "render", "_createVNode", "viewForm", "setupOptionsColumns", "columns", "userOptions", "initedColumns", "forEach", "buildOptionsColumnsFlatMap", "buildTableColumnsFlatMap", "buildTableColumn", "colTemplate", "tableColumn", "title", "buildTableColumns", "wrapperCustomComponent", "reactive", "shallowRef", "tableColumns", "doColumnsSort", "doArraySort", "arr", "sortBy", "orderDefault", "list", "size", "columnsArr", "columnsMap", "buildFormColumns", "columnsFlatMap", "formType", "formColumns", "formColumn", "buildForm", "baseOptions", "onComplete", "buildSearchForm", "searchColumns", "formColumnsForSearch", "copyProps", "searchCopyFormProps", "copyFromCompositionColumn", "field", "common", "def", "pick", "search", "buildFormOptions", "defaultOptions", "commonOptions", "crudExpose", "buildColumns", "toolbar", "columnsFilter", "originalColumns", "addForm", "editForm", "disabled", "editable", "forEachTableColumns", "forEachColumns", "useColumns", "seed", "FsFormWrapperList", "createFormWrapper", "id", "container", "resolve", "reject", "vNode", "createVNode", "FsFormWrapper", "vm", "useFormWrapper", "pd", "inject", "openDialog", "openCrudFormDialog", "formOptions", "doMerge", "useEditable", "props", "crudBinding", "_c", "_b", "onEnabled", "editableOpts", "editableId", "editableRow", "isAdd", "setData", "rowData", "data", "useExpose", "crudRef", "formWrapperProvider", "checkCrudRef", "checkCrudBindingRef", "formWrapperRef", "formRef", "records", "toRaw", "valueBuilderColumns", "col", "isArray", "pageQuery", "page", "searchFormData", "query", "userPageQuery", "userPageRes", "pageRes", "currentPage", "pageSize", "fsTableRef", "no", "tableRef", "rowKey", "removeBinding", "isLocal", "removeScope", "formOpts", "mode", "xxForm", "loadFsExportUtil", "loadFsImportUtil", "defaultDataFormatter", "originalRow", "nodes", "label", "node", "exportTable", "unref", "exportCol", "exportUtil", "originalData", "searchParams", "clone", "mapping", "expOpts", "importTable", "importData", "isEditable", "crudOptionsPlugins", "registerCrudOptionsPlugin", "getCrudOptionsPlugin", "selection", "getRowKey", "changed", "nextTick", "useCrud", "expose", "doRefresh", "doValueResolve", "usePagination", "current", "useFormSubmit", "_d", "useRowHandle", "useSearch", "baseTableRef", "useTabs", "formData", "useToolbar", "exporting", "original", "updateColumns", "old", "oldColumn", "newColumn", "newColumns", "useTable", "sortChange", "isServerSort", "prop", "asc", "oldSort", "useActionbar", "activeRows", "afterUseCrud", "bindings", "rebuildCrudBindings", "plugins", "before", "pluginOptions", "resetCrudOptions", "appendCrudOptions", "overOptions", "newOptions", "appendCrudBinding", "useFsImpl", "createCrudOptions", "crudExposeRef", "createCrudOptionsRet", "initCrud", "useCrudProps", "useCrudRet", "useFs", "useFsAsync", "useFsRef", "useDict", "vModel", "shallowReactive", "createComputedOptions", "option", "getValue", "getLabel", "getDict", "getScope", "getCurrentScope", "proxy", "getCurrentInstance", "loadDict", "reload", "reloadDict", "clearDict", "watchValue", "getDictData", "getPropValue", "attr", "removePropValue", "getChildren", "perf", "warned", "PROCESS", "emitWarning", "msg", "code", "fn", "AC", "AS", "warnACPolyfill", "reason", "printACPolyfillWarning", "shouldWarn", "isPosInt", "getUintArray", "max", "ZeroArray", "_Stack", "HeapCls", "__privateGet", "_constructing", "__privateSet", "__privateAdd", "Stack", "_LRUCache", "_initializeTTLTracking", "_initializeSizeTracking", "_indexes", "_rindexes", "_isValidIndex", "_evict", "_backgroundFetch", "_isBackgroundFetch", "_connect", "_moveToTail", "_max", "_maxSize", "_dispose", "_disposeAfter", "_fetchMethod", "_size", "_calculatedSize", "_keyMap", "_keyList", "_valList", "_next", "_prev", "_head", "_tail", "_free", "_disposed", "_sizes", "_starts", "_ttls", "_hasDispose", "_hasFetchMethod", "_hasDisposeAfter", "_updateItemAge", "_statusTTL", "_setItemTTL", "_isStale", "_removeItemSize", "_i", "_addItemSize", "_s", "_st", "_requireSize", "_k", "_v", "sizeCalculation", "ttl", "ttlResolution", "ttlAutopurge", "updateAgeOnGet", "updateAgeOnHas", "allowStale", "dispose", "disposeAfter", "noDisposeOnSet", "noUpdateTTL", "maxSize", "maxEntrySize", "fetchMethod", "noDeleteOnFetchRejection", "noDeleteOnStaleGet", "allowStaleOnFetchRejection", "allowStaleOnFetchAbort", "ignoreFetchAbort", "UintArray", "__privateMethod", "initializeSizeTracking_fn", "initializeTTLTracking_fn", "c", "isBackgroundFetch_fn", "k", "backgroundFetch_fn", "moveToTail_fn", "indexes_fn", "rindexes_fn", "getOptions", "v", "thisp", "deleted", "entry", "start", "remain", "age", "setOptions", "status", "evict_fn", "__privateWrapper", "oldVal", "oldValue", "dt", "task", "_e", "hasOptions", "peekOptions", "fetchOptions", "forceRefresh", "signal", "stale", "isStale", "staleVal", "fetching", "pi", "ni", "ttls", "starts", "cachedNow", "getNow", "sizes", "isValidIndex_fn", "free", "head", "ac", "fetchOpts", "cb", "updateCache", "aborted", "ignoreAbort", "fetchFail", "bf", "eb", "er", "allowStaleAborted", "noDelete", "pcall", "rej", "fmp", "connect_fn", "LRUCache", "DictGlobalCache", "setDictRequest", "request", "dictRequest", "Dict", "cacheKey", "cached", "call", "notify", "toFetchValues", "getFromRemote", "url", "maybeArr", "dictData", "config", "useDictDefine", "useTypes", "dragModalForAntdv", "dialogEl", "dialogHeaderEl", "dragDom", "sty", "X", "Y", "styL", "styT", "l", "dragModalForNaive", "dragModal", "useDrag", "GlobalConfig", "_sfc_main$x", "computedInnerStyle", "computedBodyStyle", "_sfc_render", "_normalizeStyle", "_sfc_main$w", "_component_fs_container", "_resolveComponent", "_createBlock", "_withCtx", "_hoisted_5", "_sfc_main$v", "getCrudBinding", "searchShow", "cardComponentName", "_createSlots", "_resolveDynamicComponent", "_isSlot", "Object", "prototype", "toString", "_isVNode", "inheritAttrs", "String", "default", "required", "icon", "Function", "iconRight", "circle", "Boolean", "tooltip", "undefined", "buttonProps", "className", "setup", "iconRender", "iconClass", "_mergeProps", "renderBtn", "isIconSlot", "isIconProp", "iconProp", "slots", "isCircle", "buttonComp", "resolveDynamicComponent", "btnProps", "class", "attrs", "h", "tooltipComp", "computeTooltipProps", "omit", "triggerSlotName", "require", "computedRenderFunc", "indexOf", "startsWith", "IconComp", "replace", "isComponent", "_sfc_main$u", "_normalizeClass", "_sfc_main$t", "symbolId", "getStyle", "spin", "_sfc_main$s", "labelAttrs", "_createTextVNode", "_toDisplayString", "loading", "icons", "refresh", "_sfc_main$r", "mergeEventHandles", "eventName", "events", "$event", "event", "htmlTags", "modelValue", "on", "undefineToNull", "emits", "provide", "emit", "targetRef", "allAttrs", "trim", "number", "onUpdateModelValueName", "tmp", "Number", "isNaN", "handler", "camelCase", "childrenRender", "createChildren", "computedInputComp", "isAsyncComponent", "input", "inputComp", "resolveComponent", "childrenRendered", "getTargetRef", "getTargetRefAsync", "getTargetRefSync", "Promise", "getTargetRefDelay", "count", "setTimeout", "Error", "_slot", "merged", "mergeProps", "markRaw", "functional", "renderFunc", "_sfc_main$q", "createInitialForm", "defValue", "initialForm", "setFormData", "getComponentRef", "computedColumns", "doValueBuilder", "getFormData", "valueChange", "doValueChange", "mergeCol", "buildItemScope", "formItemRefs", "getFormItemRef", "groupActiveKey", "groupItem", "computedGroup", "group", "groupedKeys", "wrapper", "computedDefaultColumns", "getFormRef", "entries", "initialValue", "validRef", "errorsRef", "fillGroupError", "fieldErrors", "validateScope", "validateErrors", "submitScope", "formItemShow", "groupItemShow", "newVal", "isDirty", "after", "mergedSlots", "display", "_Fragment", "_renderList", "_component_fs_form_item", "set", "groupKey", "slotName", "_component_fs_render", "_sfc_main$p", "FsRender", "componentRenderRef", "scopeFunc", "updateModelValue", "computedHelperPosition", "computedHelperTooltip", "computedKey", "computedLabel", "computedLabelIsRender", "_component_fs_component_render", "_normalizeProps", "_hoisted_6", "formSlot", "_hoisted_7", "_component_fs_slot_render", "_component_fs_form_helper", "_sfc_main$o", "helper", "inner", "innerWrapper", "zIndex", "formWrapperOpen", "formWrapperIs", "formWrapperBind", "formWrapperOpts", "emitOnClosed", "emitOnOpened", "beforeCloseCustom", "formWrapperId", "Math", "floor", "random", "formWrapperIdClass", "formWrapperSlots", "buildEvent", "wrapperBindRef", "formOptionsRef", "close", "toggleFullscreen", "open", "onOpen", "is", "customClassKey", "formWrapper", "customClass", "onClosed", "onOpened", "beforeClose", "fullscreen", "doSaveRemind", "saveRemind", "needSave", "messageBox", "confirm", "confirmButtonText", "cancelButtonText", "elementBeforeCloseFix", "done", "then", "draggable", "getModal", "document", "querySelector", "onValueChange", "getComputeContext", "computedCustomButtons", "buttons", "computedButtons", "defBtns", "cancel", "ok", "buttonsArr", "onClick", "click", "exposed", "fullscreenEnabled", "endsWith", "get", "innerBind", "buildInnerBind", "getInnerWrapper", "innerContainerSelector", "classList", "add", "console", "useSlots", "_slots", "slotsRender", "_self", "titleSlotName", "fullScreenIcon", "fullScreen", "unFullScreen", "show", "hasContentWrap", "contentWrap", "subChildren", "contentWrapComp", "visible", "vClosed", "buildOnClosedBind", "vCustomClass", "vFullScreen", "vStyle", "formWrapperComp", "__default__", "__MACROS_defineComponent", "formWrapperList", "useProviders", "searchRef", "getSearchRef", "getSearchFormData", "getSearchValidatedFormData", "setSearchFormData", "mergeForm", "searchRet", "defaultTabs", "_g", "_f", "slotFilter", "ctxSlots", "keyPrefix", "useFixedHeight", "containerRef", "maxHeightRef", "computeBodyHeight", "tableDom", "headDom", "tableHeight", "headHeight", "utilLog", "watchBodyHeightChange", "tableWrapperDom", "toolbarRef", "tablePropRef", "toRef", "computedTable", "fixedHeight", "computedToolbar", "computedCellSlots", "computedFormSlots", "computedSearchSlots", "computedToolbarSlots", "computedClass", "clazz", "innerWrapperRef", "isFormInner", "_sfc_main$m", "tabs", "_component_fs_form_wrapper", "_component_fs_actionbar", "_guardReactiveProps", "_component_fs_tabs_filter", "tabsBinding", "_component_fs_table", "rowHandle", "_sfc_main$l", "doClick", "pickedProps", "computeProps", "computedHandleBtns", "mergedBtns", "btns", "computedDropdownAtLeast", "isDropdownBtn", "hasDropdownBtn", "doDropdownItemClick", "btn", "computedDropdownBinding", "binding", "_component_fs_icon", "_component_fs_button", "_withModifiers", "_extends", "source", "_inheritsLoose", "subClass", "superClass", "_setPrototypeOf", "_getPrototypeOf", "_isNativeReflectConstruct", "_construct", "Parent", "Class", "Constructor", "_isNativeFunction", "_wrapNativeSuper", "Wrapper", "formatRegExp", "warning", "errors", "convertFieldsError", "fields", "template", "_len", "_key", "len", "str", "x", "isNativeStringType", "isEmptyValue", "asyncParallelArray", "func", "results", "arrLength", "asyncSerialArray", "next", "flattenObjArr", "objArr", "AsyncValidationError", "_Error", "_this", "asyncMap", "_pending", "flattenArr", "firstFields", "objArrKeys", "objArrLength", "pending", "isErrorObj", "complementError", "rule", "oe", "fieldValue", "deepMerge", "required$1", "whitespace", "urlReg", "getUrlRegex", "word", "v4", "v6seg", "v6", "v46Exact", "v4exact", "v6exact", "ip", "protocol", "auth", "ipv4", "ipv6", "host", "domain", "tld", "port", "regex", "pattern$2", "type$1", "custom", "ruleType", "range", "min", "spRegexp", "num", "ENUM$1", "enumerable$1", "pattern$1", "_pattern", "rules", "string", "validate", "method", "_boolean", "regexp", "integer", "floatFn", "array", "object", "ENUM", "enumerable", "pattern", "dateObject", "any", "validators", "newMessages", "cloned", "messages", "Schema", "descriptor", "_proto", "_messages", "source_", "oc", "_this2", "complete", "_errors", "messages$1", "series", "z", "errorFields", "doIt", "deep", "addFullField", "schema", "errorList", "filledErrors", "fieldsSchema", "paredFieldsSchema", "fieldSchema", "fieldSchemaList", "errs", "finalErrors", "messageIndex", "validator", "createValidator", "editableCells", "curDesc", "eachTree", "useTableData", "getData", "tableData", "editableRows", "getIdFromRow", "getEditableIdFromRow", "editableEachRows", "cells", "editableEachCells", "cell", "createEditableCell", "tableRow", "setValue", "updateCell", "showAction", "enabled", "formItem", "setDefaultValue", "rowKeyValue", "createEditableRow", "doSave", "newRow", "saveRow", "p3", "child", "nextEditableId", "editableIdGen", "setupEditable", "tmpRows", "buildThinData", "thinData", "thinRow", "oldThinData", "getEditableCell", "active", "inactive", "saveEach", "cancelAll", "persist", "resume", "hasDirty", "dirty", "addIndex", "setDefaultForm", "formColumnConfigs", "addRow", "getEditableRow", "removeTableRowByEditableId", "removeRow", "activeCols", "cols", "getActiveRows", "rows", "hasError", "removeDataEditableId", "getCleanTableData", "useComponentRefProvider", "componentsRef", "getter", "setter", "buildTableSlots", "sortedColumns", "renderRowHandle", "renderCellComponent", "tableColumnComp", "tableColumnGroupComp", "tableColumnGroup", "tableSlots", "buildColumn", "cellSlots", "cellSlotName", "currentTableColumnComp", "subColumns", "subColumn", "newItem", "rowHandleSlots", "dataIndex", "childOptions", "customRender", "renderMethod", "newCol", "rebuildRenderScope", "cellRender", "conditionalRender", "componentRefs", "length", "cellRef", "currentRef", "scrollTo", "top", "tableComp", "tableColumnCI", "editableWrap", "onRowHandle", "onChange", "onSortChange", "sorter", "onFilterChange", "filters", "onPagination", "bubbleUp", "rowHandleSlotsName", "newScope", "setRef", "rowRefs", "editableCell", "readonly", "renderMode", "dataSource", "computedBinding", "computedTableSlots", "tableRender", "vLoading", "resolveDirective", "withDirectives", "computedComponent", "computedPropsComponent", "computedTitle", "showTitle", "computedCellContentRender", "slot", "cellContentRender", "match", "formatter", "columnKey", "computedForm", "getFormRefFunc", "getForm", "computedIsEditable", "editingUpdate", "onSubmit", "save", "onCancel", "isChanged", "edit", "inputComponent", "isEditing", "activeTrigger", "methods", "$refs", "targetInputRef", "__props", "__emit", "doSubmit", "doCancel", "getValidateErrorMessage", "_sfc_main$j", "sortArr", "sortedButtons", "SetFormDataOptions", "ColumnsFilterProvideKey", "transformColumnsTree", "currentColumns", "originalColumnsMap", "_text", "buildColumnFilterItem", "transformToTableColumns", "setCurrentValue", "do_save", "clearThisStorage", "noSave", "saveOptionsToStorage", "doEmit", "computedOriginalColumns", "simpleSubmit", "simpleReset", "storageTableStore", "getStorageTable", "remoteStorage", "route", "useRoute", "storedOptions", "getOptionsFromStorage", "getColumnsHash", "hash", "init", "storeHash", "update", "change", "__expose", "buildText", "element", "_sfc_main$h", "FsTableColumnsFilter", "columnsFilterRef", "defaultButtons", "defaultButtonsKey", "popoverVisible", "ownKeys", "enumerableOnly", "symbols", "sym", "_objectSpread2", "_defineProperty", "_typeof", "_objectWithoutPropertiesLoose", "excluded", "sourceKeys", "_objectWithoutProperties", "sourceSymbolKeys", "version", "userAgent", "IE11OrLess", "Edge", "FireFox", "Safari", "IOS", "ChromeForAndroid", "captureMode", "off", "matches", "selector", "getParentOrHost", "closest", "includeCTX", "R_SPACE", "toggleClass", "state", "css", "style", "matrix", "selfOnly", "appliedTransforms", "matrixFn", "find", "tagName", "iterator", "getWindowScrollingElement", "scrollingElement", "getRect", "relativeToContainingBlock", "relativeToNonStaticParent", "undoScale", "elRect", "left", "bottom", "right", "height", "width", "containerRect", "elMatrix", "scaleX", "scaleY", "isScrolledPast", "elSide", "parentSide", "getParentAutoScrollElement", "elSideVal", "parentSideVal", "getChild", "childNum", "includeDragEl", "currentChild", "Sortable", "lastChild", "last", "getRelativeScrollOffset", "offsetLeft", "offsetTop", "winScroller", "indexOfObject", "includeSelf", "elem", "gotSelf", "elemCSS", "extend", "dst", "src", "isRectEqual", "rect1", "rect2", "_throttleTimeout", "throttle", "ms", "cancelThrottle", "scrollBy", "y", "Polymer", "$", "expando", "AnimationStateManager", "animationStates", "animationCallbackId", "fromRect", "childMatrix", "animating", "animationTime", "time", "toRect", "prevFromRect", "prevToRect", "animatingRect", "targetMatrix", "calculateRealTime", "currentRect", "duration", "translateX", "translateY", "repaint", "defaults", "PluginManager", "sortable", "evt", "eventNameGlobal", "pluginName", "initialized", "modified", "eventProperties", "modifiedValue", "dispatchEvent", "_ref", "rootEl", "targetEl", "cloneEl", "toEl", "fromEl", "oldIndex", "newIndex", "oldDraggableIndex", "newDraggableIndex", "originalEvent", "putSortable", "extraEventProperties", "onName", "allEventProperties", "_excluded", "pluginEvent", "dragEl", "parentEl", "ghostEl", "nextEl", "lastDownEl", "cloneHidden", "moved", "_hideGhostForTarget", "_unhideGhostForTarget", "_dispatchEvent", "activeGroup", "awaitingDragStarted", "ignoreNextClick", "sortables", "tapEvt", "touchEvt", "lastDx", "lastDy", "tapDistanceLeft", "tapDistanceTop", "lastTarget", "lastDirection", "pastFirstInvertThresh", "isCircumstantialInvert", "targetMoveDistance", "ghostRelativeParent", "ghostRelativeParentInitialScroll", "_silent", "savedInputChecked", "documentExists", "PositionGhostAbsolutely", "CSSFloatProperty", "supportDraggable", "supportCssPointerEvents", "_detectDirection", "elCSS", "elWidth", "child1", "child2", "firstChildCSS", "secondChildCSS", "firstChildWidth", "secondChildWidth", "touchingSideChild2", "_dragElInRowColumn", "dragRect", "targetRect", "vertical", "dragElS1Opp", "dragElS2Opp", "dragElOppLength", "targetS1Opp", "targetS2Opp", "targetOppLength", "_detectNearestEmptySortable", "threshold", "rect", "insideHorizontally", "insideVertically", "_prepareGroup", "toFn", "pull", "to", "from", "sameGroup", "otherGroup", "originalGroup", "nearestEmptyInsertDetectEvent", "nearest", "_checkOutsideTargetEl", "dataTransfer", "preventOnFilter", "touch", "originalTarget", "filter", "_saveInputCheckedState", "criteria", "ownerDocument", "dragStartFn", "_disableDraggable", "_nextTick", "fallback", "inserted", "fallbackTolerance", "fallbackOffset", "ghostMatrix", "relativeScrollOffset", "dx", "dy", "cssMatrix", "revert", "activeSortable", "isOwner", "canSort", "fromSortable", "completedFired", "dragOverEvent", "extra", "completed", "_onMove", "capture", "insertion", "elLastChild", "_ghostIsLast", "_ghostIsFirst", "firstChild", "direction", "targetBeforeFirstSwap", "differentLevel", "differentRowCol", "side1", "scrolledPastTop", "scrollBefore", "_getSwapDirection", "sibling", "dragIndex", "nextSibling", "moveVector", "_unsilent", "_cancelNextTick", "_globalDragOver", "_generateId", "useAnimation", "items", "willInsertAfter", "onMoveFn", "retVal", "spacer", "swapThreshold", "invertedSwapThreshold", "invertSwap", "isLastTarget", "mouseOnAxis", "targetLength", "targetS1", "targetS2", "invert", "_getInsertDirection", "sum", "root", "inputs", "idx", "autoScrolls", "scrollEl", "scrollRootEl", "scrolling", "lastAutoScrollX", "lastAutoScrollY", "touchEvt$1", "pointerElemChangedInterval", "AutoScrollPlugin", "AutoScroll", "_ref2", "clearPointerElemChangedInterval", "clearAutoScrolls", "autoScroll", "ogElemScroller", "newElem", "isFallback", "sens", "speed", "scrollThisInstance", "scrollCustomFn", "layersOut", "currentParent", "canScrollX", "canScrollY", "scrollWidth", "scrollHeight", "scrollPosX", "scrollPosY", "vx", "vy", "scrollOffsetY", "scrollOffsetX", "drop", "dispatchSortableEvent", "hideGhostForTarget", "unhideGhostForTarget", "toSortable", "Revert", "_ref3", "Remove", "_ref4", "parentSortable", "__defProp", "__defProps", "__getOwnPropDescs", "__getOwnPropSymbols", "__hasOwnProp", "__propIsEnum", "__defNormalProp", "__spreadValues", "__spreadProps", "removeNode", "insertNodeAt", "fatherNode", "position", "refNode", "getConsole", "console$1", "cache", "camelize", "manageAndEmit$1", "emit$1", "manage$1", "eventHandlerNames", "events2", "isReadOnly", "tags", "isHtmlTag", "isTransition", "isHtmlAttribute", "project", "getComponentAttributes", "$attrs", "componentData", "attributes", "createSortableOption", "callBackBuilder", "getValidSortableEntries", "eventType", "eventBuilder", "value2", "getHtmlElementFromNode", "addContext", "domElement", "getContext", "ComponentStructure", "header", "defaultNodes", "footer", "realList", "h2", "tag", "_isRootComponent", "domIndex", "domChildren", "firstDomListElement", "indexFirstDomListElement", "element2", "getSlot", "slotValue", "computeNodes", "getKey", "normalizedList", "getRootInformation", "transition", "externalComponent", "TransitionGroup", "computeComponentStructure", "evtName", "evtData", "manage", "originalElement", "manageAndEmit", "delegateCallBack", "draggingElement", "draggableComponent", "componentStructure", "$el", "sortableOptions", "targetDomElement", "itemKey", "newOptionValue", "_sortable", "htmElement", "onList", "newList", "spliceList", "updatePosition", "related", "destination", "added", "removed", "relatedContext", "currentDomIndex", "currentIndex", "move", "futureIndex", "draggedContext", "sendEvent", "_sfc_main$g", "onDraggableMove", "draged", "sorted", "leftIndex", "rightIndex", "minNotIndex", "maxNotIndex", "buildUpdateKey", "updateChecked", "updateChildren", "updateParent", "onCheckChanged", "fixedChange", "drawerBind", "checkAll", "onCheckAllChange", "checkAllBind", "showLength", "allLength", "isIndeterminate", "allCheckedUpdate", "_sfc_main$d", "FsSearchButtons", "validatedForm", "searchAfterReset", "autoSearch", "debounce", "validateOnChange", "each", "_cellRender", "onFormValidated", "splitKey", "split", "_onUpdateModelValue", "onValueChanged", "_onInput", "onInput", "onKeyup", "autoSearchTrigger", "doSearch", "defaultSlot", "buildFieldContext", "componentRenderRefs", "splitedKey", "rulePath", "searchFormRef", "getComponentRenderRef", "doReset", "doValidate", "silent", "validateWrap", "unset", "defBtnOptions", "_click", "initAutoSearch", "wait", "getValidatedForm", "setForm", "newForm", "inputEventDisabled", "doAutoSearch", "changeInputEventDisabled", "validateOnChangeSilent", "componentRef", "valueChangeContext", "immediate", "computedRules", "_sfc_main$b", "computedIsMultiLine", "columnsRowRef", "columnsBoxHeightRef", "columnsList", "columnsLineHeightRef", "searchEventContextRef", "toggleCollapse", "computedColName", "computedColumnBoxHeight", "_component_fs_search_buttons", "collapse", "_sfc_main$a", "collapseButton", "useAttrs", "defaultOption", "__DEFAULT__", "onUpdateActiveKey", "_sfc_main$8", "computedRadioName", "usedDict", "computedOptions", "opt", "optionProps", "placeholder", "renderLabel", "transformDictData", "computedPlaceholder", "onSelectedChange", "dataMap", "selectComp", "$emit", "optionComp", "getHashCode", "chr", "buildArrayValue", "valueArr", "_sfc_main$7", "COLOR_LIST", "EFFECT_LIST", "getColor", "setColor", "typeKey", "color", "hashcode", "colors", "effects", "computedValueItems", "valueProp", "labelProp", "colorfulOptions", "newValues", "_sfc_main$6", "computedMultiple", "sub", "Labels", "Index", "_sfc_main$5", "dictUseRet", "fieldNamesBinder", "onSelectChange", "selectedOptions", "_sfc_main$4", "_sfc_main$3", "_sfc_main$2", "_sfc_main$1", "treeRef", "_useSlots", "dictSelectRef", "valuesFormatRef", "dialogOpen", "initSelectedKeys", "selectedRowKeys", "multiple", "valueType", "openTableSelect", "openOptions", "crudOptionsOverride", "buildMergedCrudOptions", "beforeOpen", "getScopeContext", "computedValuesFormat", "valuesFormat", "computedSelect", "updateKey", "clearable", "buildMultiBinding", "computedDialogBinding", "dialog", "buildProps", "viewMode", "appendByValues", "refreshing", "selectionOptions", "buildSelectionCrudOptions", "crossPage", "selectOnClickRow", "getPageData", "onSelectedKeysChanged", "onRefreshed", "setSelectedRows", "getBaseTableRef", "onOk", "getDictMap", "opened", "scopeRef", "FastCrud", "customComponents", "com", "printWarningLogger"]
}
